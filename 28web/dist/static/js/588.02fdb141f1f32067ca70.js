webpackJsonp([588],{"6jol":function(e,t,a){"use strict";var i=a("Vo7i"),r=a("HlqG");t.a={name:"salesmanDialog",props:{innerVisible:{type:Boolean,default:!1},formData:{type:Object,default:{formTitle:"",formRow:{}}}},data:function(){return{loading:!0,list:[],userList:[],subFormData:{groupName:"",remarks:""}}},methods:{handleClose:function(){this.$parent.$parent.innerVisible=!1,this.$parent.$parent.formData={},this.$refs.formData.resetFields()},getGroupList:function(){var t=this;"修改业务员培训分组"===this.formData.formTitle&&Object(i.a)({url:"/"+this.$cms+"/usercenter/aflcsalesmanlearninggroup/v1/"+this.formData.formRow.id,method:"get"}).then(function(e){200===e.status?(t.userList=[],e.data.userList.forEach(function(e){t.userList.push(e.userId)}),t.subFormData.groupName=e.data.groupName,t.subFormData.remarks=e.data.remarks):t.$message.warning(e.errorInfo)}).catch(function(e){t.$message.warning(e.errorInfo)})},getSalesman:function(){var t=this;this.loading=!0,Object(r.b)({currentPage:1,pageSize:500,vo:{groupCode:"101"},groupCode:"101"}).then(function(e){t.loading=!1,t.list=[],e.data.list.forEach(function(e){t.list.push({userId:e.userId,label:e.name+","+e.mobile})})}).catch(function(e){t.$message({type:"info",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)}),t.loading=!1})},saveSalesman:function(e,t){var a=[];return t.forEach(function(t){e.map(function(e){t===e.userId&&a.push({userId:t,salesmanName:e.label.slice(0,e.label.indexOf(",")),salesmanMobile:e.label.slice(e.label.indexOf(",")+1)})})}),a},sure:function(t){var a=this,r="修改业务员培训分组"===this.formData.formTitle,s={id:r?this.formData.formRow.id:void 0,groupName:this.subFormData.groupName,remarks:this.subFormData.remarks,userList:this.saveSalesman(this.list,this.userList)},n=r?"/usercenter/aflcsalesmanlearninggroup/v1/update":"/usercenter/aflcsalesmanlearninggroup/v1/add";this.$refs[t].validate(function(e){if(!e)return!1;Object(i.a)({url:"/"+a.$cms+n,method:"post",data:s}).then(function(e){200===e.status?(r?a.$message.success("修改成功"):a.$message.success("新增成功"),a.handleClose(t),a.$emit("changge",!0)):a.$message.warning(e.errorInfo)}).catch(function(e){a.$message.warning(e.errorInfo)})})}},created:function(){this.getGroupList(),this.getSalesman()}}},B9C1:function(e,t,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"salesmanDialog"},[a("el-dialog",{attrs:{width:"40%",title:t.formData.formTitle,visible:t.innerVisible,"before-close":t.handleClose,"append-to-body":"",center:""}},[a("el-form",{ref:"formData",attrs:{model:t.subFormData,"label-position":"right","label-width":"130px"}},[a("el-form-item",{attrs:{label:"组名 ：",prop:"groupName",rules:{required:!0,message:"请输入组名",trigger:"change"}}},[a("el-input",{staticStyle:{"line-height":"38px"},attrs:{placeholder:"请输入组名",maxlength:"25","show-word-limit":""},model:{value:t.subFormData.groupName,callback:function(e){t.$set(t.subFormData,"groupName",e)},expression:"subFormData.groupName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述 ：",prop:"remarks",rules:{required:!0,message:"请输入描述",trigger:"change"}}},[a("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",placeholder:"请输入描述",maxlength:"50","show-word-limit":""},model:{value:t.subFormData.remarks,callback:function(e){t.$set(t.subFormData,"remarks",e)},expression:"subFormData.remarks"}})],1)],1),t._v(" "),a("el-transfer",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"transfer",attrs:{props:{key:"userId",label:"label"},titles:["所有业务员","可见业务员"],data:t.list},model:{value:t.userList,callback:function(e){t.userList=e},expression:"userList"}}),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-success"},on:{click:function(e){t.sure("formData")}}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-error"},on:{click:function(e){t.handleClose("formData")}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};t.a=r},HlqG:function(e,t,a){"use strict";t.c=function(){return r.a.get("/"+s+"/usercenter/aflcBusinessGroup/v1/tree")},t.b=function(e){return Object(r.a)({url:"/"+s+"/usercenter/aflcBusinessGroupUser/v1/list",method:"post",data:e})},t.a=function(e){return Object(r.a)({url:"/"+s+"/usercenter/aflcBusinessGroup/v1/addGroupAndUsers",method:"post",data:e})},t.e=function(e){return Object(r.a)({url:"/"+s+"/usercenter/aflcBusinessGroup/v1/updateGroupAndUsers",method:"put",data:e})},t.d=function(e){return r.a.get("/"+s+"/usercenter/aflcBusinessGroup/v1/selectGroupAndUsers/"+e)};var r=a("Vo7i"),s="aflc-uc"},cx3P:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("6jol"),s=a("B9C1");var n=function(e){a("xxjM")},i=a("VU/8")(r.a,s.a,n,"data-v-b841e6ea",null);t.default=i.exports},xxjM:function(e,t){}});