webpackJsonp([489],{"2BCT":function(t,e){},CO0n:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("UOdx"),n=s("DHMR");var a=function(t){s("tbna"),s("wLIg")},r=s("VU/8")(i.a,n.a,a,"data-v-109d114c",null);e.default=r.exports},DHMR:function(t,e,s){"use strict";var i={render:function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"tags-view-container"},[i("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},[s.showDash?i("router-link",{staticClass:"tags-view-item",class:s.isActive({path:"/dashboard"})?"active":"",attrs:{to:"/dashboard"},nativeOn:{contextmenu:function(t){t.preventDefault(),s.openMenu(s.$el,t,!0)}}},[s._v("\n      首页\n    ")]):s._e(),s._v(" "),s._l(Array.from(s.visitedViews),function(e){return i("router-link",{key:e.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",class:s.isActive(e)?"active":"",attrs:{to:e.path},nativeOn:{contextmenu:function(t){t.preventDefault(),s.openMenu(e,t)}}},[s._v("\n      "+s._s(s.generateTitle(e.title))+"\n      "),i("span",{staticClass:"el-icon-close",on:{click:function(t){t.preventDefault(),t.stopPropagation(),s.closeSelectedTag(e)}}})])})],2),s._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:s.visible,expression:"visible"}],staticClass:"contextmenu-box",style:{left:s.left+"px",top:s.top+"px"}},[i("ul",{staticClass:"contextmenu"},[s.hideCloseCurrentMenu?s._e():i("li",{on:{click:function(t){s.closeSelectedTag(s.selectedTag)}}},[s._v("关闭")]),s._v(" "),i("li",{on:{click:s.closeOthersTags}},[s._v("关闭其他")]),s._v(" "),i("li",{on:{click:s.closeAllTags}},[s._v("关闭全部")])]),s._v(" "),i("div",{staticClass:"menu-line"}),s._v(" "),i("ul",{staticClass:"contextmenu contextmenu-list"},[i("router-link",{attrs:{tag:"li",to:"/dashboard"}},[i("i",{class:s.isActive({path:"/dashboard"})?"el-icon-check":""}),s._v("\n        首页\n      ")]),s._v(" "),s._l(Array.from(s.visitedViews),function(t){return i("router-link",{key:t.path,attrs:{tag:"li",to:t.path}},[i("i",{class:s.isActive(t)?"el-icon-check":""}),s._v("\n      "+s._s(s.generateTitle(t.title))+"\n      ")])})],2)])],1)},staticRenderFns:[]};e.a=i},UOdx:function(t,e,s){"use strict";var i=s("BO1k"),l=s.n(i),n=s("sUix"),a=s("TIfe");e.a={components:{ScrollPane:n.a},data:function(){return{showDash:!0,visible:!1,top:0,left:0,selectedTag:{},hideCloseCurrentMenu:!1}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews}},watch:{$route:function(){this.addViewTags(),this.moveToCurrentTag()},visible:function(t){t?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.addViewTags(),this.showDash=Object(a.b)().username=!1},methods:{generateTitle:function(t){return t},generateRoute:function(){return!(!this.$route.name||"首页"===this.$route.name)&&this.$route},isActive:function(t){return t.path===this.$route.path||t.name===this.$route.name},addViewTags:function(){var t=this.generateRoute();if(!t)return!1;this.$store.dispatch("addVisitedViews",t)},moveToCurrentTag:function(){var r=this,o=this.$refs.tag;this.$nextTick(function(){var t=!0,e=!1,s=void 0;try{for(var i,n=l()(o);!(t=(i=n.next()).done);t=!0){var a=i.value;if(a.to===r.$route.path){r.$refs.scrollPane.moveToTarget(a.$el);break}}}catch(t){e=!0,s=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw s}}})},closeSelectedTag:function(s){var i=this;this.$store.dispatch("delVisitedViews",s).then(function(t){if(i.isActive(s)){var e=t.slice(-1)[0];e?i.$router.push(e.path):i.$router.push("/")}})},closeOthersTags:function(){var t=this;this.$router.push(this.selectedTag.path),this.$store.dispatch("delOthersViews",this.selectedTag).then(function(){t.moveToCurrentTag()})},closeAllTags:function(){this.$store.dispatch("delAllViews"),this.$router.push("/")},openMenu:function(t,e,s){this.visible=!0,this.selectedTag=t,this.left=e.clientX,this.top=e.clientY,this.hideCloseCurrentMenu=!!s},closeMenu:function(){this.visible=!1}}}},W8O8:function(t,e,s){"use strict";var i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"scrollContainer",staticClass:"scroll-container",on:{wheel:function(t){return t.preventDefault(),e.handleScroll(t)}}},[s("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",style:{left:e.left+"px"}},[e._t("default")],2)])},staticRenderFns:[]};e.a=i},Z451:function(t,e,s){"use strict";e.a={name:"scrollPane",data:function(){return{left:0}},methods:{handleScroll:function(t){var e=t.wheelDelta||3*-t.deltaY,s=this.$refs.scrollContainer.offsetWidth,i=this.$refs.scrollWrapper.offsetWidth;0<e?this.left=Math.min(0,this.left+e):s-15<i?this.left<-(i-s+15)?this.left=this.left:this.left=Math.max(this.left+e,s-i-15):this.left=0},moveToTarget:function(t){var e=this.$refs.scrollContainer.offsetWidth,s=t.offsetLeft,i=t.offsetWidth;s<-this.left?this.left=15-s:s+15>-this.left&&s+i<-this.left+e-15||(this.left=-(s-(e-i)+15))}}}},sUix:function(t,e,s){"use strict";var i=s("Z451"),n=s("W8O8");var a=function(t){s("2BCT")},r=s("VU/8")(i.a,n.a,a,"data-v-9fc91970",null);e.a=r.exports},tbna:function(t,e){},wLIg:function(t,e){}});