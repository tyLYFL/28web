webpackJsonp([589],{"4dsM":function(e,r,o){"use strict";r.a=function(e){return Object(t.a)({url:"/"+s+"/common/aflcCommonUser/v1/updatePlatformAdminPassword",method:"PUT",data:e})};var t=o("Vo7i"),s="aflc-common"},Fg3j:function(e,r,o){"use strict";var t={render:function(){var r=this,e=r.$createElement,o=r._self._c||e;return o("el-dialog",{staticClass:"passwordPop",attrs:{title:"修改密码",visible:r.isShow,"close-on-click-modal":!1,"before-close":r.closeMe},on:{"update:visible":function(e){r.isShow=e}}},[o("el-form",{ref:"ruleForm",attrs:{model:r.form,"status-icon":"",size:"mini",rules:r.rules}},[o("el-form-item",{attrs:{label:"账号","label-width":r.formLabelWidth,prop:"username"}},[o("el-input",{attrs:{disabled:"","auto-complete":"off"},model:{value:r.form.username,callback:function(e){r.$set(r.form,"username",e)},expression:"form.username"}})],1),r._v(" "),o("el-form-item",{attrs:{label:"原始密码","label-width":r.formLabelWidth,prop:"origin_pwd"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:r.form.origin_pwd,callback:function(e){r.$set(r.form,"origin_pwd",e)},expression:"form.origin_pwd"}})],1),r._v(" "),o("el-form-item",{attrs:{label:"新密码","label-width":r.formLabelWidth,prop:"pwd"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:r.form.pwd,callback:function(e){r.$set(r.form,"pwd",e)},expression:"form.pwd"}})],1),r._v(" "),o("el-form-item",{attrs:{label:"确认新密码","label-width":r.formLabelWidth,prop:"re_pwd"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:r.form.re_pwd,callback:function(e){r.$set(r.form,"re_pwd",e)},expression:"form.re_pwd"}})],1)],1),r._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"mini"},on:{click:r.closeMe}},[r._v("取 消")]),r._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){r.submitForm("ruleForm")}}},[r._v("确 定")])],1)],1)},staticRenderFns:[]};r.a=t},Wn24:function(e,r,o){"use strict";var t=o("Dd8w"),s=o.n(t),i=o("NYxO"),n=o("4dsM");r.a={props:{isShow:{type:Boolean,default:!1}},computed:s()({},Object(i.b)(["otherinfo"])),mounted:function(){console.log("this.otherinfo",this.otherinfo),this.form.username=this.otherinfo.username,this.form.id=this.otherinfo.id,this.form.userType=this.otherinfo.type},data:function(){var t=this;return{isCheck:"",form:{id:0,username:"",origin_pwd:"",userType:"",pwd:"",re_pwd:"",errorTip:""},formLabelWidth:"100px",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],origin_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{validator:function(e,r,o){"false"===t.isCheck?(o(new Error("请输入正确的密码！")),t.isCheck=""):o()},message:"请输入正确的密码"}],pwd:[{required:!0,message:"请输入新密码",trigger:"blur",validator:function(e,r,o){"string"!=typeof r||""===r||r.length<6?o("密码不能小于6位"):o()}}],re_pwd:[{required:!0,message:"请再次输入新密码",trigger:"change"},{validator:function(e,r,o){""===r?o(new Error("请再次输入密码")):r!==t.form.pwd?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]}}},methods:{submitForm:function(o){var t=this;this.$refs[o].validate(function(e){if(!e)return!1;var r=t.form;Object(n.a)({userName:r.username,id:r.id,oldPassword:t.$md5(r.origin_pwd),newPassword:t.$md5(r.pwd),surePassword:t.$md5(r.re_pwd),userType:r.userType}).then(function(e){t.closeMe(),t.$message({type:"success",message:"操作成功~"})}).catch(function(e){console.log("err",e),-1!==e.errorInfo.indexOf("原密码错误")&&(t.isCheck="false",t.$refs[o].validate()),t.$message.warning(e.errorInfo?e.errorInfo:e.text)})})},resetForm:function(e){this.$refs[e].resetFields()},closeMe:function(e){this.resetForm("ruleForm"),this.$emit("update:isShow",!1),"function"==typeof e&&e()}}}},cajI:function(e,r){},xZcn:function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=o("Wn24"),s=o("Fg3j");var i=function(e){o("cajI")},n=o("VU/8")(t.a,s.a,i,null,null);r.default=n.exports}});