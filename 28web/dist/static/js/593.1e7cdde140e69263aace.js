webpackJsonp([593],{"6DPB":function(e,t,o){"use strict";t.b=function(e,t,o){return Object(i.a)({url:"/"+n+"/usercenter/aflcrecommendposition/v1/",method:"post",data:{currentPage:e,pageSize:t,vo:o}})},t.a=function(e){return Object(i.a)({url:"/"+n+"/usercenter/aflcrecommendposition/v1/"+e,method:"get"})},t.c=function(e,t){return Object(i.a)({url:"/"+n+"/usercenter/aflcrecommendposition/v1/"+e,method:"put",data:t})};var i=o("Vo7i"),n="aflc-uc"},"9IhN":function(e,t){},hRAW:function(e,t,o){"use strict";var i=o("6DPB"),n=o("0xDb");t.a={name:"rec-setting",props:{isVisibleDialog:{type:Boolean,default:!1},info:{type:[Array,Object],default:function(){}}},watch:{isVisibleDialog:{handler:function(e){this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.fetchInfo(this.info.id)}},info:{handler:function(e){},immediate:!0}},data:function(){return{loading:!1,form:{recommendColumn:"",recommendPosition:"",recommendLimitType:"",recommendLimit:"",recommendRemarks:""},checked:!0,newrules:{},getRecDetialId:""}},mounted:function(){},methods:{fetchInfo:function(e){var t=this;return this.loading=!0,Object(i.a)(e).then(function(e){t.comWatch(e.data),1===e.data.recommendLimitType?t.checked=!0:t.checked=!1,t.loading=!1}).catch(function(e){t.$message.warning(e.text?e.text:e.errorInfo),t.loading=!1})},comWatch:function(e){this.form={recommendColumn:e.recommendColumn,recommendPosition:e.recommendPosition,recommendLimitType:e.recommendLimitType,recommendLimit:e.recommendLimit,recommendRemarks:e.recommendRemarks}},submitForm:function(){var o=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;if((o.loading=!0)===o.checked)o.form.recommendLimitType=1,o.senFetch();else{var t=void(o.form.recommendLimitType=0);(t=Object(n.i)(o.form)).recommendLimit="",console.log(t,"data"),Object(i.c)(o.info.id,t).then(function(e){o.$emit("success"),o.$message.success("保存成功"),o.close()})}})},senFetch:function(){var t=this;if(""===this.form.recommendLimit||null===this.form.recommendLimit)return this.$message.info("请输入推荐限制数"),this.loading=!1;var e;e=Object(n.i)(this.form),Object(i.c)(this.info.id,e).then(function(e){t.$emit("success"),t.$message.success("保存成功"),t.close()}).catch(function(e){t.$message.warning(e.text?e.text:e.errorInfo),t.loading=!1})},reset:function(){this.$refs.ruleForm.resetFields()},close:function(e){this.reset(),this.$emit("update:isVisibleDialog",!1),this.$emit("close"),"function"==typeof e&&e()}}}},"n/Be":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("hRAW"),n=o("rs2i");var r=function(e){o("9IhN")},m=o("VU/8")(i.a,n.a,r,null,null);t.default=m.exports},rs2i:function(e,t,o){"use strict";var i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"commoncss lll-recsetting"},[o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"推荐位设置","close-on-click-modal":!1,visible:t.isVisibleDialog,width:"40%"},on:{close:t.close}},[o("el-form",{ref:"ruleForm",staticClass:"clearfix",attrs:{model:t.form,rules:t.newrules,"label-width":"100px"}},[o("div",{staticClass:"message-left clearfix"},[o("el-form-item",{attrs:{label:"推荐栏目:",prop:"recommendColumn"}},[o("el-input",{attrs:{clearable:"",maxlength:25,disabled:""},model:{value:t.form.recommendColumn,callback:function(e){t.$set(t.form,"recommendColumn",e)},expression:"form.recommendColumn"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"推荐位置:",prop:"recommendPosition"}},[o("el-input",{attrs:{clearable:"",maxlength:25,disabled:""},model:{value:t.form.recommendPosition,callback:function(e){t.$set(t.form,"recommendPosition",e)},expression:"form.recommendPosition"}})],1)],1),t._v(" "),o("div",{staticClass:"message-bottom clearfix"},[o("el-form-item",{attrs:{label:" 自定义属性:",prop:"limitStr"}},[o("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("推荐条数限制")]),t._v(" "),!0===t.checked?o("p",{staticStyle:{color:"red","font-size":"12px","line-height":"20px"}},[t._v("\n            超过"+t._s(null===t.form.recommendLimit||""===t.form.recommendLimit?"0":t.form.recommendLimit)+"则不展示更多推荐（必填）")]):t._e(),t._v(" "),!0===t.checked?o("el-input",{directives:[{name:"number-only",rawName:"v-number-only"}],attrs:{placeholder:"请输入推荐条数",maxlength:5},model:{value:t.form.recommendLimit,callback:function(e){t.$set(t.form,"recommendLimit",e)},expression:"form.recommendLimit"}},[o("template",{slot:"prepend"},[t._v("超出")]),t._v(" "),o("template",{slot:"append"},[t._v("条，超出的推荐则不生效")])],2):t._e()],1),t._v(" "),o("el-form-item",{attrs:{label:"备注:"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注信息",maxlength:100},model:{value:t.form.recommendRemarks,callback:function(e){t.$set(t.form,"recommendRemarks",e)},expression:"form.recommendRemarks"}})],1)],1)]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("确定")]),t._v(" "),o("el-button",{attrs:{type:"primary",plain:""},on:{click:t.close}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};t.a=i}});