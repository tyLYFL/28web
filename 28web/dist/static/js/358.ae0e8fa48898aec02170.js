webpackJsonp([358,465],{"+qRl":function(e,t,a){"use strict";var s=a("54D7");t.a={components:{messageManagement:s.default},data:function(){return{type:"all",messageManagementList:[{type:"all",name:"全部"},{type:"noProcessed",name:"未处理"},{type:"already",name:"已处理"}]}},mounted:function(){},methods:{handleClick:function(e){console.log(e,"tabtab"),this.type=e.name}}}},"1onU":function(e,t,a){"use strict";var s=a("VT+v"),i=a("juIs");var n=function(e){a("ZdV2"),a("co/t")},l=a("VU/8")(s.a,i.a,n,"data-v-695be8cd",null);t.a=l.exports},"54D7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("8lks"),i=a("rK8W");var n=function(e){a("s1sM")},l=a("VU/8")(s.a,i.a,n,"data-v-7a1ffaaa",null);t.default=l.exports},"8lks":function(e,t,a){"use strict";var s=a("1onU"),i=a("CsBo"),n=a("0xDb");t.a={name:"messageManagement",props:{isvisible:{type:String,default:"all"}},components:{Pager:s.a},data:function(){return{loading:!1,btnsize:"mini",listSystemObj:{processStatus:"all",content:"",chooseTime:null},dataTotal:0,tableData:[],pageNum:1,pageSize:20,saveDate:null,innerFormData:{isShow:!1,remark:""}}},mounted:function(){this.firstblood()},methods:{getSelection:function(e){this.saveDate=e},clickDetails:function(e){this.$refs.multipleTable.toggleRowSelection(e)},handlePageChange:function(e){this.pageNum=e.pageNum,this.pageSize=e.pageSize,this.firstblood()},firstblood:function(){var t=this;t.loading=!0;var e=Object(n.j)({pageNum:t.pageNum,pageSize:t.pageSize}),a={processStatus:"all"===t.isvisible?null:"noProcessed"===t.isvisible?0:1,content:t.listSystemObj.content,startTime:t.listSystemObj.chooseTime&&1<t.listSystemObj.chooseTime.length?t.listSystemObj.chooseTime[0]:"",endTime:t.listSystemObj.chooseTime&&1<t.listSystemObj.chooseTime.length?t.listSystemObj.chooseTime[1]:""};Object(i.b)(e,a).then(function(e){200===e.status&&(t.tableData=e.data.list,t.dataTotal=e.data.total),t.loading=!1}).catch(function(e){t.loading=!1})},innerClick:function(e){var t=this;switch(e){case"sure":Object(i.a)({id:t.saveDate[0].id,taskDetailId:t.saveDate[0].taskDetailId,remark:t.innerFormData.remark}).then(function(e){200===e.status?(t.$message.success("处理成功"),t.innerFormData={isShow:!1,remark:""},t.firstblood()):t.$message.error(e.errorInfo)}).catch(function(e){t.$message.error(e.errorInfo)});break;default:t.innerFormData={isShow:!1,remark:""}}},handleSearch:function(e){switch(e){case"clear":this.listSystemObj={processStatus:"all",content:"",chooseTime:null},this.$refs.pager.pageNum=1,this.pageNum=1,this.firstblood();break;case"search":this.$refs.pager.pageNum=1,this.pageNum=1,this.firstblood();break;default:this.saveDate&&1===this.saveDate.length?1==this.saveDate[0].processStatus?this.$message.info("该数据已处理"):this.innerFormData.isShow=!0:this.saveDate&&0!==this.saveDate.length?(this.$message.info("每次只能操作单条数据~"),this.$refs.multipleTable.clearSelection()):this.$message.info("请先选择您要操作的任务")}}}}},CsBo:function(e,t,a){"use strict";t.b=function(e,t){return Object(s.a)({url:"/"+i+"/usercenter/aflcvisitshippertask/v1/platform/visitFailList?"+e,method:"post",data:t})},t.a=function(e){return Object(s.a)({url:"/"+i+"/usercenter/aflcvisitshippertask/v1/platform/updateVisitFail",method:"post",data:e})};var s=a("Vo7i"),i="aflc-uc"},QAsP:function(e,t){},"VT+v":function(e,t,a){"use strict";t.a={props:{sizes:{type:Array,default:function(){return[20,50,100,400]}},total:{type:Number,default:0},pageLog:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.total/this.size)}},watch:{pageNum:function(){this.inputval=this.pageNum},size:function(){1==this.pageLog&&(this.pageNum=1)}},mounted:function(){this.size=this.sizes[0],this.pageNum=this.pageLog},data:function(){return{pageNum:1,oldValue:0,inputval:1,oldNum:1,size:100}},methods:{handleFocus:function(e){this.oldValue=e.target.value},sizesChange:function(){this.pageNum=1,this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size})},changeEvent:function(){this.oldNum!==this.pageNum&&(this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size}))},handleCurrentChange:function(e){this.pageNum=e,this.changeEvent()},handleSizeChange:function(e){this.size=e,this.changeEvent()},handleChange:function(e){var t=parseInt(e,10);isNaN(t)?this.inputval=1:t<1?this.inputval=1:t>this.pages?this.inputval=this.pages:this.inputval=t},handleBlur:function(e){var t=e.target;this.handleChange(t.value),this.jumpTo(this.inputval)},handleKeyup:function(e){var t=e.keyCode,a=e.target;console.log("page keydown:",t,a),13===t&&this.oldValue&&a.value!==this.oldValue&&(this.handleChange(a.value),this.oldValue="")},jumpTo:function(e){console.log("d",this.inputval),e<1?this.pageNum=1:e>this.pages?this.pageNum=this.pages:this.pageNum=e,this.changeEvent()}}}},ZdV2:function(e,t){},"co/t":function(e,t){},juIs:function(e,t,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tms-pagenation"},[a("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(1)}}},[a("span",{staticClass:"first-page"})]),a("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(t.pageNum-1)}}},[a("span",{staticClass:"prev-page"})]),t._v(" "),a("span",{staticClass:"page-jumper"},[t._v("\n    第\n    "),a("el-input",{ref:"input",staticClass:"el-pagination__editor is-in-pagination",attrs:{min:1,max:t.pages,type:"number",disabled:t.pages<=1},on:{change:t.handleChange,focus:t.handleFocus,blur:t.handleBlur},nativeOn:{keydown:function(e){return t.handleKeyup(e)}},model:{value:t.inputval,callback:function(e){t.inputval="string"==typeof e?e.trim():e},expression:"inputval"}}),t._v(" 页\n  ")],1),t._v("\n  /共 "+t._s(t.pages)+" 页\n  "),a("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pageNum+1)}}},[a("span",{staticClass:"next-page"})]),t._v(" "),a("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pages)}}},[a("span",{staticClass:"last-page"})]),t._v(" "),a("span",{staticClass:"tms-pagination__sizes"},[a("el-select",{staticClass:"page-select",attrs:{placeholder:"请选择"},on:{change:t.sizesChange},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}},t._l(t.sizes,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1)])},staticRenderFns:[]};t.a=s},rK8W:function(e,t,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"identicalStyle customerReported"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm classify_searchinfo",attrs:{inline:!0,model:t.listSystemObj}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"",align:"right","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd"},model:{value:t.listSystemObj.chooseTime,callback:function(e){t.$set(t.listSystemObj,"chooseTime",e)},expression:"listSystemObj.chooseTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{clearable:"",maxlength:"20"},model:{value:t.listSystemObj.content,callback:function(e){t.$set(t.listSystemObj,"content",e)},expression:"listSystemObj.content"}})],1),t._v(" "),a("el-form-item",{staticClass:"btnChoose fr",staticStyle:{"margin-left":"0"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:"",size:t.btnsize},on:{click:function(e){t.handleSearch("search")}}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"info",icon:"fontFamily aflc-icon-qingkong",size:t.btnsize,plain:""},on:{click:function(e){t.handleSearch("clear")}}},[t._v("清空")])],1)],1),t._v(" "),a("div",{staticClass:"classify_info"},[a("div",{staticClass:"btns_box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus",plain:"",size:t.btnsize},on:{click:function(e){t.handleSearch("processed")}}},[t._v("处理")])],1),t._v(" "),a("div",{staticClass:"info_news"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",border:"",align:"center",height:"100%",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.getSelection,"row-click":t.clickDetails}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题",prop:"title",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"内容",prop:"content"}}),t._v(" "),a("el-table-column",{attrs:{label:"推送时间",width:"150",prop:"createTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"处理状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(1==e.row.processStatus?"已处理":"未处理")+"\n            ")]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"info_tab_footer"},[t._v("\n    共计:"+t._s(t.dataTotal)+"\n    "),a("div",{staticClass:"show_pager"},[a("Pager",{ref:"pager",attrs:{total:t.dataTotal},on:{change:t.handlePageChange}})],1)]),t._v(" "),a("el-dialog",{staticClass:"StyleNewinfoComponent commoncss",attrs:{width:"40%",title:"确认将打卡状态标记为已打卡",visible:t.innerFormData.isShow},on:{"update:visible":function(e){t.$set(t.innerFormData,"isShow",e)}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注"},model:{value:t.innerFormData.remark,callback:function(e){t.$set(t.innerFormData,"remark",e)},expression:"innerFormData.remark"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-success",type:"primary"},on:{click:function(e){t.innerClick("sure")}}},[t._v("确 认")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-error"},on:{click:function(e){t.innerClick("close")}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};t.a=s},s1sM:function(e,t){},uXIw:function(e,t,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsWrap"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.messageManagementList,function(e){return a("el-tab-pane",{key:e.type,attrs:{label:e.name,name:e.type}},[t.type==e.type?a("message-management",{attrs:{isvisible:t.type}}):t._e()],1)}))],1)},staticRenderFns:[]};t.a=s},x97i:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("+qRl"),i=a("uXIw");var n=function(e){a("QAsP")},l=a("VU/8")(s.a,i.a,n,"data-v-351e185c",null);t.default=l.exports}});