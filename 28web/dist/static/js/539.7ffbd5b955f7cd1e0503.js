webpackJsonp([539],{B4nh:function(t,e,n){"use strict";var i={render:function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],staticClass:"TwoColumns purchaseMember clearfix"},[r("div",{staticClass:"columnsContainer"},[r("div",{staticClass:"side_left"},[r("el-tree",{ref:"purchanseTree",attrs:{data:i.cityTree,"node-key":"code",props:i.defaultProps,"show-checkbox":"","default-expand-all":"","highlight-current":!0},on:{"node-click":i.handleNodeClick,check:i.nodeClick}})],1),i._v(" "),r("div",{staticClass:"side_right"},[r("div",{staticClass:"side_right_bottom clearfix"},[r("div",{staticClass:"info_news"},[r("el-table",{directives:[{name:"has",rawName:"v-has:MARKETING_DRIVER_MEMBER_SYSTEM_DRIVER_MEMBER_BUY_LIST",arg:"MARKETING_DRIVER_MEMBER_SYSTEM_DRIVER_MEMBER_BUY_LIST"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:i.tableData,"span-method":i.objectSpanMethod,border:"",stripe:"",align:"center",height:"100%","tooltip-effect":"dark"}},[r("el-table-column",{attrs:{label:"序号",width:"60"},scopedSlots:i._u([{key:"default",fn:function(t){return[i._v("\n                                "+i._s((i.listSystemObj.currentPage-1)*i.listSystemObj.pageSize+t.$index+1)+"\n                            ")]}}])}),i._v(" "),r("el-table-column",{attrs:{prop:"firstMemberGrade",label:"一级会员等级"}}),i._v(" "),r("el-table-column",{attrs:{prop:"secondMemberGrade","show-overflow-tooltip":!0,label:"二级会员等级"}}),i._v(" "),r("el-table-column",{attrs:{prop:"winOrderGradeName",label:"中单等级"}}),i._v(" "),r("el-table-column",{attrs:{prop:"rewardGradeName",label:"奖励等级"}}),i._v(" "),r("el-table-column",{attrs:{prop:"commissionGradeName",label:"抽佣等级"}}),i._v(" "),r("el-table-column",{attrs:{prop:"extractCashGradeName",label:"提现等级"}}),i._v(" "),r("el-table-column",{attrs:{prop:"minBehaviorScore",label:"购买时最低行为分"},scopedSlots:i._u([{key:"default",fn:function(t){var e=t.row,n=t.$index;return[r("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.inputSize,clearable:""},on:{blur:function(t){i.checkInput(n,"minBehaviorScore","购买时最低行为分")}},model:{value:e.minBehaviorScore,callback:function(t){i.$set(e,"minBehaviorScore",t)},expression:"row.minBehaviorScore"}})]}}])}),i._v(" "),r("el-table-column",{attrs:{prop:"buyPrice",label:"购买金额"},scopedSlots:i._u([{key:"default",fn:function(t){var e=t.row,n=t.$index;return[r("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.inputSize,clearable:""},on:{blur:function(t){i.checkInput(n,"buyPrice","购买金额")}},model:{value:e.buyPrice,callback:function(t){i.$set(e,"buyPrice",t)},expression:"row.buyPrice"}})]}}])}),i._v(" "),r("el-table-column",{attrs:{prop:"primaryBuyPrice",label:"页面提示购买原价"},scopedSlots:i._u([{key:"default",fn:function(t){var e=t.row,n=t.$index;return[r("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.inputSize,clearable:""},on:{blur:function(t){i.checkInput(n,"primaryBuyPrice","页面提示购买原价")}},model:{value:e.primaryBuyPrice,callback:function(t){i.$set(e,"primaryBuyPrice",t)},expression:"row.primaryBuyPrice"}})]}}])}),i._v(" "),r("el-table-column",{attrs:{prop:"memberExpireDate",label:"会员有效期（天）"},scopedSlots:i._u([{key:"default",fn:function(t){var e=t.row,n=t.$index;return[r("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{size:i.inputSize,clearable:""},on:{blur:function(t){i.checkInput(n,"memberExpireDate","会员有效期")}},model:{value:e.memberExpireDate,callback:function(t){i.$set(e,"memberExpireDate",t)},expression:"row.memberExpireDate"}})]}}])}),i._v(" "),r("el-table-column",{attrs:{width:"120",prop:"usingStatus",label:"状态"},scopedSlots:i._u([{key:"default",fn:function(t){return[i._v("\n                                "+i._s("0"==t.row.usingStatus?"禁用":"启用")+"\n                            ")]}}])}),i._v(" "),r("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:i._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:i.btnsize,type:"0"==e.row.usingStatus?"primary":"info",disabled:!e.row.id,plain:""},on:{click:function(t){i.handleClick("status",e.row)}}},[i._v(i._s(0==e.row.usingStatus?"启用":"禁用"))])]}}])})],1)],1),i._v(" "),r("div",{staticClass:"member_footer"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-success",plain:"",size:"middle",disabled:i.btnShow},on:{click:function(t){i.handleClick("new")}}},[i._v("保  存")])],1)])])])])},staticRenderFns:[]};e.a=i},GvL1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("t4dV"),r=n("B4nh");var c=function(t){n("YNQh")},o=n("VU/8")(i.a,r.a,c,null,null);e.default=o.exports},YNQh:function(t,e){},c5Na:function(t,e,n){"use strict";e.f=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcMarketingMemberConfig/v1/addSystemMemberConfig",method:"post",data:t})},e.i=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcMarketingMemberConfig/v1/listSystemMemberConfig",method:"post",data:t})},e.l=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcMarketingMemberConfig/v1/updateSystemMemberConfig",method:"post",data:t})},e.h=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcMarketingMemberConfig/v1/listExchangeMemberConfig",method:"post",data:t})},e.k=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcMarketingMemberConfig/v1/updateExchangeMemberConfigUsingStatus/"+t,method:"post"})},e.e=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcMarketingMemberConfig/v1/addExchangeMemberConfig",method:"post",data:t})},e.g=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcMarketingMemberConfig/v1/listBuyMemberConfig",method:"post",data:t})},e.d=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcMarketingMemberConfig/v1/addBuyMemberConfig",method:"post",data:t})},e.j=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcMarketingMemberConfig/v1/updateBuyMemberConfigUsingStatus/"+t,method:"post"})},e.c=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcDriverBuyMemberDetail/v1/list",method:"post",data:t})},e.b=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcCoinsGrantDriver/v1/driverList",method:"post",data:t})},e.a=function(t){return Object(i.a)({url:"/"+r+"/usercenter/aflcCoinsGrantDriverDetail/v1/list",method:"post",data:t})};var i=n("Vo7i"),r="aflc-uc"},t4dV:function(t,e,n){"use strict";var i=n("t5DY"),o=n("c5Na"),s=n("0xDb");e.a={data:function(){return{loading:!0,btnShow:!1,inputSize:"small",cityTree:[],btnsize:"mini",tableData:[],listSystemObj:{currentPage:1,pageSize:1e5,vo:{belongCity:"",city:"",province:""}},defaultProps:{children:"children",label:"name"}}},components:{},mounted:function(){this.firstblood()},methods:{checkInput:function(t,e,n){console.log("key,label",t,e,this.tableData[t][e]),this.tableData[t][e]?0==parseInt(this.tableData[t][e])&&(this.$message({type:"info",message:"第"+(t+1)+"行"+n+"不可为0！"}),this.tableData[t][e]=""):this.$message({type:"info",message:"第"+(t+1)+"行"+n+"不可为空！"})},firstblood:function(){var e=this;Object(i._2)().then(function(t){e.cityTree=t.data,e.listSystemObj.vo.belongCity=e.cityTree[0].children[0].code,e.listSystemObj.vo.province=e.cityTree[0].children[0].pname,e.listSystemObj.vo.city=e.cityTree[0].children[0].name,e.$refs.purchanseTree.setCheckedKeys([e.cityTree[0].children[0].code]),e.getCommonFunction()})},getSpanArr:function(t){this.spanArr=[];for(var e=this.pos=0;e<t.length;e++)0===e?(this.spanArr.push(1),this.pos=0):t[e].firstMemberGrade===t[e-1].firstMemberGrade?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=e)},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex;if(1===t.columnIndex){var n=this.spanArr[e];return{rowspan:n,colspan:0<n?1:0}}},handleClick:function(t,e){var n=this;switch(t){case"status":Object(o.j)(e.id).then(function(t){n.getCommonFunction()}).catch(function(t){n.$message({type:"warning",message:"操作失败，原因："+(t.errorInfo?t.errorInfo:t.text)})});break;case"new":var i=[],r=!1,c=void 0;(i=Object(s.i)(this.tableData)).forEach(function(t){t.minBehaviorScore?t.buyPrice?t.primaryBuyPrice?t.memberExpireDate||(r=!0,c="会员有效期设置不可为空！"):(r=!0,c="页面提示购买原价设置不可为空！"):(r=!0,c="购买金额设置不可为空！"):(r=!0,c="购买时最低行为分设置不可为空！"),t.belongCity=n.listSystemObj.vo.belongCity,t.province=n.listSystemObj.vo.province,t.city=n.listSystemObj.vo.city}),r?this.$message({type:"info",message:c}):(this.btnShow=!0,Object(o.d)(i).then(function(t){n.$message({type:"success",message:"保存成功！"}),n.btnShow=!1,n.getCommonFunction()}).catch(function(t){n.$message({type:"warning",message:"操作失败，原因："+(t.errorInfo?t.errorInfo:t.text)}),n.btnShow=!1}))}},getCommonFunction:function(){var n=this;this.loading=!0,Object(o.g)(this.listSystemObj).then(function(t){var e=[];n.tableArr=t.data,t.data.forEach(function(t){t.configs.forEach(function(t){e.push(t)})}),n.tableData=e,n.getSpanArr(n.tableData),n.loading=!1})},handleNodeClick:function(t,e){},nodeClick:function(t){console.log("nodeClick",t),this.listSystemObj.vo.belongCity=t.code,this.listSystemObj.vo.province=t.pname,this.listSystemObj.vo.city=t.name,this.$refs.purchanseTree.setCheckedKeys([t.code]),this.getCommonFunction()}}}},t5DY:function(t,e,n){"use strict";e._10=function(e){return e=e||"",c.a.get("/"+o+"/common/aflcCommonPCA/v1/findAflcCommonPCAByCode?code="+e).then(function(t){return t.code=e,t})},e._14=function(t){return c.a.get("/"+o+"/common/aflcCommonPCA/v1/findAllStreetby/"+t)},e._12=function(t){return Object(c.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/"+t,method:"get"})},e._13=function(t){return Object(c.a)({url:"/"+o+"/aflcCommonSysDistApi/findAflcCommonSysDictByCodes/"+t,method:"get"})},e._11=function(t){return Object(c.a)({url:"/"+o+"/sysDict/findAflcCommonSysDictBycode/"+t,method:"get"})},e.s=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00424")},e.r=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF021")},e.u=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF040")},e.f=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF048")},e.j=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF02004")},e.T=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF02003")},e.M=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF017")},e.p=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF018")},e.q=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF009")},e.n=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF05602")},e.m=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF05603")},e.V=function(t,e){return Object(c.a)({url:"/"+s+"/sm/aflcStandardPrice/v1/getPriceByServiceAndCarType/"+t+"/"+e,method:"get"})},e.O=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00101")},e.o=function(){return Object(c.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF009",method:"get"})},e.N=function(){return Object(c.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF00208",method:"get"})},e.G=function(){return Object(c.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF054",method:"get"})},e.R=function(){return Object(c.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF053",method:"get"})},e.z=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00503")},e.K=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00207")},e.k=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00206")},e.Q=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00209")},e.S=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF062")},e.I=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF063")},e.L=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF064")},e.i=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF057")},e.l=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00210")},e.J=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF066")},e.y=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF074")},e.x=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF075")},e.t=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF076")},e.P=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF077")},e.H=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF078")},e.v=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00211")},e.w=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF06803")},e.F=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08501")},e.A=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08506")},e.h=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08502")},e.E=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08507")},e.B=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00513")},e.C=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0880301")},e.D=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0880302")},e.X=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08403")},e.U=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08404")},e.a=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0880303")},e.e=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08805")},e.d=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08804")},e.c=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08808")},e.g=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0880304")},e.W=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08810")},e._20=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00418")},e.b=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08802")},e._17=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0710801")},e._18=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF05006")},e._16=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF04913")},e.Y=function(){return c.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0710803")},e._15=function(t){return window.UPLOADPOLICYDATA?new r.a(function(t){t(window.UPLOADPOLICYDATA)}):c.a.get("/aflc-common/common/oss/v1/policy?bucket="+t).then(function(t){return window.UPLOADPOLICYDATA=t.data||"",window.UPLOADPOLICYDATA_timer=setTimeout(function(){window.UPLOADPOLICYDATA=""},6e4),window.UPLOADPOLICYDATA})},e._9=function(t){return c.a.get("/aflc-common/common/oss/v1/generatePreSignedUrl?bucket=aflcprivate&key="+t)},e._8=function(){return c.a.get("/"+s+"/sm/aflcDistrict/v1/getProvinceList")},e._5=function(t){return Object(c.a)({url:"/"+s+"/sm/aflcDistrict/v1/lists",method:"post",data:{code:t}})},e._4=function(){return c.a.get("/"+s+"/sm/aflcSysDict/v1/getCarTypeList")},e._7=function(){return c.a.get("/"+s+"/sm/aflcSysDict/v1/getServiceClassList")},e._6=function(){return Object(c.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF025",method:"get"})},e.Z=function(){return c.a.get("/"+o+"/common/aflcCityTree/v1/treaCode")},e._2=function(){return c.a.get("/"+o+"/common/aflcCityTree/v1/provinceCode")},e._0=function(t){return c.a.get("/aflc-sm/sm/aflcAreaPrice/v1/open/"+t)},e._1=function(t){return c.a.get("/aflc-uc/usercenter/aflcLogisticsCompany/v1/companyName?id="+t)},e._3=function(t){return Object(c.a)({url:"/"+a+"/usercenter/aflcBusinessGroup/v1/findAflcSystemUserList",method:"post",data:t})},e._19=function(t){return Object(c.a)({url:"/"+o+"/system/user/v1/operate/staff",method:"post",data:t})};var i=n("//Fk"),r=n.n(i),c=n("Vo7i"),o="aflc-common",s="aflc-sm",a="aflc-uc";window.UPLOADPOLICYDATA="",window.UPLOADPOLICYDATA_timer=""}});