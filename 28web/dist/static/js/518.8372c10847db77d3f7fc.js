webpackJsonp([518],{"3R31":function(e,t,r){"use strict";var a={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"batchImport",attrs:{title:t.currentTitle,top:"15vh",modal:!1,visible:t.dialogVisible,"custom-class":"add-review","close-on-click-modal":!1,"modal-append-to-body":!1,width:"30%","before-close":t.close}},[r("div",{staticClass:"ifcancel"},[r("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":t.formLabelWidth,"label-position":"right"}},[r("el-form-item",{attrs:{label:"专线承运商：",prop:"carriersId"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.carriersId,callback:function(e){t.$set(t.form,"carriersId",e)},expression:"form.carriersId"}},t._l(t.optionsCarriers,function(e){return r("el-option",{key:e.id,attrs:{label:e.carriersName,value:e.id}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"承运商网点：",prop:"pointId"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form.pointId,callback:function(e){t.$set(t.form,"pointId",e)},expression:"form.pointId"}},t._l(t.optionseCarrierPoint,function(e){return r("el-option",{key:e.id,attrs:{label:e.pointName,value:e.id}})}))],1),t._v(" "),"batchImport"==t.exportType?r("el-form-item",{attrs:{label:"导入数据：",prop:"fileName"}},[r("el-input",{attrs:{clearable:""},model:{value:t.form.fileName,callback:function(e){t.$set(t.form,"fileName",e)},expression:"form.fileName"}},[r("el-button",{attrs:{slot:"prepend",title:"点击下载导入模板",icon:"el-icon-download"},on:{click:t.downloading},slot:"prepend"}),t._v(" "),r("label",{staticClass:"file-box",attrs:{slot:"append",for:"file"},slot:"append"},[r("span",{staticClass:"look-file"},[t._v("浏览")]),t._v(" "),r("input",{ref:"inputer",staticClass:"file-input Js_file-input",attrs:{id:"file",type:"file"},on:{change:t.getfileName}})])],1)],1):t._e()],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["batchImport"==t.exportType?r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-success"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("确认")]):r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-success"},on:{click:function(e){t.submitForm2("ruleForm")}}},[t._v("确认")]),t._v(" "),r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-error"},on:{click:t.close}},[t._v("取消")])],1)])},staticRenderFns:[]};t.a=a},"4ATP":function(e,t){},"74zt":function(e,t,r){"use strict";t.E=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclPlatformStandardPriceNewV2/v1/list",method:"post",data:e})},t.A=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclPlatformStandardPriceNewV2/v1/add",method:"post",data:e})},t.G=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclPlatformStandardPriceNewV2/v1/update",method:"put",data:e})},t.h=function(e){return Object(a.a)({url:"/"+n+"/usercenter/aflcLclValueDeliveTakePrice/v1/list",method:"post",data:e})},t.f=function(e){return Object(a.a)({url:"/"+n+"/usercenter/aflcLclValueDeliveTakePrice/v1/"+e,method:"get"})},t.x=function(e){return Object(a.a)({url:"/"+n+"/usercenter/aflcLclValueDeliveTakePrice/v1/add",method:"post",data:e})},t.M=function(e){return Object(a.a)({url:"/"+n+"/usercenter/aflcLclValueDeliveTakePrice/v1/update",method:"put",data:e})},t.e=function(e){return Object(a.a)({url:"/"+n+"/usercenter/aflcLclValueDeliveTakePrice/v1/batchUpdate",method:"put",data:e})},t.j=function(e){return Object(a.a)({url:"/"+n+"/usercenter/aflcLclValueDeliveTakePrice/v1/banOrUse",method:"put",data:e})},t.i=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueDeliveTakePrice/v1/list",method:"post",data:e})},t.y=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueDeliveTakePrice/v1/add",method:"post",data:e})},t.g=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueDeliveTakePrice/v1/"+e,method:"get"})},t.N=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueDeliveTakePrice/v1/update",method:"put",data:e})},t.k=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueDeliveTakePrice/v1/banOrUse",method:"put",data:e})},t.m=function(){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueDeliveTakePrice/v1/templateExcel?platformType=1",responseType:"blob",method:"get"})},t.s=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueDeliveTakePrice/v1/import",method:"post",data:e})},t.l=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueDeliveTakePrice/v1/outAgencyExcel?platformType="+e.platformType+"&carriersId="+e.carriersId+"&carriersName="+e.carriersName+"&useType="+e.useType,responseType:"blob",method:"get"})},t.K=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAgencyLinePriceNewV2/v1/list",method:"post",data:e})},t.B=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAgencyLinePriceNewV2/v1/add",method:"post",data:e})},t.J=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAgencyLinePriceNewV2/v1/"+e,method:"get"})},t.H=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAgencyLinePriceNewV2/v1/update",method:"put",data:e})},t.L=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAgencyLinePriceNewV2/v1/banOrUse",method:"put",data:e})},t.r=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAgencyLinePriceNewV2/v1/import",method:"post",data:e})},t.n=function(e){var t=e||"0";return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAgencyLinePriceNewV2/v1/templateExcel?platformType="+t,responseType:"blob",method:"get"})},t.o=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAgencyLinePriceNewV2/v1/outAgencyExcel?agencyName="+e.agencyName+"&agencyId="+e.agencyId+"&platformType="+e.platformType+"&agencyArea="+e.agencyArea+"&startArea="+e.startArea+"&startProvince="+e.startProvince+"&startCity="+e.startCity+"&startAreaCode="+e.startAreaCode+"&carriersId="+e.carriersId+"&carriersName="+e.carriersName+"&pointId="+e.pointId+"&pointName="+e.pointName+"&pointArea="+e.pointArea,responseType:"blob",method:"get"})},t.D=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueAreaPriceNewV2/v1/list",method:"post",data:e})},t.z=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueAreaPriceNewV2/v1/add",method:"post",data:e})},t.F=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueAreaPriceNewV2/v1/update",method:"put",data:e})},t.a=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueAreaPriceNewV2/v1/"+e,method:"get"})},t.b=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueAreaPriceNewV2/v1/banOrUse",method:"put",data:e})},t.t=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAreaAgencyAndLinePriceNewV2/v1/list",method:"post",data:e})},t.q=function(e,t){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAgencyLinePriceNewV2/v1/agencyLine?areaCode="+e+"&cityName="+t,method:"get"})},t.C=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAreaAgencyAndLinePriceNewV2/v1/add",method:"post",data:e})},t.I=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAreaAgencyAndLinePriceNewV2/v1/update",method:"put",data:e})},t.u=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAreaAgencyAndLinePriceNewV2/v1/"+e,method:"get"})},t.v=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAreaAgencyAndLinePriceNewV2/v1/banOrUse",method:"put",data:e})},t.p=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclAreaAgencyAndLinePriceNewV2/v1/outAgencyExcel?agencyId="+e,responseType:"blob",method:"get"})},t.c=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueAgencyAndPlatformPriceNewV2/v1/list",method:"post",data:e})},t.w=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueAgencyAndPlatformPriceNewV2/v1/add",method:"post",data:e})},t.d=function(e){return Object(a.a)({url:"/"+c+"/lclserver/aflcLclValueAgencyAndPlatformPriceNewV2/v1/banOrUse",method:"put",data:e})};var a=r("Vo7i"),n="aflc-uc",c="aflc-lcl"},NnYa:function(e,t,r){"use strict";t.b=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclDedicatedCarriersLine/v1/list",method:"post",data:e})},t.e=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclDedicatedCarriersLine/v1/add",method:"post",data:e})},t.f=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclDedicatedCarriersLine/v1/update",method:"put",data:e})},t.a=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclDedicatedCarriersLine/v1/"+e,method:"get"})},t.c=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclDedicatedCarriersLine/v1/banOrUse",method:"put",data:e})},t.d=function(){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclDedicatedCarriersLine/v1/carriersLine",method:"get"})};var a=r("Vo7i"),n="aflc-lcl"},siAg:function(e,t,r){"use strict";t.b=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclCarrierPointNetwork/v1/list",method:"post",data:e})},t.f=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclCarrierPointNetwork/v1/add",method:"post",data:e})},t.h=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclCarrierPointNetwork/v1/update",method:"put",data:e})},t.a=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclCarrierPointNetwork/v1/"+e,method:"get"})},t.c=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclCarrierPointNetwork/v1/banOrUse",method:"put",data:e})},t.d=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclCarrierPointNetwork/v1/pointNetwork?carrierId="+e,method:"get"})},t.g=function(e){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclCompanyPark/v1/add",method:"post",data:e})},t.e=function(){return Object(a.a)({url:"/"+n+"/lclserver/aflcLclCompanyPark/v1/companyPark",method:"get"})};var a=r("Vo7i"),n="aflc-lcl"},vZGw:function(e,t,r){"use strict";var a=r("//Fk"),n=r.n(a),c=r("bOdI"),l=r.n(c),i=r("NnYa"),o=r("siAg"),s=r("74zt"),u=r("0xDb");t.a={name:"batchImport",components:{},props:{dialogVisible:{type:Boolean,default:!1},currentTitle:{type:String,default:"请选择导入定价的出发区/县"},exportType:{type:String}},watch:{dialogVisible:function(e,t){}},data:function(){var e;return{formLabelWidth:"120px",loading:!0,form:(e={fileName:"",platformType:"1",carriersId:"",carriersName:"",pointId:"",pointName:"",pointArea:"",startProvince:"",startCity:"",agencyName:"",agencyId:"",agencyArea:"",startArea:""},l()(e,"startProvince",""),l()(e,"startCity",""),l()(e,"startAreaCode",""),e),optionseAreaAgency:[],rules:{carriersId:{required:!0,message:"请选择专线承运商",trigger:"change"},pointId:{required:!0,message:"请选择承运商网点",trigger:"change"},fileName:{required:!0,message:"请选择导入文件",trigger:"change"}},btnShow:!1,optionseCarrierPoint:[],optionsCarriers:[]}},mounted:function(){this.init()},methods:{getfileName:function(e){console.log("getfileName",e),console.log("getfileName222",this.$refs.inputer.files),console.log("getfileName222",e.path[0].files),this.form.fileName=e.path[0].files[0].name},init:function(){var t=this;n.a.all([Object(i.d)(),Object(o.d)()]).then(function(e){t.optionsCarriers=e[0].data,t.optionseCarrierPoint=e[1].data})},submitForm:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return a.$message({type:"warning",message:"请填写完整数据!"}),!1;a.btnShow=!0;var t=a.$refs.inputer,r=new FormData;r.append("excelFile",t.files[0]),r.append("platformType",a.form.platformType),r.append("carriersId",a.form.carriersId),r.append("carriersName",a.optionsCarriers.find(function(e){return e.id==a.form.carriersId}).carriersName),r.append("pointId",a.form.pointId),r.append("pointName",a.optionseCarrierPoint.find(function(e){return e.id==a.form.pointId}).pointName),r.append("pointArea",a.optionseCarrierPoint.find(function(e){return e.id==a.form.pointId}).pointArea),r.append("startProvince",a.optionseCarrierPoint.find(function(e){return e.id==a.form.pointId}).province),r.append("startCity",a.optionseCarrierPoint.find(function(e){return e.id==a.form.pointId}).city),Object(s.r)(r).then(function(e){a.$message({type:"success",message:"操作成功！"}),a.close()}).catch(function(e){a.$message({type:"warning",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)}),a.btnShow=!1})})},submitForm2:function(e){var c=this;this.$refs[e].validate(function(e){if(!e)return c.$message({type:"warning",message:"请填写完整数据!"}),!1;c.form.pointName=c.optionseCarrierPoint.find(function(e){return e.id==c.form.pointId}).pointName;var n=Object(u.i)(c.form);c.$message.info("正在导出中..."),Object(s.o)(n).then(function(e){var t=new Blob([e]),r=window.URL.createObjectURL(t),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("target","_blank"),a.setAttribute("download",n.pointName+"干线费定价.xlsx"),document.body.appendChild(a),a.click(),document.body.removeChild(a),c.close()}).catch(function(e){c.$message({type:"warning",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)}),c.btnShow=!1})})},close:function(e){this.$refs.ruleForm.resetFields(),"batchImport"==this.exportType&&(this.$refs.inputer.value=""),this.$emit("update:dialogVisible",!1),this.$emit("close"),"function"==typeof e&&e()},downloading:function(){this.$emit("downloading")}}}},x5Tz:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("vZGw"),n=r("3R31");var c=function(e){r("4ATP")},l=r("VU/8")(a.a,n.a,c,null,null);t.default=l.exports}});