webpackJsonp([199,329],{"0lAm":function(e,t){},"0o19":function(e,t,a){"use strict";var r=a("RRo+"),n=a.n(r),i=a("DOtt"),s=(a.n(i),a("K9Ec")),o=a("0xDb"),c=a("Cae1"),l=a("t5DY");t.a={name:"PlaceOrderCodeRewordConfigADD",props:{dialogFormVisible:{type:Boolean,required:!0},formtitle:{type:String,required:!0,default:"新增下单码奖励配置"},isModify:{type:Boolean,default:!1},changeForm:{type:Object}},components:{getCityList:c.a},data:function(){return{btnShow:!1,formLabelWidth:"150px",standForm:{rewardType:"1",rewardCityCode:"",rewardCity:"",rewardProvince:"",serviceClassify:"",serviceClassifyCode:"",rewardTotalLimit:"",perOrderRewardLimit:"",perOrderDayRewardTimeLimit:"",perUserDayRewardTimeLimit:"",perUserOrderRewardTimeLimit:"",timeVal:[],rewardStartDate:"",rewardEndDate:"",aflcRecommendAwardList:[{recomAuthStart:"0",recomAuthEnd:"",awardStart:"",awardEnd:""}]},optionsUsersType:"",newrules:{rewardCityCode:{required:!0,message:"请选择奖励区域",trigger:"change"},serviceClassifyCode:{required:!0,message:"请选择服务分类",trigger:"change"},rewardTotalLimit:{required:!0,validator:function(e,t,a){if(!t)return a(new Error("活动奖励总上限不能为空"));n()(t)?a():a(new Error("请输入数字值"))},trigger:"change"},timeVal:{type:"array",required:!0,message:"请选择奖励日期",trigger:"change"},perOrderRewardLimit:{required:!0,validator:function(e,t,a){if(!t)return a(new Error("每个下单码奖励上限不能为空"));n()(t)?a():a(new Error("请输入数字值"))},trigger:"change"},perOrderDayRewardTimeLimit:{required:!0,validator:function(e,t,a){if(!t)return a(new Error("每个下单码每天奖励次数上限不能为空"));n()(t)?a():a(new Error("请输入数字值"))},trigger:"change"},perUserDayRewardTimeLimit:{required:!0,validator:function(e,t,a){if(!t)return a(new Error("同一货主每天扫下单码奖励单数上限不能为空"));n()(t)?a():a(new Error("请输入数字值"))},trigger:"change"},perUserOrderRewardTimeLimit:{required:!0,validator:function(e,t,a){if(!t)return a(new Error("同一货主扫同一下单码奖励单数上限不能为空"));n()(t)?a():a(new Error("请输入数字值"))},trigger:"change"}},optionsServicetype:[],remarkList:[{label:"下单码鼓励货主分发，奖励货主；"},{label:"活动奖励总上限：当前配置的活动，所有使用下单码的货主获取的总奖励金额不能大于该数值；超出该数值时，活动奖励自动熔断，不再发放奖励；"},{label:"每个下单码奖励上限：当前配置的活动中，每个下单码最多可获得的奖励上限；单个下单码奖励不能超出该数值；"},{label:"每个下单码每天奖励次数上限：当前配置的活动中，每个下单码每天可获得奖励上限的次数；当天单个下单码奖励次数不能大于该数值；"},{label:"同一货主每天扫下单码奖励单数上限：当前配置的活动中，同一货主当天扫描一个或多个下单码下单，奖励下单码的单数不能大于该数值，防止同一货主给多个下单码刷奖励；"},{label:"同一货主扫同一下单码奖励单数上限：当前配置的活动中，同一货主扫描同一下单码下单奖励发放的次数；超出次数后，货主扫码下单，下单码不能得到奖励，防止同一货主利用同一下单码刷单。"}]}},watch:{dialogFormVisible:{handler:function(e,t){e&&this.reviseForms()},deep:!0}},mounted:function(){this.init()},methods:{ifWrong:function(e,t){var a=e[t].recomAuthEnd<=e[t].recomAuthStart;if(e.length==t+1&&this.addItem(t),a)return this.$message({type:"info",message:"单数区间终止值应不小于起始值"}),e.length>t+1&&e.splice(t+1),e[t].recomAuthEnd="";e.length>t+1&&(e[t+1].recomAuthStart=e[t].recomAuthEnd,e[t+1].recomAuthEnd&&e[t+1].recomAuthEnd<=e[t+1].recomAuthStart&&(this.$message({type:"info",message:"单数区间终止值应不小于起始值"}),e.splice(t+1),this.addItem(t)))},compareValue:function(e,t){switch(e){case"awardStart":this.standForm.aflcRecommendAwardList[t].awardEnd&&parseInt(this.standForm.aflcRecommendAwardList[t].awardEnd)<parseInt(this.standForm.aflcRecommendAwardList[t].awardStart)&&(this.$message({type:"info",message:"奖励金额区间起始值不小于终止值"}),this.standForm.aflcRecommendAwardList[t].awardStart="");break;case"awardEnd":this.standForm.aflcRecommendAwardList[t].awardStart&&parseInt(this.standForm.aflcRecommendAwardList[t].awardEnd)<parseInt(this.standForm.aflcRecommendAwardList[t].awardStart)&&(this.$message({type:"info",message:"奖励金额区间起始值不小于终止值"}),this.standForm.aflcRecommendAwardList[t].awardEnd="")}},handlerChoose:function(e,t){var a="awardStart"==e?this.standForm.aflcRecommendAwardList[t].awardStart:this.standForm.aflcRecommendAwardList[t].awardEnd;a=(a=(a=(a=(a=a.replace(/[^\d.]/g,"")).replace(/^\./g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),"awardStart"==e?this.standForm.aflcRecommendAwardList[t].awardStart=a:this.standForm.aflcRecommendAwardList[t].awardEnd=a},getStr:function(e){this.standForm.rewardProvince=e.province?e.province.name:"",this.standForm.rewardCity=e.city?e.city.name:"",this.standForm.rewardCityCode=e.city?e.city.code:""},getValue:function(e){return e?e.value:""},close:function(){this.$emit("update:dialogFormVisible",!1),this.$refs.ruleForm.resetFields(),this.clearForms(),this.$emit("renovate"),this.btnShow=!1,this.isModify||this.$refs.area.clearData()},init:function(){var t=this;Object(l.M)().then(function(e){t.optionsServicetype=e.data})},reviseForms:function(){this.isModify?(this.standForm=Object(o.i)(this.changeForm),this.$set(this.standForm,"timeVal",[this.changeForm.rewardStartDate,this.changeForm.rewardEndDate])):this.clearForms()},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return n.$message({type:"warning",message:"请填写完整数据!"}),!1;var t=!1,a=void 0;if(n.standForm.aflcRecommendAwardList.forEach(function(e){e.awardStart&&e.awardEnd?e.recomAuthStart+""||(t=!0,a="请完善下单码奖励单数区间!"):(t=!0,a="请填写下单码完整奖励金额数据!")}),t)n.$message({type:"info",message:a});else{n.completeName(),n.btnShow=!0;var r=Object(o.i)(n.standForm);(n.isModify?Object(s.u)(r):Object(s.p)(r)).then(function(e){n.$message({type:"success",message:n.isModify?"修改成功！":"新增成功！"}),n.close()}).catch(function(e){n.$message({type:"info",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)}),n.btnShow=!1})}})},clearForms:function(){this.standForm={rewardType:"1",rewardCityCode:"",rewardCity:"",rewardProvince:"",serviceClassify:"",serviceClassifyCode:"",rewardTotalLimit:"",perOrderRewardLimit:"",perOrderDayRewardTimeLimit:"",perUserDayRewardTimeLimit:"",perUserOrderRewardTimeLimit:"",timeVal:[],rewardStartDate:"",rewardEndDate:"",aflcRecommendAwardList:[{awardStart:"",awardEnd:"",recomAuthStart:"0",recomAuthEnd:""}]}},addItem:function(e){this.standForm.aflcRecommendAwardList.push({recomAuthStart:this.standForm.aflcRecommendAwardList[e].recomAuthEnd,recomAuthEnd:"",awardStart:"",awardEnd:""})},reduceItem:function(e){this.standForm.aflcRecommendAwardList.splice(e,1)},completeName:function(){var t=this;this.isModify||(this.standForm.serviceClassify=this.optionsServicetype.find(function(e){return e.code===t.standForm.serviceClassifyCode}).name),this.standForm.rewardStartDate=this.standForm.timeVal[0]?this.standForm.timeVal[0]:"",this.standForm.rewardEndDate=this.standForm.timeVal[1]?this.standForm.timeVal[1]:""}}}},"1alW":function(e,t,a){var r=a("kM2E");r(r.S,"Number",{isInteger:a("AKgy")})},"1onU":function(e,t,a){"use strict";var r=a("VT+v"),n=a("juIs");var i=function(e){a("ZdV2"),a("co/t")},s=a("VU/8")(r.a,n.a,i,"data-v-695be8cd",null);t.a=s.exports},AKgy:function(e,t,a){var r=a("EqjI"),n=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&n(e)===e}},CSar:function(e,t,a){"use strict";var r=a("t5DY");t.a={name:"getCityList",props:{disabled:{type:Boolean},value:[String,Array]},data:function(){return{selectedOptions:[],areaList:null,cityTree:[],props:{label:"name",value:"code",children:"children"},nowData:{province:null,city:null,area:null}}},methods:{handleItemMore:function(e){e[0]&&(this.nowData.province={code:e[0],key:e[0],name:this.$refs.cityTree.currentLabels[0],value:this.$refs.cityTree.currentLabels[0],parentCode:null}),e[1]&&(this.nowData.city={code:e[1],key:e[1],name:this.$refs.cityTree.currentLabels[1],value:this.$refs.cityTree.currentLabels[1],parentCode:e[0]}),e[2]&&(this.nowData.area={code:e[2],key:e[2],name:this.$refs.cityTree.currentLabels[2],value:this.$refs.cityTree.currentLabels[2],parentCode:e[1]}),this.returnArr(this.nowData)},init:function(){var t=this;Object(r._2)().then(function(e){t.cityTree=e.data})},returnArr:function(e){this.$emit("returnStr",e)},clearData:function(){this.selectedOptions=[]}},mounted:function(){this.init()},beforeDestroy:function(){this.selectedOptions=[]}}},Cae1:function(e,t,a){"use strict";var r=a("CSar"),n=a("JNZ8");var i=function(e){a("fJqg")},s=a("VU/8")(r.a,n.a,i,null,null);t.a=s.exports},DOtt:function(e,t){},DSWW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Yc75"),n=a("rkkS");var i=function(e){a("0lAm")},s=a("VU/8")(r.a,n.a,i,null,null);t.default=s.exports},JNZ8:function(e,t,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chooseCityList"},[a("el-cascader",{ref:"cityTree",attrs:{options:t.cityTree,disabled:t.disabled,props:t.props},on:{change:t.handleItemMore},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}})],1)},staticRenderFns:[]};t.a=r},K9Ec:function(e,t,a){"use strict";t.e=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcOrderRewardSetting/v1/list",method:"post",data:e})},t.p=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcOrderRewardSetting/v1/add",method:"post",data:e})},t.f=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcOrderRewardSetting/v1/openOrForbidden",method:"post",data:e})},t.u=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcOrderRewardSetting/v1/update",method:"put",data:e})},t.j=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcRecommendAwardInfo/v1/list",method:"post",data:e})},t.q=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcRecommendAwardInfo/v1/add",method:"post",data:e})},t.v=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcRecommendAwardInfo/v1/update",method:"put",data:e})},t.k=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcRecommendAwardInfo/v1/openOrForbidden",method:"post",data:e})},t.a=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcBusinessRewardSetting/v1/list",method:"post",data:e})},t.o=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcBusinessRewardSetting/v1/add",method:"post",data:e})},t.t=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcBusinessRewardSetting/v1/update",method:"put",data:e})},t.b=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcBusinessRewardSetting/v1/openOrForbidden",method:"post",data:e})},t.r=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcOrderRewardDetail/v1/orderCodeList",method:"post",data:e})},t.s=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcOrderRewardDetail/v1/receiveCodeList",method:"post",data:e})},t.d=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcRecommendRewardDetail/v1/list",method:"post",data:e})},t.n=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcBusinessRewardDetail/v1/shipperList",method:"post",data:e})},t.c=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcBusinessRewardDetail/v1/driverList",method:"post",data:e})},t.h=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcOrderCodeRecommend/v1/orderCodeList",method:"post",data:e})},t.g=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcOrderCodeRecommend/v1/receiveCodeList",method:"post",data:e})},t.l=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcUserRecommendShare/v1/list",method:"post",data:e})},t.i=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcUserRecommender/v1/list",method:"post",data:e})},t.m=function(e){return Object(r.a)({url:"/"+n+"/sm/aflcOrderRecommend/v1/list",method:"post",data:e})};var r=a("Vo7i"),n="aflc-sm"},"RRo+":function(e,t,a){e.exports={default:a("c45H"),__esModule:!0}},Tiq5:function(e,t,a){"use strict";var r={render:function(){var r=this,e=r.$createElement,n=r._self._c||e;return n("div",{staticClass:"PlaceOrderCodeRewordConfigADD commoncss rewordStyle"},[n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:r.formtitle,"close-on-click-modal":!1,top:"5vh",visible:r.dialogFormVisible},on:{close:r.close}},[n("el-form",{ref:"ruleForm",attrs:{model:r.standForm,rules:r.newrules,"label-position":"top","label-width":r.formLabelWidth}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"奖励区域：",prop:"rewardCityCode"}},[r.isModify?n("el-input",{attrs:{value:r.standForm.rewardProvince+r.standForm.rewardCity,"auto-complete":"off",disabled:""}}):n("getCityList",{ref:"area",staticClass:"chooseItem",on:{returnStr:r.getStr},model:{value:r.standForm.rewardCityCode,callback:function(e){r.$set(r.standForm,"rewardCityCode",e)},expression:"standForm.rewardCityCode"}})],1)],1),r._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"服务分类：",prop:"serviceClassifyCode"}},[r.isModify?n("el-input",{attrs:{"auto-complete":"off",maxlength:"2",disabled:""},model:{value:r.standForm.serviceClassify,callback:function(e){r.$set(r.standForm,"serviceClassify",e)},expression:"standForm.serviceClassify"}}):n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:r.standForm.serviceClassifyCode,callback:function(e){r.$set(r.standForm,"serviceClassifyCode",e)},expression:"standForm.serviceClassifyCode"}},r._l(r.optionsServicetype,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.code,disabled:e.disabled}})}))],1)],1)],1),r._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"活动奖励总上限：",prop:"rewardTotalLimit"}},[n("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:"6"},model:{value:r.standForm.rewardTotalLimit,callback:function(e){r.$set(r.standForm,"rewardTotalLimit",r._n(e))},expression:"standForm.rewardTotalLimit"}})],1)],1),r._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"奖励日期：",prop:"timeVal"}},[n("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","value-format":"timestamp","unlink-panels":"","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:r.standForm.timeVal,callback:function(e){r.$set(r.standForm,"timeVal",e)},expression:"standForm.timeVal"}})],1)],1)],1),r._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"每个下单码奖励上限：",prop:"perOrderRewardLimit"}},[n("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{"auto-complete":"off",maxlength:"6"},model:{value:r.standForm.perOrderRewardLimit,callback:function(e){r.$set(r.standForm,"perOrderRewardLimit",r._n(e))},expression:"standForm.perOrderRewardLimit"}})],1)],1),r._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"每个下单码每天奖励次数上限：",prop:"perOrderDayRewardTimeLimit"}},[n("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{"auto-complete":"off",maxlength:"3"},model:{value:r.standForm.perOrderDayRewardTimeLimit,callback:function(e){r.$set(r.standForm,"perOrderDayRewardTimeLimit",r._n(e))},expression:"standForm.perOrderDayRewardTimeLimit"}})],1)],1)],1),r._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"同一货主每天扫下单码奖励单数上限：",prop:"perUserDayRewardTimeLimit"}},[n("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{"auto-complete":"off",maxlength:"3"},model:{value:r.standForm.perUserDayRewardTimeLimit,callback:function(e){r.$set(r.standForm,"perUserDayRewardTimeLimit",r._n(e))},expression:"standForm.perUserDayRewardTimeLimit"}})],1)],1),r._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"同一货主扫同一下单码奖励单数上限：",prop:"perUserOrderRewardTimeLimit"}},[n("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{"auto-complete":"off",maxlength:"3"},model:{value:r.standForm.perUserOrderRewardTimeLimit,callback:function(e){r.$set(r.standForm,"perUserOrderRewardTimeLimit",r._n(e))},expression:"standForm.perUserOrderRewardTimeLimit"}})],1)],1)],1),r._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"奖励方案："}},[n("table",{staticClass:"systemTitle"},[n("thead",[n("th",[r._v("单数区间")]),r._v(" "),n("th",[r._v("奖励金额")]),r._v(" "),n("th",{staticClass:"lastOne"},[r._v("操作")])]),r._v(" "),n("tbody",r._l(r.standForm.aflcRecommendAwardList,function(t,a){return n("tr",{key:a},[n("td",[n("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{placeholder:"包含",maxlength:"7",disabled:""},model:{value:t.recomAuthStart,callback:function(e){r.$set(t,"recomAuthStart",r._n(e))},expression:"item.recomAuthStart"}}),r._v(" "),n("span",[r._v("----")]),r._v(" "),n("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{placeholder:"包含，整数",maxlength:"7"},on:{change:function(e){r.ifWrong(r.standForm.aflcRecommendAwardList,a,t)}},model:{value:t.recomAuthEnd,callback:function(e){r.$set(t,"recomAuthEnd",r._n(e))},expression:"item.recomAuthEnd"}})],1),r._v(" "),n("td",[n("el-input",{attrs:{placeholder:"包含",maxlength:"5"},on:{change:function(e){r.compareValue("awardEnd",a)}},nativeOn:{keyup:function(e){r.handlerChoose("awardStart",a)}},model:{value:t.awardStart,callback:function(e){r.$set(t,"awardStart",e)},expression:"item.awardStart"}}),r._v(" "),n("span",[r._v("~")]),r._v(" "),n("el-input",{attrs:{placeholder:"包含，整数",maxlength:"5"},on:{change:function(e){r.compareValue("awardEnd",a)}},nativeOn:{keyup:function(e){r.handlerChoose("awardEnd",a)}},model:{value:t.awardEnd,callback:function(e){r.$set(t,"awardEnd",e)},expression:"item.awardEnd"}})],1),r._v(" "),n("td",{staticClass:"lastOne"},[n("div",{staticClass:"iconItem"},[a==r.standForm.aflcRecommendAwardList.length-1?n("span",{staticClass:"addItem",on:{click:function(e){r.addItem(a)}}}):r._e(),r._v(" "),a==r.standForm.aflcRecommendAwardList.length-1&&1!=r.standForm.aflcRecommendAwardList.length?n("span",{staticClass:"reduceItem",on:{click:function(e){r.reduceItem(a)}}}):r._e()])])])}))])])],1)],1),r._v(" "),n("el-row",{staticClass:"rewordRemark"},[n("el-col",{attrs:{span:24}},[n("p",[r._v("页面备注：")]),r._v(" "),n("ul",r._l(r.remarkList,function(e,t){return n("li",{key:t},[n("span",[r._v(r._s(t+1+"."))]),n("span",[r._v(r._s(e.label))])])}))])],1)],1),r._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-success",disabled:r.btnShow},on:{click:function(e){r.submitForm("ruleForm")}}},[r._v(r._s(r.isModify?"保 存":"确 定"))]),r._v(" "),n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-error"},on:{click:r.close}},[r._v("取 消")])],1)],1)],1)},staticRenderFns:[]};t.a=r},"VT+v":function(e,t,a){"use strict";t.a={props:{sizes:{type:Array,default:function(){return[20,50,100,400]}},total:{type:Number,default:0},pageLog:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.total/this.size)}},watch:{pageNum:function(){this.inputval=this.pageNum},size:function(){1==this.pageLog&&(this.pageNum=1)}},mounted:function(){this.size=this.sizes[0],this.pageNum=this.pageLog},data:function(){return{pageNum:1,oldValue:0,inputval:1,oldNum:1,size:100}},methods:{handleFocus:function(e){this.oldValue=e.target.value},sizesChange:function(){this.pageNum=1,this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size})},changeEvent:function(){this.oldNum!==this.pageNum&&(this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size}))},handleCurrentChange:function(e){this.pageNum=e,this.changeEvent()},handleSizeChange:function(e){this.size=e,this.changeEvent()},handleChange:function(e){var t=parseInt(e,10);isNaN(t)?this.inputval=1:t<1?this.inputval=1:t>this.pages?this.inputval=this.pages:this.inputval=t},handleBlur:function(e){var t=e.target;this.handleChange(t.value),this.jumpTo(this.inputval)},handleKeyup:function(e){var t=e.keyCode,a=e.target;console.log("page keydown:",t,a),13===t&&this.oldValue&&a.value!==this.oldValue&&(this.handleChange(a.value),this.oldValue="")},jumpTo:function(e){console.log("d",this.inputval),e<1?this.pageNum=1:e>this.pages?this.pageNum=this.pages:this.pageNum=e,this.changeEvent()}}}},XqSG:function(e,t){},Yc75:function(e,t,a){"use strict";var n=a("K9Ec"),r=a("1onU"),i=a("t5DY"),s=a("l7A0");t.a={name:"placeOrderCodeConfig",components:{Pager:r.a,add:s.default},data:function(){return{dialogFormVisible:!1,isModify:!1,formtitle:"",btnsize:"mini",loading:!1,totalCount:0,listSystemObj:{currentPage:1,pageSize:20,vo:{rewardCity:"",rewardType:"1",serviceClassifyCode:"",status:""}},optionsServicetype:[],tableData:[],changeForm:{},optionsStatus:[{name:"全部",code:""},{name:"未开始",code:"1"},{name:"进行中",code:"2"},{name:"已结束",code:"3"}]}},watch:{},mounted:function(){this.firstblood(),this.doActions()},beforeDestroy:function(){},methods:{doActions:function(){var t=this;Object(i.M)().then(function(e){t.optionsServicetype=e.data})},handlePageChange:function(e){this.listSystemObj.currentPage=e.pageNum,this.listSystemObj.pageSize=e.pageSize,this.firstblood()},handleSearch:function(e){"clear"==e&&(this.listSystemObj.vo={rewardCity:"",rewardType:"1",serviceClassifyCode:"",status:""}),1!=this.listSystemObj.currentPage&&(this.listSystemObj.currentPage=1,this.$refs.pager.inputval=this.listSystemObj.currentPage,this.$refs.pager.pageNum=this.listSystemObj.currentPage),this.firstblood()},firstblood:function(){var t=this;this.loading=!0,Object(n.e)(this.listSystemObj).then(function(e){t.tableData=e.data.list,t.totalCount=e.data.totalCount,t.loading=!1}).catch(function(e){t.loading=!1})},handleInfo:function(e){this.$router.push({name:"28币车主账户明细",query:{userId:e.userId}})},handleClick:function(e,t){var a=this;switch(e){case"new":this.dialogFormVisible=!0,this.isModify=!1,this.formtitle="新增下单码奖励配置";break;case"revise":this.dialogFormVisible=!0,this.isModify=!0,this.formtitle="修改下单码奖励配置",this.changeForm=t;break;case"status":var r="0"==t.flag?"确认启用当前奖励活动吗？":"确认禁用当前奖励活动吗？";this.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[];e.push(t.id),Object(n.f)(e).then(function(e){a.$message({type:"success",message:"操作成功！"}),a.firstblood()}).catch(function(e){a.$message({type:"warning",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)})})}).catch(function(){a.$message({type:"info",message:"已取消"})})}},Onrenovate:function(){this.firstblood()}}}},ZdV2:function(e,t){},c45H:function(e,t,a){a("1alW"),e.exports=a("FeBl").Number.isInteger},"co/t":function(e,t){},fJqg:function(e,t){},juIs:function(e,t,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tms-pagenation"},[a("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(1)}}},[a("span",{staticClass:"first-page"})]),a("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(t.pageNum-1)}}},[a("span",{staticClass:"prev-page"})]),t._v(" "),a("span",{staticClass:"page-jumper"},[t._v("\n    第\n    "),a("el-input",{ref:"input",staticClass:"el-pagination__editor is-in-pagination",attrs:{min:1,max:t.pages,type:"number",disabled:t.pages<=1},on:{change:t.handleChange,focus:t.handleFocus,blur:t.handleBlur},nativeOn:{keydown:function(e){return t.handleKeyup(e)}},model:{value:t.inputval,callback:function(e){t.inputval="string"==typeof e?e.trim():e},expression:"inputval"}}),t._v(" 页\n  ")],1),t._v("\n  /共 "+t._s(t.pages)+" 页\n  "),a("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pageNum+1)}}},[a("span",{staticClass:"next-page"})]),t._v(" "),a("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pages)}}},[a("span",{staticClass:"last-page"})]),t._v(" "),a("span",{staticClass:"tms-pagination__sizes"},[a("el-select",{staticClass:"page-select",attrs:{placeholder:"请选择"},on:{change:t.sizesChange},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}},t._l(t.sizes,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1)])},staticRenderFns:[]};t.a=r},l7A0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("0o19"),n=a("Tiq5");var i=function(e){a("XqSG")},s=a("VU/8")(r.a,n.a,i,null,null);t.default=s.exports},rkkS:function(e,t,a){"use strict";var r={render:function(){var r=this,e=r.$createElement,n=r._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],staticClass:"identicalStyle placeOrderCodeConfig"},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm classify_searchinfo",attrs:{inline:!0,model:r.listSystemObj}},[n("el-form-item",{attrs:{label:"奖励区域",prop:"rewardCity"}},[n("el-input",{attrs:{clearable:""},model:{value:r.listSystemObj.vo.rewardCity,callback:function(e){r.$set(r.listSystemObj.vo,"rewardCity",e)},expression:"listSystemObj.vo.rewardCity"}})],1),r._v(" "),n("el-form-item",{attrs:{label:"服务分类",prop:"serviceClassifyCode"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:r.listSystemObj.vo.serviceClassifyCode,callback:function(e){r.$set(r.listSystemObj.vo,"serviceClassifyCode",e)},expression:"listSystemObj.vo.serviceClassifyCode"}},r._l(r.optionsServicetype,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.code,disabled:e.disabled}})}))],1),r._v(" "),n("el-form-item",{attrs:{label:"活动状态",prop:"status"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:r.listSystemObj.vo.status,callback:function(e){r.$set(r.listSystemObj.vo,"status",e)},expression:"listSystemObj.vo.status"}},r._l(r.optionsStatus,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.code,disabled:e.disabled}})}))],1),r._v(" "),n("el-form-item",{staticClass:"btnChoose fr",staticStyle:{"margin-left":"0"}},[n("el-button",{attrs:{type:"primary",size:r.btnsize,icon:"el-icon-search",plain:""},on:{click:function(e){r.handleSearch("search")}}},[r._v("搜索")]),r._v(" "),n("el-button",{attrs:{type:"info",size:r.btnsize,icon:"fontFamily aflc-icon-qingkong",plain:""},on:{click:function(e){r.handleSearch("clear")}}},[r._v("清空")])],1)],1),r._v(" "),n("div",{staticClass:"classify_info"},[n("div",{staticClass:"btns_box"},[n("el-button",{directives:[{name:"has",rawName:"v-has:MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_ADD",arg:"MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_ADD"}],attrs:{type:"primary",icon:"el-icon-circle-plus",plain:"",size:r.btnsize},on:{click:function(e){r.handleClick("new")}}},[r._v("新增")])],1),r._v(" "),n("div",{staticClass:"info_news"},[n("el-table",{directives:[{name:"has",rawName:"v-has:MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_LIST",arg:"MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_LIST"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:r.tableData,border:"",stripe:"",align:"center",height:"100%","tooltip-effect":"dark"}},[n("el-table-column",{attrs:{label:"序号",width:"60"},scopedSlots:r._u([{key:"default",fn:function(e){return[r._v("\n                            "+r._s((r.listSystemObj.currentPage-1)*r.listSystemObj.pageSize+e.$index+1)+"\n                        ")]}}])}),r._v(" "),n("el-table-column",{attrs:{prop:"rewardCity",label:"奖励区域",width:"150"}}),r._v(" "),n("el-table-column",{attrs:{prop:"serviceClassify",label:"服务分类",width:"150"}}),r._v(" "),n("el-table-column",{attrs:{label:"奖励方案",width:"200"},scopedSlots:r._u([{key:"default",fn:function(a){return r._l(a.row.aflcRecommendAwardList,function(e,t){return n("p",{key:e.id,staticClass:"cargo"},[0==t?n("span",[r._v(r._s(e.recomAuthEnd?"前"+e.recomAuthEnd+"单：":""))]):t!=a.row.aflcRecommendAwardList.length-1||e.recomAuthEnd?n("span",[r._v("第"+r._s(e.recomAuthStart)+"~"+r._s(e.recomAuthEnd)+"单：")]):n("span",[r._v(r._s(e.recomAuthStart)+"单后：")]),r._v(" "),n("span",[r._v(r._s(e.awardStart)+"~"+r._s(e.awardEnd)+"元/单")])])})}}])}),r._v(" "),n("el-table-column",{attrs:{prop:"rewardTotalLimit",label:"活动奖励总上限",width:"150"}}),r._v(" "),n("el-table-column",{attrs:{prop:"rewardedTotal",label:"已奖励金额",width:"150"}}),r._v(" "),n("el-table-column",{attrs:{prop:"perOrderRewardLimit",label:"每个下单码奖励上限",width:"150"}}),r._v(" "),n("el-table-column",{attrs:{prop:"perOrderDayRewardTimeLimit",label:"每个下单码每天奖励次数上限",width:"150"}}),r._v(" "),n("el-table-column",{attrs:{prop:"perUserDayRewardTimeLimit",label:"同一货主每天扫下单码奖励单数上限",width:"150"}}),r._v(" "),n("el-table-column",{attrs:{prop:"perUserOrderRewardTimeLimit",label:"同一货主扫同一下单码奖励单数上限",width:"150"}}),r._v(" "),n("el-table-column",{attrs:{prop:"rewardStartDate",label:"奖励开始日期",width:"160"},scopedSlots:r._u([{key:"default",fn:function(e){return[r._v("\n                            "+r._s(r._f("parseTime")(e.row.rewardStartDate))+"\n                        ")]}}])}),r._v(" "),n("el-table-column",{attrs:{prop:"rewardEndDate",label:"奖励结束日期",width:"160"},scopedSlots:r._u([{key:"default",fn:function(e){return[r._v("\n                            "+r._s(r._f("parseTime")(e.row.rewardEndDate))+"\n                        ")]}}])}),r._v(" "),n("el-table-column",{attrs:{prop:"status",label:"活动状态",width:"150"},scopedSlots:r._u([{key:"default",fn:function(e){return[r._v("\n                            "+r._s("1"==e.row.status?"未开始":"2"==e.row.status?"进行中":"3"==e.row.status?"已结束":"")+"\n                        ")]}}])}),r._v(" "),n("el-table-column",{attrs:{prop:"flag",label:"状态",width:"150"},scopedSlots:r._u([{key:"default",fn:function(e){return[r._v("\n                            "+r._s("1"==e.row.flag?"启用":"禁用")+"\n                        ")]}}])}),r._v(" "),n("el-table-column",{attrs:{prop:"updater",label:"操作人",width:"150"}}),r._v(" "),n("el-table-column",{attrs:{prop:"updateTime",label:"操作时间",width:"160"},scopedSlots:r._u([{key:"default",fn:function(e){return[r._v("\n                            "+r._s(r._f("parseTime")(e.row.updateTime))+"\n                        ")]}}])}),r._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150"},scopedSlots:r._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"has",rawName:"v-has:MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_UPDATE",arg:"MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_UPDATE"}],attrs:{size:r.btnsize,type:"primary",plain:""},on:{click:function(e){r.handleClick("revise",t.row)}}},[r._v("修改")]),r._v(" "),n("el-button",{directives:[{name:"has",rawName:"v-has:MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_USE",arg:"MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_USE"}],attrs:{size:r.btnsize,type:"0"==t.row.flag?"primary":"info",disabled:!t.row.id,plain:""},on:{click:function(e){r.handleClick("status",t.row)}}},[r._v(r._s(0==t.row.flag?"启用":"禁用"))])]}}])})],1)],1)]),r._v(" "),n("div",{directives:[{name:"has",rawName:"v-has:MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_LIST",arg:"MARKETING_DISTRIBUTION_REWARD_PLACE_ORDER_REWARD_LIST"}],staticClass:"info_tab_footer"},[r._v("共计:"+r._s(r.totalCount)+" "),n("div",{staticClass:"show_pager"},[n("Pager",{ref:"pager",attrs:{total:r.totalCount},on:{change:r.handlePageChange}})],1)]),r._v(" "),n("add",{attrs:{dialogFormVisible:r.dialogFormVisible,isModify:r.isModify,changeForm:r.changeForm,formtitle:r.formtitle},on:{"update:dialogFormVisible":function(e){r.dialogFormVisible=e},renovate:r.Onrenovate}})],1)},staticRenderFns:[]};t.a=r},t5DY:function(e,t,a){"use strict";t._10=function(t){return t=t||"",i.a.get("/"+s+"/common/aflcCommonPCA/v1/findAflcCommonPCAByCode?code="+t).then(function(e){return e.code=t,e})},t._14=function(e){return i.a.get("/"+s+"/common/aflcCommonPCA/v1/findAllStreetby/"+e)},t._12=function(e){return Object(i.a)({url:"/"+s+"/sysDict/getSysDictByCodeGet/"+e,method:"get"})},t._13=function(e){return Object(i.a)({url:"/"+s+"/aflcCommonSysDistApi/findAflcCommonSysDictByCodes/"+e,method:"get"})},t._11=function(e){return Object(i.a)({url:"/"+s+"/sysDict/findAflcCommonSysDictBycode/"+e,method:"get"})},t.s=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00424")},t.r=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF021")},t.u=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF040")},t.f=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF048")},t.j=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF02004")},t.T=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF02003")},t.M=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF017")},t.p=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF018")},t.q=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF009")},t.n=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF05602")},t.m=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF05603")},t.V=function(e,t){return Object(i.a)({url:"/"+o+"/sm/aflcStandardPrice/v1/getPriceByServiceAndCarType/"+e+"/"+t,method:"get"})},t.O=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00101")},t.o=function(){return Object(i.a)({url:"/"+s+"/sysDict/getSysDictByCodeGet/AF009",method:"get"})},t.N=function(){return Object(i.a)({url:"/"+s+"/sysDict/getSysDictByCodeGet/AF00208",method:"get"})},t.G=function(){return Object(i.a)({url:"/"+s+"/sysDict/getSysDictByCodeGet/AF054",method:"get"})},t.R=function(){return Object(i.a)({url:"/"+s+"/sysDict/getSysDictByCodeGet/AF053",method:"get"})},t.z=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00503")},t.K=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00207")},t.k=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00206")},t.Q=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00209")},t.S=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF062")},t.I=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF063")},t.L=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF064")},t.i=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF057")},t.l=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00210")},t.J=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF066")},t.y=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF074")},t.x=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF075")},t.t=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF076")},t.P=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF077")},t.H=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF078")},t.v=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00211")},t.w=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF06803")},t.F=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08501")},t.A=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08506")},t.h=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08502")},t.E=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08507")},t.B=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00513")},t.C=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF0880301")},t.D=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF0880302")},t.X=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08403")},t.U=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08404")},t.a=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF0880303")},t.e=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08805")},t.d=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08804")},t.c=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08808")},t.g=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF0880304")},t.W=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08810")},t._20=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF00418")},t.b=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF08802")},t._17=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF0710801")},t._18=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF05006")},t._16=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF04913")},t.Y=function(){return i.a.get("/"+s+"/sysDict/getSysDictByCodeGet/AF0710803")},t._15=function(e){return window.UPLOADPOLICYDATA?new n.a(function(e){e(window.UPLOADPOLICYDATA)}):i.a.get("/aflc-common/common/oss/v1/policy?bucket="+e).then(function(e){return window.UPLOADPOLICYDATA=e.data||"",window.UPLOADPOLICYDATA_timer=setTimeout(function(){window.UPLOADPOLICYDATA=""},6e4),window.UPLOADPOLICYDATA})},t._9=function(e){return i.a.get("/aflc-common/common/oss/v1/generatePreSignedUrl?bucket=aflcprivate&key="+e)},t._8=function(){return i.a.get("/"+o+"/sm/aflcDistrict/v1/getProvinceList")},t._5=function(e){return Object(i.a)({url:"/"+o+"/sm/aflcDistrict/v1/lists",method:"post",data:{code:e}})},t._4=function(){return i.a.get("/"+o+"/sm/aflcSysDict/v1/getCarTypeList")},t._7=function(){return i.a.get("/"+o+"/sm/aflcSysDict/v1/getServiceClassList")},t._6=function(){return Object(i.a)({url:"/"+s+"/sysDict/getSysDictByCodeGet/AF025",method:"get"})},t.Z=function(){return i.a.get("/"+s+"/common/aflcCityTree/v1/treaCode")},t._2=function(){return i.a.get("/"+s+"/common/aflcCityTree/v1/provinceCode")},t._0=function(e){return i.a.get("/aflc-sm/sm/aflcAreaPrice/v1/open/"+e)},t._1=function(e){return i.a.get("/aflc-uc/usercenter/aflcLogisticsCompany/v1/companyName?id="+e)},t._3=function(e){return Object(i.a)({url:"/"+c+"/usercenter/aflcBusinessGroup/v1/findAflcSystemUserList",method:"post",data:e})},t._19=function(e){return Object(i.a)({url:"/"+s+"/system/user/v1/operate/staff",method:"post",data:e})};var r=a("//Fk"),n=a.n(r),i=a("Vo7i"),s="aflc-common",o="aflc-sm",c="aflc-uc";window.UPLOADPOLICYDATA="",window.UPLOADPOLICYDATA_timer=""}});