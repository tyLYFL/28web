webpackJsonp([585],{"/u2e":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("lRzU"),n=s("z8gM");var r=function(e){s("sXzF")},o=s("VU/8")(i.a,n.a,r,null,null);t.default=o.exports},THXX:function(e,t,s){"use strict";t.c=function(e,t,s){return Object(i.a)({url:"/"+n+"/dispatch/aflcShipperPlatform/v1/list",method:"post",data:{currentPage:e,pageSize:t,vo:s}})},t.a=function(e){return Object(i.a)({url:"/"+n+"/dispatch/aflcShipperPlatform/v1/enableOrDisable",method:"post",headers:{"Content-Type":"application/json"},data:e})},t.b=function(e){return Object(i.a)({url:"/"+n+"/dispatch/aflcShipperPlatform/v1/add",method:"post",data:e})},t.d=function(e){return Object(i.a)({url:"/"+n+"/dispatch/aflcShipperPlatform/v1/findAflcShipperList",method:"post",data:e})},t.e=function(e){return Object(i.a)({url:"/"+n+"/dispatch/aflcShipperPlatform/v1/findAflcSystemUserList",method:"post",data:e})};var i=s("Vo7i"),n="aflc-order"},lRzU:function(e,t,s){"use strict";var i=s("fZjL"),a=s.n(i),c=s("THXX");t.a={name:"addClassfy",props:{dialogFormVisible:{type:Boolean,required:!0},formtitle:{type:String,required:!0}},components:{},data:function(){return{forms:{bindingStartDate:"",bindingEndDate:"",orgId:"",orgName:"",orgPhone:"",shipperId:"",shipperName:"",shipperPhone:""},btnShow:!1,optionsShipper:[],optionsSystem:[],optionsVisualCarType:[],checkListShpper:[],checkListSystemUsers:{},filterOptionsShipper:{search:""},information:"",filterOptionsSystemUsers:{search:""}}},computed:{startTimeStatus:function(){return this.forms.bindingStartDate},endTimeStatus:function(){return this.forms.bindingEndDate}},watch:{filterOptionsShipper:{handler:function(e,t){this.getAflcShipperList()},deep:!0},filterOptionsSystemUsers:{handler:function(e,t){this.getAflcSystemUserList()},deep:!0},startTimeStatus:function(e,t){this.ifWrong()},endTimeStatus:function(e,t){this.ifWrong()}},mounted:function(){this.init()},methods:{ifWrong:function(){this.forms.bindingStartDate&&this.forms.bindingEndDate&&this.forms.bindingStartDate>this.forms.bindingEndDate&&(this.$message({type:"warning",message:"拦截结束时间怎么能比拦截开始早呢！~"}),this.forms.bindingStartDate="",this.forms.bindingEndDate="")},close:function(){this.$emit("update:dialogFormVisible",!1)},init:function(){this.getAflcShipperList(),this.getAflcSystemUserList()},getAflcShipperList:function(){var t=this;Object(c.d)(this.filterOptionsShipper).then(function(e){t.optionsShipper=e.data,t.optionsShipper.map(function(e){e.label=e.contacts+"/"+e.mobile})}).catch(function(e){t.$message({type:"warning",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)})})},getAflcSystemUserList:function(){var t=this;Object(c.e)(this.filterOptionsSystemUsers).then(function(e){t.optionsSystem=e.data,t.optionsSystem.map(function(e){e.label=e.name+"/"+e.mobilephone})}).catch(function(e){t.$message({type:"warning",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)})})},newInfoSave:function(){var t=this;console.log(this.forms);var s=[],i=[],n=[];this.checkListShpper.forEach(function(e){s.push(e.shipperId),i.push(e.contacts),n.push(e.mobile)}),this.forms.shipperId=s.join(","),this.forms.shipperName=i.join(","),this.forms.shipperPhone=n.join(",");var e=[],r=[],o=[];return e.push(this.checkListSystemUsers.userId),r.push(this.checkListSystemUsers.name),o.push(this.checkListSystemUsers.mobilephone),this.forms.orgId=e.join(","),this.forms.orgName=r.join(","),this.forms.orgPhone=o.join(","),this.forms.bindingStartDate?this.forms.bindingEndDate?0==this.checkListShpper.length?this.$message({type:"warning",message:"请选择至少一个货主账号~"}):0==a()(this.checkListSystemUsers).length?this.$message({type:"warning",message:"请选择客服账号~"}):(this.btnShow=!0,this.forms.bindingEndDate+=86399e3,void Object(c.b)(this.forms).then(function(e){t.$message({type:"success",message:"操作成功~"}),t.$emit("renovate"),t.closeAddNewInfo()}).catch(function(e){t.$message({type:"warning",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)}),t.btnShow=!1})):this.$message({type:"warning",message:"请填写拦截结束时间~"}):this.$message({type:"warning",message:"请填写拦截开始时间~"})},closeAddNewInfo:function(){this.close(),this.clearForms(),this.btnShow=!1},clearForms:function(){this.forms={bindingStartDate:"",bindingEndDate:"",orgId:"",orgName:"",orgPhone:"",shipperId:"",shipperName:"",shipperPhone:""},this.filterOptionsShipper.search="",this.checkListShpper=[],this.filterOptionsSystemUsers.search="",this.checkListSystemUsers={}}}}},sXzF:function(e,t){},z8gM:function(e,t,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"shipperPlatform commoncss"},[s("el-dialog",{attrs:{title:t.formtitle,"close-on-click-modal":!0,visible:t.dialogFormVisible},on:{close:t.close}},[s("div",{staticClass:"bindLeft bind"},[s("div",{staticClass:"chooseBindTime"},[s("p",[s("span",[t._v("* ")]),t._v("拦截开始时间 ：")]),t._v(" "),s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:t.forms.bindingStartDate,callback:function(e){t.$set(t.forms,"bindingStartDate",e)},expression:"forms.bindingStartDate"}})],1),t._v(" "),s("div",{staticClass:"chooseShipper chooseCommon"},[s("p",[s("span",[t._v("* ")]),t._v("选择货主账号 ：")]),t._v(" "),s("div",{staticClass:"chooseItem"},[s("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},model:{value:t.filterOptionsShipper.search,callback:function(e){t.$set(t.filterOptionsShipper,"search",e)},expression:"filterOptionsShipper.search"}}),t._v(" "),s("el-checkbox-group",{model:{value:t.checkListShpper,callback:function(e){t.checkListShpper=e},expression:"checkListShpper"}},t._l(t.optionsShipper,function(e){return s("el-checkbox",{key:e.shipperId,attrs:{label:e}},[t._v(t._s(e.label))])}))],1)])]),t._v(" "),s("div",{staticClass:"bindright bind"},[s("div",{staticClass:"chooseBindTime"},[s("p",[s("span",[t._v("* ")]),t._v("拦截结束时间 ：")]),t._v(" "),s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:t.forms.bindingEndDate,callback:function(e){t.$set(t.forms,"bindingEndDate",e)},expression:"forms.bindingEndDate"}})],1),t._v(" "),s("div",{staticClass:"chooseShipper chooseCommon"},[s("p",[s("span",[t._v("* ")]),t._v("选择运营或客服人员 ：")]),t._v(" "),s("div",{staticClass:"chooseItem"},[s("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},model:{value:t.filterOptionsSystemUsers.search,callback:function(e){t.$set(t.filterOptionsSystemUsers,"search",e)},expression:"filterOptionsSystemUsers.search"}}),t._v(" "),s("el-radio-group",{model:{value:t.checkListSystemUsers,callback:function(e){t.checkListSystemUsers=e},expression:"checkListSystemUsers"}},t._l(t.optionsSystem,function(e){return s("el-radio",{key:e.userId,attrs:{label:e}},[t._v(t._s(e.label))])}))],1)])]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-success",disabled:t.btnShow},on:{click:t.newInfoSave}},[t._v("保 存")]),t._v(" "),s("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-error"},on:{click:t.closeAddNewInfo}},[t._v("取 消")])],1)])],1)])},staticRenderFns:[]};t.a=i}});