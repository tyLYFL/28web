webpackJsonp([468],{"1HTX":function(t,e){},"1onU":function(t,e,i){"use strict";var s=i("VT+v"),a=i("juIs");var n=function(t){i("ZdV2"),i("co/t")},o=i("VU/8")(s.a,a.a,n,"data-v-695be8cd",null);e.a=o.exports},IsCE:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("tZg5"),a=i("LYB+");var n=function(t){i("hzyT"),i("1HTX")},o=i("VU/8")(s.a,a.a,n,"data-v-2c927c08",null);e.default=o.exports},"LYB+":function(t,e,i){"use strict";var s={render:function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"TwoColumns clearfix"},[o("div",{staticClass:"columnsContainer"},[o("div",{staticClass:"side_right"},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm classify_searchinfo",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"题目分类"}},[o("el-select",{attrs:{size:"mini",clearable:""},model:{value:n.classification,callback:function(t){n.classification=t},expression:"classification"}},n._l(n.classificationList,function(t){return o("el-option",{key:t.id,attrs:{label:t.course,value:t.id}})}))],1),n._v(" "),o("el-form-item",{attrs:{label:"题目名称 ："}},[o("el-input",{attrs:{placeholder:"题目名称",clearable:""},model:{value:n.title,callback:function(t){n.title=t},expression:"title"}})],1),n._v(" "),o("el-form-item",{staticClass:"fr"},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",plain:""},on:{click:function(t){n.searchClick()}}},[n._v("查询")]),n._v(" "),o("el-button",{attrs:{type:"info",size:"mini",icon:"fontFamily aflc-icon-qingkong",plain:""},on:{click:function(t){n.clearClick()}}},[n._v("清空")])],1)],1),n._v(" "),o("div",{staticClass:"side_right_bottom clearfix"},[o("div",{staticClass:"btns_box clearfix"},[o("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-circle-plus"},on:{click:function(t){n.handleClick("add")}}},[n._v("新增题目")])],1),n._v(" "),o("div",{staticClass:"info_news"},[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:n.tableData,"span-method":n.objectSpanMethod,stripe:"",border:"",height:"100%","tooltip-effect":"dark"}},[o("el-table-column",{attrs:{label:"序号",width:"60"},scopedSlots:n._u([{key:"default",fn:function(t){return[n._v(n._s(t.$index+1))]}}])}),n._v(" "),o("el-table-column",{attrs:{sortable:"",label:"题目分类"},scopedSlots:n._u([{key:"default",fn:function(t){return[o("div",[n._v(n._s(t.row.course))])]}}])}),n._v(" "),o("el-table-column",{attrs:{sortable:"",label:"题目类型"},scopedSlots:n._u([{key:"default",fn:function(t){return["duo"===t.row.type?o("div",[n._v("多选题")]):o("div",[n._v("单选题")])]}}])}),n._v(" "),o("el-table-column",{attrs:{prop:"title",sortable:"",label:"题目名称"}}),n._v(" "),o("el-table-column",{attrs:{sortable:"",label:"题目可选答案"},scopedSlots:n._u([{key:"default",fn:function(t){return n._l(t.row.contentList1,function(t,e){return o("div",{key:e},[o("div",[n._v(n._s(t))])])})}}])}),n._v(" "),o("el-table-column",{attrs:{sortable:"",label:"题目答案"},scopedSlots:n._u([{key:"default",fn:function(t){return n._l(t.row.answerList1,function(t,e){return o("div",{key:e},[o("div",[n._v(n._s(t))])])})}}])}),n._v(" "),o("el-table-column",{attrs:{prop:"score",sortable:"",label:"题目分数"}}),n._v(" "),o("el-table-column",{attrs:{prop:"createTime",sortable:"",label:"题目创建时间"}}),n._v(" "),o("el-table-column",{attrs:{width:"280",sortable:"",label:"操作"},scopedSlots:n._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){n.handleClick("edit",e.row)}}},[n._v("修改题目")]),n._v(" "),o("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){n.del(e.row)}}},[n._v("删除题目")]),n._v(" "),o("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){n.handleClick("look",e.row)}}},[n._v("预览题目")])]}}])})],1)],1)])],1)]),n._v(" "),o("div",{staticClass:"info_tab_footer"},[n._v("\n    共计:"+n._s(n.dataTotal)+"\n    "),o("div",{staticClass:"show_pager"},[o("Pager",{ref:"pager",attrs:{total:n.dataTotal},on:{change:n.handlePageChange}})],1)]),n._v(" "),o("div",{staticClass:"commoncss"},[o("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"close-on-click-modal":!1,title:n.btntitle,visible:n.dialogFormVisible,width:"1000px"},on:{"update:visible":function(t){n.dialogFormVisible=t},close:n.closeClick}},[o("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{model:n.formData,"label-position":"right","label-width":"120px"}},[o("el-form-item",{attrs:{label:"选择题目分类：",prop:"classification",rules:{required:!0,message:"选择题目分类",trigger:"change"}}},[o("el-select",{staticStyle:{width:"50%"},attrs:{size:"mini",clearable:"",disabled:"预览"===n.btntitle},model:{value:n.formData.classification,callback:function(t){n.$set(n.formData,"classification",t)},expression:"formData.classification"}},n._l(n.classificationList,function(t){return o("el-option",{key:t.id,attrs:{label:t.course,value:t.id}})}))],1),n._v(" "),"新增"===n.btntitle?o("el-form-item",{attrs:{label:"选择题目类型："}},[o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){n.addOption("单选题")}}},[n._v("单选题")]),n._v(" "),o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){n.addOption("多选题")}}},[n._v("多选题")])],1):n._e(),n._v(" "),"修改"===n.btntitle?o("el-form-item",{attrs:{label:"修改题目类型："}},[o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){n.editOption("单选题")}}},[n._v("单选题")]),n._v(" "),o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){n.editOption("多选题")}}},[n._v("多选题")])],1):n._e(),n._v(" "),n._l(n.formData.questionList,function(a,i){return o("div",{key:i},[o("div",{staticClass:"subject_item",style:{background:a.showItem?"#eeeeee":"white"},on:{mouseenter:function(t){n.enter(i)},mouseleave:function(t){n.leave(i)}}},[o("div",{staticClass:"margin_b_10"},[o("span",{staticClass:"f_r"},[n._v("*")]),n._v("\n              "+n._s(i+1)+"."+n._s(a.title)+"\n              "),"duo"===a.type?o("span",{staticClass:"margin_l_10",staticStyle:{color:"#409eff"}},[n._v("[多选题]")]):n._e(),n._v(" "),""!==a.score?o("span",{staticClass:"margin_l_10"},[n._v("分数："+n._s(a.score))]):n._e(),n._v(" "),o("span",{staticClass:"margin_l_10 f_r"},[n._v(n._s(a.title1))])]),n._v(" "),"dan"===a.type?o("div",{staticClass:"flex_f margin_l_10"},n._l(a.itemList,function(t,e){return o("div",{key:e},[o("el-radio",{staticClass:"margin_b_10",attrs:{label:e,disabled:""},model:{value:a.radio,callback:function(t){n.$set(a,"radio",t)},expression:"item.radio"}},[n._v(" ")]),n._v(" "),o("span",[n._v(n._s(t.name))])],1)})):n._e(),n._v(" "),"duo"===a.type?o("div",{staticClass:"flex_f margin_l_10"},n._l(a.itemList,function(e,t){return o("div",{key:t,staticClass:"margin_b_10"},[o("el-checkbox",{attrs:{disabled:""},model:{value:e.checked,callback:function(t){n.$set(e,"checked",t)},expression:"item1.checked"}}),n._v(" "),o("span",{staticClass:"margin_l_10"},[n._v(n._s(e.name))])],1)})):n._e(),n._v(" "),o("div",{staticStyle:{height:"40px"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:a.showItem,expression:"item.showItem"}],staticClass:"flex_sb"},[o("el-popover",{attrs:{placement:"bottom",trigger:"manual"},model:{value:a.showAdd,callback:function(t){n.$set(a,"showAdd",t)},expression:"item.showAdd"}},[o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){n.insertOption("单选题",i,a)}}},[n._v("单选题")]),n._v(" "),o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){n.insertOption("多选题",i,a)}}},[n._v("多选题")]),n._v(" "),"新增"===n.btntitle?o("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(t){a.showAdd=!a.showAdd}},slot:"reference"},[n._v("在此题后插入新题")]):n._e()],1),n._v(" "),o("div",["预览"!==n.btntitle?o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit-outline",disabled:a.showEdit},on:{click:function(t){n.editClick(a,i)}}},[n._v("编辑")]):n._e(),n._v(" "),"新增"===n.btntitle?o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete",disabled:1===n.formData.questionList.length,plain:""},on:{click:function(t){n.delClick(i)}}},[n._v("删除")]):n._e(),n._v(" "),"新增"===n.btntitle?o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-arrow-up",plain:"",disabled:0===i},on:{click:function(t){n.upClick(n.formData.questionList,i,a)}}},[n._v("上移")]):n._e(),n._v(" "),"新增"===n.btntitle?o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-arrow-down",plain:"",disabled:i===n.formData.questionList.length-1},on:{click:function(t){n.downClick(n.formData.questionList,i,a)}}},[n._v("下移")]):n._e()],1)],1)])]),n._v(" "),a.showEdit?o("div",{staticClass:"subject_item",staticStyle:{background:"#eeeeee"}},[o("el-form-item",{attrs:{label:"题目标题：",prop:"questionList."+i+".title",rules:{required:!0,validator:function(t,e,i){return n.checkLength(t,e,i,"请输入最少5个字最多25个字题目名称")},trigger:"blur"}}},[o("el-input",{staticStyle:{width:"50%"},attrs:{maxlength:"25",clearable:"",placeholder:"请输入题目标题"},model:{value:a.title,callback:function(t){n.$set(a,"title",t)},expression:"item.title"}})],1),n._v(" "),o("el-form-item",{attrs:{label:"题目分数：",prop:"questionList."+i+".score",rules:{required:!0,validator:function(t,e,i){return n.checkNember(t,e,i,"请输入最少1位最多2位数字整数")},trigger:"blur"}}},[o("el-input",{staticStyle:{width:"50%"},attrs:{maxlength:"2",clearable:"",placeholder:"请输入题目分数"},model:{value:a.score,callback:function(t){n.$set(a,"score",t)},expression:"item.score"}})],1),n._v(" "),o("el-row",{staticClass:"el_row",attrs:{gutter:20}},[o("el-col",{attrs:{span:10}},[n._v("选项文字")]),n._v(" "),o("el-col",{attrs:{span:7}},[n._v("上移下移")]),n._v(" "),o("el-col",{attrs:{span:7}},[n._v("确认题目答案")])],1),n._v(" "),n._l(a.itemList,function(e,s){return o("el-row",{key:s,staticClass:"el_row",attrs:{gutter:24}},[o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{label:"",prop:"questionList."+i+".itemList."+s+".name","label-width":"0px",rules:{required:!0,validator:function(t,e,i){return n.checkLength2(t,e,i,"请输入最少2个字最多25个字答案名称",a.itemList,s)},trigger:"blur"}}},[o("div",{staticClass:"flex_a"},[o("el-input",{attrs:{maxlength:"25",clearable:"",placeholder:"请输入选项"},model:{value:e.name,callback:function(t){n.$set(e,"name",t)},expression:"item1.name"}}),n._v(" "),o("el-button",{staticClass:"margin_l_10",attrs:{type:"primary",size:"mini",icon:"el-icon-plus",plain:""},on:{click:function(t){n.addItem(a.itemList)}}}),n._v(" "),o("el-button",{staticClass:"margin_l_10",attrs:{type:"primary",size:"mini",icon:"el-icon-minus",plain:"",disabled:1===a.itemList.length||2===a.itemList.length},on:{click:function(t){n.removeItem(a,s)}}})],1)])],1),n._v(" "),o("el-col",{attrs:{span:7}},[o("div",{staticClass:"flex_a h"},[o("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-arrow-up",plain:"",disabled:0===s},on:{click:function(t){n.upItem(a,s,a.itemList[s])}}},[n._v("上移")]),n._v(" "),o("el-button",{staticClass:"margin_l_10",attrs:{type:"primary",size:"mini",icon:"el-icon-arrow-down",plain:"",disabled:s===a.itemList.length-1},on:{click:function(t){n.downItem(a,s,a.itemList[s])}}},[n._v("下移")])],1)]),n._v(" "),"dan"===a.type?o("el-col",{attrs:{span:7}},[o("div",{staticClass:"flex_a h"},[o("el-radio",{attrs:{label:s},model:{value:a.radio,callback:function(t){n.$set(a,"radio",t)},expression:"item.radio"}},[n._v(" ")])],1)]):o("el-col",{attrs:{span:7}},[o("div",{staticClass:"flex_a h"},[o("el-form-item",{staticClass:"my-form-item",attrs:{label:"",prop:"questionList."+i+".itemList."+s+".checked","label-width":"0px",rules:{required:!0,validator:function(t,e,i){return n.checkCheckBox(t,e,i,"多选题最少选择2个答案",a.itemList)},trigger:"blur"},"inline-message":!0}},[o("el-checkbox",{attrs:{label:s},model:{value:e.checked,callback:function(t){n.$set(e,"checked",t)},expression:"item1.checked"}},[n._v(" ")])],1)],1)])],1)}),n._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"warning",icon:"el-icon-success"},on:{click:function(t){n.finishEditing(a,i)}}},[n._v("完成编辑")])],1)],2):n._e()])})],2),n._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["预览"!==n.btntitle?o("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-success"},on:{click:function(t){n.submit()}}},[n._v("保存")]):n._e(),n._v(" "),o("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-error"},on:{click:n.close}},[n._v("关闭")])],1)],1)],1)])},staticRenderFns:[]};e.a=s},"VT+v":function(t,e,i){"use strict";e.a={props:{sizes:{type:Array,default:function(){return[20,50,100,400]}},total:{type:Number,default:0},pageLog:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.total/this.size)}},watch:{pageNum:function(){this.inputval=this.pageNum},size:function(){1==this.pageLog&&(this.pageNum=1)}},mounted:function(){this.size=this.sizes[0],this.pageNum=this.pageLog},data:function(){return{pageNum:1,oldValue:0,inputval:1,oldNum:1,size:100}},methods:{handleFocus:function(t){this.oldValue=t.target.value},sizesChange:function(){this.pageNum=1,this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size})},changeEvent:function(){this.oldNum!==this.pageNum&&(this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size}))},handleCurrentChange:function(t){this.pageNum=t,this.changeEvent()},handleSizeChange:function(t){this.size=t,this.changeEvent()},handleChange:function(t){var e=parseInt(t,10);isNaN(e)?this.inputval=1:e<1?this.inputval=1:e>this.pages?this.inputval=this.pages:this.inputval=e},handleBlur:function(t){var e=t.target;this.handleChange(e.value),this.jumpTo(this.inputval)},handleKeyup:function(t){var e=t.keyCode,i=t.target;console.log("page keydown:",e,i),13===e&&this.oldValue&&i.value!==this.oldValue&&(this.handleChange(i.value),this.oldValue="")},jumpTo:function(t){console.log("d",this.inputval),t<1?this.pageNum=1:t>this.pages?this.pageNum=this.pages:this.pageNum=t,this.changeEvent()}}}},ZdV2:function(t,e){},"co/t":function(t,e){},hzyT:function(t,e){},juIs:function(t,e,i){"use strict";var s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tms-pagenation"},[i("span",{staticClass:"page-num",class:{disabled:e.pageNum<=1},on:{click:function(t){e.jumpTo(1)}}},[i("span",{staticClass:"first-page"})]),i("span",{staticClass:"page-num",class:{disabled:e.pageNum<=1},on:{click:function(t){e.jumpTo(e.pageNum-1)}}},[i("span",{staticClass:"prev-page"})]),e._v(" "),i("span",{staticClass:"page-jumper"},[e._v("\n    第\n    "),i("el-input",{ref:"input",staticClass:"el-pagination__editor is-in-pagination",attrs:{min:1,max:e.pages,type:"number",disabled:e.pages<=1},on:{change:e.handleChange,focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keydown:function(t){return e.handleKeyup(t)}},model:{value:e.inputval,callback:function(t){e.inputval="string"==typeof t?t.trim():t},expression:"inputval"}}),e._v(" 页\n  ")],1),e._v("\n  /共 "+e._s(e.pages)+" 页\n  "),i("span",{staticClass:"page-num",class:{disabled:e.pageNum===e.pages},on:{click:function(t){e.jumpTo(e.pageNum+1)}}},[i("span",{staticClass:"next-page"})]),e._v(" "),i("span",{staticClass:"page-num",class:{disabled:e.pageNum===e.pages},on:{click:function(t){e.jumpTo(e.pages)}}},[i("span",{staticClass:"last-page"})]),e._v(" "),i("span",{staticClass:"tms-pagination__sizes"},[i("el-select",{staticClass:"page-select",attrs:{placeholder:"请选择"},on:{change:e.sizesChange},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}},e._l(e.sizes,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}))],1)])},staticRenderFns:[]};e.a=s},tZg5:function(t,e,i){"use strict";var s=i("mvHQ"),n=i.n(s),a=i("fZjL"),o=i.n(a),l=i("Vo7i"),c=i("1onU");e.a={data:function(){return{loading:!1,dialogFormVisible:!1,btntitle:"",do:"",activeName:"single",page:1,pagesize:20,dataTotal:0,classificationList:[],classification:null,courseid:"",title:"",tableData:[],formData:{classification:null,courseid:"",questionList:[{title:"标题",contentList:[],answerList:[],itemList:[{name:"选项",checked:!0},{name:"选项",checked:!0}],radio:0,type:"dan",score:"",showItem:!1,showAdd:!1,showEdit:!0}]},props:{label:"name",value:"code",children:"children"},Arr:[],Pos:0}},components:{Pager:c.a},created:function(){this.getClassificationList(),this.getList()},mounted:function(){},methods:{getClassificationList:function(){var e=this;Object(l.a)({url:"/"+this.$cms+"/usercenter/aflcsalesmanlearningcase/v1/list",method:"post",data:{pageNum:1,pageSize:500}}).then(function(t){200===t.status&&(e.classificationList=t.data.list)}).catch(function(t){e.$message({type:"info",message:"操作失败，原因："+(t.errorInfo?t.errorInfo:t.text)}),e.loading=!1})},submit:function(){var s=this;this.$refs.formData.validate(function(t){if(!t)return!1;if(s.formData.questionList.forEach(function(i){var s=[],a=[];i.itemList.forEach(function(t,e){s.push(t.name),"duo"===i.type&&t.checked&&a.push(e)}),i.contentList=s,i.answerList=a,"dan"===i.type&&(i.answerList=[i.radio])}),"新增"===s.btntitle){var e={caseId:s.formData.classification,questionList:s.formData.questionList};Object(l.a)({url:"/"+s.$cms+"/usercenter/aflcsalesmanlearningquestion/v1/batchAdd",method:"post",data:e}).then(function(t){200===t.status?(s.$message.success("新增成功"),s.getList(),s.dialogFormVisible=!1,s.getErr()):100===t.status?console.log(t.data):s.$message.warning(t.text)}).catch(function(t){100===t.status&&null!==t.data?s.getErr(t.data):(s.getErr(),s.$message.warning(t.text))})}else{var i={id:s.formData.id,caseId:s.formData.classification,type:s.formData.type,title:s.formData.questionList[0].title,contentList:s.formData.questionList[0].contentList,answerList:s.formData.questionList[0].answerList,score:s.formData.questionList[0].score};Object(l.a)({url:"/"+s.$cms+"/usercenter/aflcsalesmanlearningquestion/v1/update",method:"post",data:i}).then(function(t){200===t.status?(s.$message.success("修改成功"),s.getList(),s.dialogFormVisible=!1):s.$message.warning(t.text)}).catch(function(t){s.$message.warning(t.text)})}})},getErr:function(){var i=this,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.formData.questionList.forEach(function(t,e){o()(s).find(function(t){return 1*t===e})?i.$set(t,"title1",s[e]):i.$set(t,"title1","")})},handleChange:function(t){this.courseid=t[1]},handleChange2:function(t){this.formData.courseid=t[1]},finishEditing:function(t,i){var s=this,e=void 0,a=void 0,n=void 0,o=void 0,l=[];this.$refs.formData.validateField("questionList."+i+".title",function(t){e=!t}),this.$refs.formData.validateField("questionList."+i+".score",function(t){a=!t}),t.itemList.forEach(function(t,e){s.$refs.formData.validateField("questionList."+i+".itemList."+e+".name",function(t){l.push(!t)})}),"dan"===t.type?e&&a&&!n&&(t.showEdit=!1):(t.itemList.forEach(function(t,e){s.$refs.formData.validateField("questionList."+i+".itemList."+e+".checked",function(t){o=!t})}),n=l.some(function(t){return!1===t}),e&&a&&!n&&o&&(t.showEdit=!1))},insertOption:function(t,e,i){i.showAdd=!i.showAdd,"单选题"===t?this.formData.questionList.splice(e+1,0,{title:"标题",contentList:[],answerList:[],itemList:[{name:"选项",checked:!0},{name:"选项",checked:!0}],radio:0,type:"dan",score:"",showItem:!1,showAdd:!1,showEdit:!0}):this.formData.questionList.splice(e+1,0,{title:"标题",contentList:[],answerList:[],itemList:[{name:"选项",checked:!0},{name:"选项",checked:!0}],radio:0,type:"duo",score:"",showItem:!1,showAdd:!1,showEdit:!0})},addOption:function(t){"单选题"===t?this.formData.questionList.push({title:"标题",contentList:[],answerList:[],itemList:[{name:"选项",checked:!0},{name:"选项",checked:!0}],radio:0,type:"dan",score:"",showItem:!1,showAdd:!1,showEdit:!0}):this.formData.questionList.push({title:"标题",contentList:[],answerList:[],itemList:[{name:"选项",checked:!0},{name:"选项",checked:!0}],radio:0,type:"duo",score:"",showItem:!1,showAdd:!1,showEdit:!0})},editOption:function(t){"单选题"===t?(this.formData.type="dan",this.formData.questionList[0].type="dan"):(this.formData.type="duo",this.formData.questionList[0].type="duo")},searchClick:function(){this.page=1;var t={courseid:this.courseid,title:this.title};this.getList(t)},clearClick:function(){this.page=1,this.title="",this.classification=null,this.courseid="",this.getList()},close:function(){this.dialogFormVisible=!1},handlePageChange:function(t){this.page=t.pageNum,this.pagesize=t.pageSize,this.getList()},handleClick:function(t,e){"add"===t&&(this.btntitle="新增"),"edit"===t&&(this.btntitle="修改",this.editLook(e)),"look"===t&&(this.btntitle="预览",this.editLook(e)),this.dialogFormVisible=!0},editLook:function(s){var a=[],t=void 0;"dan"===s.type?(s.contentList.forEach(function(t){a.push({name:t,checked:!0})}),s.itemList=a,s.radio=1*s.answerList.join(",")):(s.contentList.forEach(function(t,e){var i=s.answerList.some(function(t){return e===t});a.push({name:t,checked:i}),s.itemList=a}),s.radio=0),"修改"===this.btntitle&&(t=!0),"预览"===this.btntitle&&(t=!1),s.questionList=[{title:s.title,contentList:s.contentList,answerList:s.answerList,itemList:s.itemList,radio:s.radio,type:s.type,score:s.score,showItem:!1,showAdd:!1,showEdit:t}],this.formData=JSON.parse(n()(s)),this.formData.classification=s.caseId},getList:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.loading=!0;var n=["A.","B.","C.","D.","E.","F.","G."];t={caseId:this.classification,title:this.title},Object(l.a)({url:"/"+this.$cms+"/usercenter/aflcsalesmanlearningquestion/v1/list?pageNum="+this.page+"&pageSize="+this.pagesize,method:"post",data:t}).then(function(t){200===t.status&&(t.data.list.forEach(function(t){var s=[],a=[];t.contentList.forEach(function(e,i){s.push(n[i]+e),t.answerList.forEach(function(t){i===t&&a.push(n[i]+e)})}),t.contentList1=s,t.answerList1=a}),e.tableData=t.data.list,e.dataTotal=t.data.total,e.loading=!1,e.merage())}).catch(function(t){e.$message({type:"info",message:"操作失败，原因："+(t.errorInfo?t.errorInfo:t.text)}),e.loading=!1})},del:function(t){var e=this;this.$confirm("此操作将删除选择的数据, 是否确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.loading=!0,Object(l.a)({url:"/"+e.$cms+"/usercenter/aflcsalesmanlearningquestion/v1/delete/"+t.id,method:"get",data:{}}).then(function(t){200===t.status&&(e.$message.success("删除成功"),e.getList(),e.loading=!1)}).catch(function(t){e.$message({type:"info",message:"操作失败，原因："+(t.errorInfo?t.errorInfo:t.text)}),e.loading=!1})}).catch(function(){})},closeClick:function(){this.formData={classification:null,courseid:"",questionList:[{title:"标题",contentList:[],answerList:[],itemList:[{name:"选项",checked:!0},{name:"选项",checked:!0}],radio:0,type:"dan",score:"",showItem:!1,showAdd:!1,showEdit:!0}]},this.$refs.formData.resetFields()},checkLength:function(t,e,i,s){""===e?i(new Error(s)):e.length<5||25<e.length?i(new Error(s)):i()},checkLength2:function(t,e,i,s,a,n){""===e?i(new Error(s)):e.length<2||25<e.length?i(new Error(s)):i()},upItem:function(i,t,e){var s=i.itemList[i.radio].name;0!==t&&(i.itemList.splice(t,1),i.itemList.splice(t-1,0,e)),this.$nextTick(function(){i.itemList.forEach(function(t,e){t.name===s&&(i.radio=e)})})},downItem:function(i,t,e){var s=i.itemList[i.radio].name;t!==i.length-1&&(i.itemList.splice(t,1),i.itemList.splice(t+1,0,e)),this.$nextTick(function(){i.itemList.forEach(function(t,e){t.name===s&&(i.radio=e)})})},addItem:function(t){t.length<7&&t.push({name:"选项",checked:!1})},removeItem:function(t,e){"dan"===t.type?(t.itemList.splice(e,1),t.radio===e&&(t.radio=0)):t.itemList.splice(e,1)},editClick:function(t){t.showEdit=!t.showEdit},delClick:function(t){var e=this;this.$confirm("此操作将删除此项的数据, 是否确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.formData.questionList.splice(t,1)}).catch(function(){})},upClick:function(t,e,i){0!==e&&(t.splice(e,1),t.splice(e-1,0,i))},downClick:function(t,e,i){e!==t.length-1&&(t.splice(e,1),t.splice(e+1,0,i))},checkNember:function(t,e,i,s){""===e?i(new Error(s)):/^[1-9][0-9]*$/g.test(e)?i():i(new Error(s))},checkCheckBox:function(t,e,i,s,a){var n=0;a.forEach(function(t){!0===t.checked&&n++}),n<2?i(new Error(s)):i()},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex;if(1===t.columnIndex){var i=this.Arr[e];return{rowspan:i,colspan:0<i?1:0}}},merage:function(){this.merageInit();for(var t=0;t<this.tableData.length;t++)0===t?(this.Arr.push(1),this.Pos=0):""+this.tableData[t].course==""+this.tableData[t-1].course?(this.Arr[this.Pos]+=1,this.Arr.push(0)):(this.Arr.push(1),this.Pos=t)},merageInit:function(){this.Arr=[],this.Pos=0},enter:function(t){this.formData.questionList[t].showItem=!0},leave:function(t){this.formData.questionList[t].showItem=!1}}}}});