webpackJsonp([359,593],{"+Nhv":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("IMVr"),a=i("Pyc8");var s=function(e){i("CoFd")},o=i("VU/8")(n.a,a.a,s,null,null);t.default=o.exports},"1onU":function(e,t,i){"use strict";var n=i("VT+v"),a=i("juIs");var s=function(e){i("ZdV2"),i("co/t")},o=i("VU/8")(n.a,a.a,s,"data-v-695be8cd",null);t.a=o.exports},"6DPB":function(e,t,i){"use strict";t.b=function(e,t,i){return Object(n.a)({url:"/"+a+"/usercenter/aflcrecommendposition/v1/",method:"post",data:{currentPage:e,pageSize:t,vo:i}})},t.a=function(e){return Object(n.a)({url:"/"+a+"/usercenter/aflcrecommendposition/v1/"+e,method:"get"})},t.c=function(e,t){return Object(n.a)({url:"/"+a+"/usercenter/aflcrecommendposition/v1/"+e,method:"put",data:t})};var n=i("Vo7i"),a="aflc-uc"},"9IhN":function(e,t){},CoFd:function(e,t){},IMVr:function(e,t,i){"use strict";var n=i("6DPB"),a=i("1onU"),s=i("n/Be");t.a={components:{Pager:a.a,RecSetting:s.default},data:function(){return{recommendColumnFn:[{value:"首页",label:"首页"},{value:"物流专线栏目",label:"物流专线栏目"},{value:"专线详情页",label:"专线详情页"},{value:"",label:"全部"}],isVisibleDialog:!1,loading:!0,searchQuery:{recommendColumn:""},selected:[],dataset:[],selectedInfo:{},sizes:[20,50,100,400],pagesize:20,page:1,totalCount:null,dataTotal:0}},mounted:function(){this.fetchInfo()},methods:{fetchList:function(){var t=this;this.loading=!0,Object(n.b)(this.page,this.pagesize,this.searchQuery).then(function(e){t.dataset=e.data.list,t.dataTotal=e.data.total,t.loading=!1}).catch(function(e){t.$message.warning(e.text?e.text:e.errorInfo),t.loading=!0})},fetchInfo:function(){this.fetchList()},handleDeatail:function(){},handleSearch:function(e){if(!this.selected.length&&"searchForm"!==e&&"clearForm1"!==e)return this.$message.info("请选择要操作的项~"),!1;switch(e){case"searchForm":this.fetchInfo();break;case"clearForm1":this.searchQuery.recommendColumn="",this.fetchList();break;case"set":if(1<this.selected.length)return this.$message.info("每次只能操作单条数据~"),this.$refs.multipleTable.clearSelection(),!1;this.isVisibleDialog=!0,this.selectedInfo=this.selected[0]}this.$refs.multipleTable.clearSelection()},getSelection:function(e){this.selected=e},clickDetails:function(e,t,i){this.$refs.multipleTable.toggleRowSelection(e)},handlePageChange:function(e){this.page=e.pageNum,this.pagesize=e.pageSize},closeVisibleDialog:function(){this.isVisibleDialog=!1}}}},Pyc8:function(e,t,i){"use strict";var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"identicalStyle Marketing",staticStyle:{height:"100%"}},[i("el-form",{staticClass:"demo-ruleForm classify_searchinfo",attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"推荐栏目"}},[i("el-select",{model:{value:t.searchQuery.recommendColumn,callback:function(e){t.$set(t.searchQuery,"recommendColumn",e)},expression:"searchQuery.recommendColumn"}},t._l(t.recommendColumnFn,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),t._v(" "),i("el-form-item",{staticClass:"btnChoose fr"},[i("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-search"},on:{click:function(e){t.handleSearch("searchForm")}}},[t._v("搜索\n      ")]),t._v(" "),i("el-button",{attrs:{type:"info",size:"mini",plain:"",icon:"fontFamily aflc-icon-qingkong"},on:{click:function(e){t.handleSearch("clearForm1")}}},[t._v("清空\n      ")])],1)],1),t._v(" "),i("div",{staticClass:"classify_info"},[i("div",{staticClass:"btns_box"},[i("el-button",{attrs:{type:"info",plain:"",icon:"",size:"small"},on:{click:function(e){t.handleSearch("set")}}},[i("span",[t._v("设置")])])],1),t._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",border:"",height:"100%","highlight-current-row":"",data:t.dataset,"tooltip-effect":"dark"},on:{"selection-change":t.getSelection,"row-click":t.clickDetails}},[i("el-table-column",{attrs:{fixed:"",sortable:"",type:"selection",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"",label:"序号",sortable:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s((t.page-1)*t.pagesize+e.$index+1)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"recommendColumn",label:"推荐栏目",width:""}}),t._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"recommendPosition",label:"推荐位置",width:""}}),t._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"",label:"推荐条数限制",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1===e.row.recommendLimitType?e.row.recommendLimit:"无限制")+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"updateTime",label:"更新时间",width:""}})],1)],1),t._v(" "),i("RecSetting",{attrs:{isVisibleDialog:t.isVisibleDialog,info:t.selectedInfo},on:{"update:isVisibleDialog":function(e){t.isVisibleDialog=e},success:t.fetchInfo,close:t.closeVisibleDialog}}),t._v(" "),i("div",{staticClass:"info_tab_footer"},[t._v("共计:"+t._s(t.dataTotal)+"\n    "),i("div",{staticClass:"show_pager"},[i("Pager",{attrs:{total:t.dataTotal,sizes:t.sizes},on:{change:t.handlePageChange}})],1)])],1)},staticRenderFns:[]};t.a=n},"VT+v":function(e,t,i){"use strict";t.a={props:{sizes:{type:Array,default:function(){return[20,50,100,400]}},total:{type:Number,default:0},pageLog:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.total/this.size)}},watch:{pageNum:function(){this.inputval=this.pageNum},size:function(){1==this.pageLog&&(this.pageNum=1)}},mounted:function(){this.size=this.sizes[0],this.pageNum=this.pageLog},data:function(){return{pageNum:1,oldValue:0,inputval:1,oldNum:1,size:100}},methods:{handleFocus:function(e){this.oldValue=e.target.value},sizesChange:function(){this.pageNum=1,this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size})},changeEvent:function(){this.oldNum!==this.pageNum&&(this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size}))},handleCurrentChange:function(e){this.pageNum=e,this.changeEvent()},handleSizeChange:function(e){this.size=e,this.changeEvent()},handleChange:function(e){var t=parseInt(e,10);isNaN(t)?this.inputval=1:t<1?this.inputval=1:t>this.pages?this.inputval=this.pages:this.inputval=t},handleBlur:function(e){var t=e.target;this.handleChange(t.value),this.jumpTo(this.inputval)},handleKeyup:function(e){var t=e.keyCode,i=e.target;console.log("page keydown:",t,i),13===t&&this.oldValue&&i.value!==this.oldValue&&(this.handleChange(i.value),this.oldValue="")},jumpTo:function(e){console.log("d",this.inputval),e<1?this.pageNum=1:e>this.pages?this.pageNum=this.pages:this.pageNum=e,this.changeEvent()}}}},ZdV2:function(e,t){},"co/t":function(e,t){},hRAW:function(e,t,i){"use strict";var n=i("6DPB"),a=i("0xDb");t.a={name:"rec-setting",props:{isVisibleDialog:{type:Boolean,default:!1},info:{type:[Array,Object],default:function(){}}},watch:{isVisibleDialog:{handler:function(e){this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.fetchInfo(this.info.id)}},info:{handler:function(e){},immediate:!0}},data:function(){return{loading:!1,form:{recommendColumn:"",recommendPosition:"",recommendLimitType:"",recommendLimit:"",recommendRemarks:""},checked:!0,newrules:{},getRecDetialId:""}},mounted:function(){},methods:{fetchInfo:function(e){var t=this;return this.loading=!0,Object(n.a)(e).then(function(e){t.comWatch(e.data),1===e.data.recommendLimitType?t.checked=!0:t.checked=!1,t.loading=!1}).catch(function(e){t.$message.warning(e.text?e.text:e.errorInfo),t.loading=!1})},comWatch:function(e){this.form={recommendColumn:e.recommendColumn,recommendPosition:e.recommendPosition,recommendLimitType:e.recommendLimitType,recommendLimit:e.recommendLimit,recommendRemarks:e.recommendRemarks}},submitForm:function(){var i=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;if((i.loading=!0)===i.checked)i.form.recommendLimitType=1,i.senFetch();else{var t=void(i.form.recommendLimitType=0);(t=Object(a.i)(i.form)).recommendLimit="",console.log(t,"data"),Object(n.c)(i.info.id,t).then(function(e){i.$emit("success"),i.$message.success("保存成功"),i.close()})}})},senFetch:function(){var t=this;if(""===this.form.recommendLimit||null===this.form.recommendLimit)return this.$message.info("请输入推荐限制数"),this.loading=!1;var e;e=Object(a.i)(this.form),Object(n.c)(this.info.id,e).then(function(e){t.$emit("success"),t.$message.success("保存成功"),t.close()}).catch(function(e){t.$message.warning(e.text?e.text:e.errorInfo),t.loading=!1})},reset:function(){this.$refs.ruleForm.resetFields()},close:function(e){this.reset(),this.$emit("update:isVisibleDialog",!1),this.$emit("close"),"function"==typeof e&&e()}}}},juIs:function(e,t,i){"use strict";var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tms-pagenation"},[i("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(1)}}},[i("span",{staticClass:"first-page"})]),i("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(t.pageNum-1)}}},[i("span",{staticClass:"prev-page"})]),t._v(" "),i("span",{staticClass:"page-jumper"},[t._v("\n    第\n    "),i("el-input",{ref:"input",staticClass:"el-pagination__editor is-in-pagination",attrs:{min:1,max:t.pages,type:"number",disabled:t.pages<=1},on:{change:t.handleChange,focus:t.handleFocus,blur:t.handleBlur},nativeOn:{keydown:function(e){return t.handleKeyup(e)}},model:{value:t.inputval,callback:function(e){t.inputval="string"==typeof e?e.trim():e},expression:"inputval"}}),t._v(" 页\n  ")],1),t._v("\n  /共 "+t._s(t.pages)+" 页\n  "),i("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pageNum+1)}}},[i("span",{staticClass:"next-page"})]),t._v(" "),i("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pages)}}},[i("span",{staticClass:"last-page"})]),t._v(" "),i("span",{staticClass:"tms-pagination__sizes"},[i("el-select",{staticClass:"page-select",attrs:{placeholder:"请选择"},on:{change:t.sizesChange},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}},t._l(t.sizes,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})}))],1)])},staticRenderFns:[]};t.a=n},"n/Be":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("hRAW"),a=i("rs2i");var s=function(e){i("9IhN")},o=i("VU/8")(n.a,a.a,s,null,null);t.default=o.exports},rs2i:function(e,t,i){"use strict";var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"commoncss lll-recsetting"},[i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"推荐位设置","close-on-click-modal":!1,visible:t.isVisibleDialog,width:"40%"},on:{close:t.close}},[i("el-form",{ref:"ruleForm",staticClass:"clearfix",attrs:{model:t.form,rules:t.newrules,"label-width":"100px"}},[i("div",{staticClass:"message-left clearfix"},[i("el-form-item",{attrs:{label:"推荐栏目:",prop:"recommendColumn"}},[i("el-input",{attrs:{clearable:"",maxlength:25,disabled:""},model:{value:t.form.recommendColumn,callback:function(e){t.$set(t.form,"recommendColumn",e)},expression:"form.recommendColumn"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"推荐位置:",prop:"recommendPosition"}},[i("el-input",{attrs:{clearable:"",maxlength:25,disabled:""},model:{value:t.form.recommendPosition,callback:function(e){t.$set(t.form,"recommendPosition",e)},expression:"form.recommendPosition"}})],1)],1),t._v(" "),i("div",{staticClass:"message-bottom clearfix"},[i("el-form-item",{attrs:{label:" 自定义属性:",prop:"limitStr"}},[i("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("推荐条数限制")]),t._v(" "),!0===t.checked?i("p",{staticStyle:{color:"red","font-size":"12px","line-height":"20px"}},[t._v("\n            超过"+t._s(null===t.form.recommendLimit||""===t.form.recommendLimit?"0":t.form.recommendLimit)+"则不展示更多推荐（必填）")]):t._e(),t._v(" "),!0===t.checked?i("el-input",{directives:[{name:"number-only",rawName:"v-number-only"}],attrs:{placeholder:"请输入推荐条数",maxlength:5},model:{value:t.form.recommendLimit,callback:function(e){t.$set(t.form,"recommendLimit",e)},expression:"form.recommendLimit"}},[i("template",{slot:"prepend"},[t._v("超出")]),t._v(" "),i("template",{slot:"append"},[t._v("条，超出的推荐则不生效")])],2):t._e()],1),t._v(" "),i("el-form-item",{attrs:{label:"备注:"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注信息",maxlength:100},model:{value:t.form.recommendRemarks,callback:function(e){t.$set(t.form,"recommendRemarks",e)},expression:"form.recommendRemarks"}})],1)],1)]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("确定")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.close}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};t.a=n}});