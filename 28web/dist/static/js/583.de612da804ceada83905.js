webpackJsonp([583],{"3iPd":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("jz39"),r=i("7ihJ");var n=function(e){i("yUXK")},a=i("VU/8")(s.a,r.a,n,null,null);t.default=a.exports},"7ihJ":function(e,t,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"shipperOfdispatch commoncss"},[i("el-dialog",{attrs:{title:t.formtitle,"close-on-click-modal":!0,visible:t.dialogFormVisible},on:{close:t.close}},[i("div",{staticClass:"bindLeft  bind"},[i("div",{staticClass:"chooseBindTime"},[i("p",[i("span",[t._v("* ")]),t._v("绑定开始时间 ：")]),t._v(" "),i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp"},model:{value:t.forms.bindingStartDate,callback:function(e){t.$set(t.forms,"bindingStartDate",e)},expression:"forms.bindingStartDate"}})],1),t._v(" "),i("div",{staticClass:"chooseShipper chooseCommon"},[i("p",[i("span",[t._v("* ")]),t._v("选择货主账号 ：")]),t._v(" "),i("div",{staticClass:"chooseItem"},[i("el-input",{ref:"filterOptionsShipper",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:t.filterOptionsShipper.search,callback:function(e){t.$set(t.filterOptionsShipper,"search",e)},expression:"filterOptionsShipper.search"}}),t._v(" "),i("el-checkbox-group",{model:{value:t.checkListShpper,callback:function(e){t.checkListShpper=e},expression:"checkListShpper"}},t._l(t.optionsShipper,function(e){return i("el-checkbox",{key:e.shipperId,attrs:{label:e}},[t._v(t._s(e.label))])}))],1)])]),t._v(" "),i("div",{staticClass:"bindright  bind"},[i("div",{staticClass:"chooseBindTime"},[i("p",[i("span",[t._v("* ")]),t._v("绑定结束时间 ：")]),t._v(" "),i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","default-time":"23:59:59","value-format":"timestamp"},model:{value:t.forms.bindingEndDate,callback:function(e){t.$set(t.forms,"bindingEndDate",e)},expression:"forms.bindingEndDate"}})],1),t._v(" "),i("div",{staticClass:"chooseShipper chooseCommon"},[i("p",[i("span",[t._v("* ")]),t._v("选择车主账号 ：")]),t._v(" "),i("div",{staticClass:"chooseItem"},[i("el-input",{ref:"filterOptionsCar",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:t.filterOptionsCar.search,callback:function(e){t.$set(t.filterOptionsCar,"search",e)},expression:"filterOptionsCar.search"}}),t._v(" "),i("el-radio-group",{model:{value:t.checkListCar,callback:function(e){t.checkListCar=e},expression:"checkListCar"}},t._l(t.optionsCar,function(e){return i("el-radio",{key:e.driverId,attrs:{label:e}},[t._v(t._s(e.label))])}))],1)])]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-success",disabled:t.btnShow},on:{click:t.newInfoSave}},[t._v("保 存")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-error"},on:{click:t.closeAddNewInfo}},[t._v("取 消")])],1)])],1)])},staticRenderFns:[]};t.a=s},CuzH:function(e,t,i){"use strict";t.e=function(e,t,i){return Object(s.a)({url:"/"+r+"/dispatch/aflcDriverShipper/v1/list",method:"post",data:{currentPage:e,pageSize:t,vo:i}})},t.c=function(e){return Object(s.a)({url:"/"+r+"/dispatch/aflcDriverShipper/v1/enableOrDisable",method:"post",headers:{"Content-Type":"application/json"},data:e})},t.d=function(e){return Object(s.a)({url:"/"+r+"/dispatch/aflcDriverShipper/v1/add",method:"post",data:e})},t.b=function(e){return Object(s.a)({url:"/"+r+"/dispatch/aflcDriverShipper/v1/update",method:"put",data:e})},t.a=function(e){return Object(s.a)({url:"/"+r+"/dispatch/aflcShipperPlatform/v1/update",method:"put",data:e})},t.f=function(e){return Object(s.a)({url:"/"+r+"/dispatch/aflcDriverShipper/v1/findAflcDriverList",method:"post",data:e})},t.g=function(e){return Object(s.a)({url:"/"+r+"/dispatch/aflcDriverShipper/v1/findAflcShipperList",method:"post",data:e})};var s=i("Vo7i"),r="aflc-order"},jz39:function(e,t,i){"use strict";var s=i("fZjL"),o=i.n(s),c=i("CuzH");t.a={name:"addClassfy",props:{dialogFormVisible:{type:Boolean,required:!0},formtitle:{type:String,required:!0}},components:{},data:function(){return{forms:{bindingStartDate:"",bindingEndDate:"",driverId:"",driverName:"",driverPhone:"",shipperId:"",shipperName:"",shipperPhone:""},searchInfo:"暂无此内容查看",optionsShipper:[],optionsCar:[],optionsVisualCarType:[],checkListShpper:[],checkListCar:{},filterOptionsShipper:{search:""},information:"",filterOptionsCar:{search:""},btnShow:!1}},computed:{startTimeStatus:function(){return this.forms.bindingStartDate},endTimeStatus:function(){return this.forms.bindingEndDate}},watch:{filterOptionsShipper:{handler:function(e,t){this.getAflcShipperList()},deep:!0},filterOptionsCar:{handler:function(e,t){this.getAflcDriverList()},deep:!0},startTimeStatus:function(e,t){this.ifWrong()},endTimeStatus:function(e,t){this.ifWrong()}},mounted:function(){this.init()},methods:{ifWrong:function(){this.forms.bindingStartDate&&this.forms.bindingEndDate&&this.forms.bindingStartDate>this.forms.bindingEndDate&&this.$message({type:"warning",message:"绑定结束时间怎么能比绑定开始早呢！~"})},close:function(){this.$emit("update:dialogFormVisible",!1)},init:function(){this.getAflcDriverList(),this.getAflcShipperList()},getAflcDriverList:function(){var t=this;Object(c.f)(this.filterOptionsCar).then(function(e){t.optionsCar=e.data,0==e.data.length?(t.$message({type:"warning",message:"操作错误："+t.searchInfo}),t.filterOptionsCar.search="",t.$refs.filterOptionsCar.focus()):t.optionsCar.map(function(e){e.label=(e.driverName?e.driverName:e.driverMobile)+"/"+e.driverMobile})})},getAflcShipperList:function(){var t=this;Object(c.g)(this.filterOptionsShipper).then(function(e){t.optionsShipper=e.data,0==e.data.length?(t.$message({type:"warning",message:"操作错误："+t.searchInfo}),t.filterOptionsShipper.search="",t.$refs.filterOptionsShipper.focus()):t.optionsShipper.map(function(e){e.label=(e.contacts?e.contacts:e.mobile)+"/"+e.mobile})}).catch(function(e){t.$message({type:"warning",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)})})},newInfoSave:function(){var t=this;console.log(this.checkListCar);var i=[],s=[],r=[];this.checkListShpper.forEach(function(e){i.push(e.shipperId),s.push(e.contacts?e.contacts:e.mobile),r.push(e.mobile)}),this.forms.shipperId=i.join(","),this.forms.shipperName=s.join(","),this.forms.shipperPhone=r.join(",");var e=[],n=[],a=[];return e.push(this.checkListCar.driverId),n.push(this.checkListCar.driverName?this.checkListCar.driverName:this.checkListCar.driverMobile),a.push(this.checkListCar.driverMobile),this.forms.driverId=e.join(","),this.forms.driverName=n.join(","),this.forms.driverPhone=a.join(","),console.log(this.forms),this.forms.bindingStartDate?this.forms.bindingEndDate?0==this.checkListShpper.length?this.$message({type:"warning",message:"请选择至少一个货主账号~"}):0==o()(this.checkListCar).length?this.$message({type:"warning",message:"请选择车主账号~"}):(this.btnShow=!0,this.forms.bindingEndDate+=86399e3,void Object(c.d)(this.forms).then(function(e){t.$emit("renovate"),t.closeAddNewInfo(),t.$message({type:"success",message:"操作成功~"})}).catch(function(e){t.$message({type:"warning",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)}),t.btnShow=!1})):this.$message({type:"warning",message:"请填写绑定结束时间~"}):this.$message({type:"warning",message:"请填写绑定开始时间~"})},closeAddNewInfo:function(){this.close(),this.clearForms(),this.btnShow=!1},clearForms:function(){this.forms={bindingStartDate:"",bindingEndDate:"",driverId:"",driverName:"",driverPhone:"",shipperId:"",shipperName:"",shipperPhone:""},this.checkListShpper=[],this.checkListCar={}}}}},yUXK:function(e,t){}});