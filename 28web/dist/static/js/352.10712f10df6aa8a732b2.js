webpackJsonp([352],{"/18W":function(e,t){},"28Un":function(e,t,o){"use strict";var i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addEmployeerPop",attrs:{title:t.popTitle,isShow:t.popVisible},on:{close:t.closeMe}},[o("template",{staticClass:"addEmployeerPop-content",slot:"content"},[o("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,inline:!0,"label-position":"right",size:"mini"}},[o("el-form-item",{attrs:{label:"用户姓名","label-width":t.formLabelWidth,prop:"name"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"手机号码","label-width":t.formLabelWidth,prop:"mobilephone"}},[o("el-input",{directives:[{name:"numberOnly",rawName:"v-numberOnly"}],attrs:{maxlength:11,"auto-complete":"off"},model:{value:t.form.mobilephone,callback:function(e){t.$set(t.form,"mobilephone",e)},expression:"form.mobilephone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"登录账号","label-width":t.formLabelWidth,prop:"username"}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top",enterable:!1,manual:!0,value:t.tooltip}},[o("div",{attrs:{slot:"content"},slot:"content"},[t._v("账号可以由字母、数字组成"),o("br"),t._v("长度范围2~15个字符")]),t._v(" "),o("el-input",{attrs:{"auto-complete":"off",disabled:t.isModify},on:{focus:function(e){t.tooltip=!0},blur:function(e){t.tooltip=!1}},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username","string"==typeof e?e.trim():e)},expression:"form.username"}})],1)],1),t._v(" "),t.isModify?t._e():o("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth,prop:"password"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"==typeof e?e.trim():e)},expression:"form.password"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"职位","label-width":t.formLabelWidth,prop:"position"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"员工号","label-width":t.formLabelWidth,prop:"jobNumber"}},[o("el-input",{attrs:{"auto-complete":"off",maxlength:20},model:{value:t.form.jobNumber,callback:function(e){t.$set(t.form,"jobNumber",e)},expression:"form.jobNumber"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"性别",prop:"sexFlag","label-width":t.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.form.sexFlag,callback:function(e){t.$set(t.form,"sexFlag",e)},expression:"form.sexFlag"}},[o("el-option",{attrs:{label:"男",value:"0"}}),t._v(" "),o("el-option",{attrs:{label:"女",value:"1"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"入职时间","label-width":t.formLabelWidth,prop:"hireTime"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:t.form.hireTime,callback:function(e){t.$set(t.form,"hireTime",e)},expression:"form.hireTime"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"归属机构","label-width":t.formLabelWidth,prop:"orgid"}},[o("SelectTree",{attrs:{filterable:"",orgid:t.otherinfo.orgid},model:{value:t.form.orgid,callback:function(e){t.$set(t.form,"orgid",e)},expression:"form.orgid"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"归属部门","label-width":t.formLabelWidth,prop:"departmentId"}},[o("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.form.departmentId,callback:function(e){t.$set(t.form,"departmentId",e)},expression:"form.departmentId"}},t._l(t.departments,function(e){return o("el-option",{key:e.id,attrs:{label:e.dictName,value:e.id}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"企业微信","label-width":t.formLabelWidth,prop:"qywxUserId"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.qywxUserId,callback:function(e){t.$set(t.form,"qywxUserId",e)},expression:"form.qywxUserId"}})],1)],1),t._v(" "),t.isModify?t._e():o("div",{staticClass:"info"},[t._v("注：密码默认为：123456")])],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm",!0)}}},[t._v("保存并添加")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("确 定")]),t._v(" "),o("el-button",{on:{click:t.closeMe}},[t._v("取 消")])],1)],2)},staticRenderFns:[]};t.a=i},"4zgh":function(e,t){},"BTi/":function(e,t,o){"use strict";var i=o("Dd8w"),r=o.n(i),n=o("O6e2"),s=o("u8ra"),a=o("NYxO");t.a={props:{value:{type:[Number,String]},disabled:{type:Boolean,default:!1}},watch:{value:function(e){this.aid=e,this.init()}},mounted:function(){var e=this;this.aid=this.value,this.init(),n.a.$on("closepopbox",function(){console.log("closepopbox selectTree:"),e.$refs.myautocomplete.handleClose()})},computed:r()({},Object(a.b)(["otherinfo"]),{openGroups:function(){return function t(e,o){var i=[];return e.map(function(e){e.index=o,i.push(e),e.children&&(i=i.concat(t(e.children,o+1)))}),i}(this.groups,1)}}),data:function(){return{groups:[],aid:""}},methods:{init:function(){var t=this;this.inited||(this.inited=!0,Object(s.b)(this.otherinfo.companyId).then(function(e){t.groups=e}).catch(function(e){t.inited=!1}))},change:function(e){this.$emit("change",e),this.$emit("input",e)}}}},BeJv:function(e,t,o){"use strict";var i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"popRight",class:{showPopRight:e.isShow},style:{zIndex:e.zIndex}},[o("div",{staticClass:"popRight-header"},[e._t("title",[e._v(e._s(e.title))]),e._v(" "),o("i",{staticClass:"el-icon-close",attrs:{title:"关闭"},on:{click:e.close}})],2),e._v(" "),o("div",{staticClass:"popRight-content arteryDelivery_lrl"},[e._t("content",[e._v("内容")])],2),e._v(" "),o("div",{staticClass:"popRight-footer"},[e._t("footer",[e._v("底部")])],2)])},staticRenderFns:[]};t.a=i},E4LH:function(e,t,o){"use strict";t.b=function(e){return/^([0-9a-zA-Z\|\-\_]|[\u0391-\uFFE5]){2,}$/.test(e.trim())},t.c=function(e){return/^(13[0-9]|14[57]|15[01-37-9]|18[0235-9])\d{8}$/.test(e)},o.d(t,"a",function(){return i});var i={ONLY_CHINESE:/^[\u4E00-\u9FA5]+$/,CHINESE_AND_ENGLISH:/^[\u4E00-\u9FA5a-zA-Z]+$/,MOBILE:/^[1][3-9]\d{9}$/,ID_CARD:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,ENGLISH_AND_NUMBER:/^[a-zA-Z0-9]+$/,SPECIAL_CHARACTER:/([^0-9a-zA-Z\u4E00-\u9FA5])+/,FLOAT2ING:/^\d+(\.\d{0,2})?$/,EMAIL:/^[\w!#$%&\'*+\/=?^_`{|}~-]+(?:\.[\w!#$%&\'*+\/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/,ONLY_NUMBER:/^[0-9]+$/,ONLY_LETTER:/^[a-zA-Z]+$/,ONLY_PUNCTUATION:/^[~\!@#\$%\^\&\*\(\)_\+\{\}\|\:\"<>\?`\-\=\[\]\\;\',\.\/]+$/,ONLY_NUMBER_AND_LETTER:/^[0-9a-zA-Z]+$/,PWD_NUMBER_AND_LETTER:/^[0-9a-zA-Z_#]{6,32}$/,ONLY_LETTER_AND_PUNCTUATION:/^[a-zA-Z~\!@#\$%\^\&\*\(\)_\+\{\}\|\:\"<>\?`\-\=\[\]\\;\',\.\/]+$/,ONLY_NUMBER_AND_PUNCTUATION:/^[0-9~\!@#\$%\^\&\*\(\)_\+\{\}\|\:\"<>\?`\-\=\[\]\\;\',\.\/]+$/,LETTER_AND_NUMBER_AND_PUNCTUATION:/^[a-zA-Z0-9~\!@#\$%\^\&\*\(\)_\+\{\}\|\:\"<>\?`\-\=\[\]\\;\',\.\/]+$/,ONLY_NUMBER_GT:/^[1-9]\d*$/,ONLY_NUMBER_POINT:/^\d*\.{0,1}\d{0,1}$/,ONLY_ONE_NUMBER:/^[1-9]\d{0,2}\.\d$|^0\.\d$/,ONLY_ENGLISH_NUMBER:/^[A-Za-z0-9_]+$/,TELEPHONE:/(^\d{3}-\d{8}$)|(^\d{4}-\d{7,8}$)/,TEL:/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/,ZIPCODE:/^[1-9]\d{5}(?!\d)$/,strlen:function(e){for(var t=0,o=0;o<e.length;o++)e.charAt(o).match(/[\u0391-\uFFE5]/)?t+=2:t++;return t}}},"G/H5":function(e,t){},P5Di:function(e,t,o){"use strict";var i=o("R5Qd"),r=o("BeJv");var n=function(e){o("4zgh")},s=o("VU/8")(i.a,r.a,n,null,null);t.a=s.exports},R5Qd:function(e,t,o){"use strict";t.a={props:{width:{type:String,default:"546"},title:{type:String,default:"标题"},isShow:{type:Boolean,default:!1}},data:function(){return{zIndex:(window.tmsPopZindex?window.tmsPopZindex+=1:window.tmsPopZindex=1e3,window.tmsPopZindex)}},methods:{close:function(){this.$emit("close")}}}},XvyP:function(e,t,o){"use strict";var i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-select",{ref:"myautocomplete",staticClass:"select-tree",attrs:{disabled:t.disabled},on:{change:t.change},model:{value:t.aid,callback:function(e){t.aid=e},expression:"aid"}},t._l(t.openGroups,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[o("div",{class:"indent indent"+e.index},[t._v(t._s(e.name))])])}))},staticRenderFns:[]};t.a=i},i1bd:function(e,t,o){"use strict";var i=o("mvHQ"),n=o.n(i),r=o("//Fk"),s=o.n(r),a=o("woOf"),l=o.n(a),u=o("Dd8w"),d=o.n(u),c=o("E4LH"),m=o("u8ra"),f=o("P5Di"),p=o("o9X6"),h=o("NYxO");t.a={components:{popRight:f.a,SelectTree:p.a},props:{popVisible:{type:Boolean,default:!1},orgid:{required:!0},isModify:{type:Boolean,default:!1},userInfo:{type:Object,default:function(){}}},computed:d()({},Object(h.b)(["otherinfo"])),data:function(){return{querykey:"11",form:{name:"",mobilephone:"",username:"",password:"123456",position:"",jobNumber:"",sexFlag:"",orgid:"",rolesId:[],departmentId:"",hireTime:"",qywxUserId:""},formLabelWidth:"80px",tooltip:!1,rules:{name:[{required:!0,message:"请输入用户姓名"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],mobilephone:[{required:!0,message:"请输入手机号码",pattern:c.a.MOBILE}],username:[{required:!0,message:"请输入有效的登录账号",pattern:c.a.USERNAME},{max:15,message:"不能超过15个字符",trigger:"blur"}],position:[{max:10,message:"不能超过10个字符",trigger:"blur"}]},popTitle:"新增员工",orgArr:[],rolesArr:[],departmentArr:[],loading:!1,roles:[],departments:[],groups:[],inited:!1,query:"",roleslist:[]}},mounted:function(){this.form.orgid=this.orgid,this.inited||(this.inited=!0,this.initInfo())},watch:{popVisible:function(e,t){this.inited||(this.inited=!0,this.initInfo())},orgid:function(e){this.form.orgid=e},userInfo:function(){if(this.isModify){this.popTitle="修改员工";l()({},this.userInfo);for(var e in this.form)this.form[e]=this.userInfo[e];this.form.rolesId=0===this.userInfo.rolesIdList?"":this.userInfo.rolesIdList}else{for(var t in this.popTitle="新增员工",this.form)this.form[t]="password"===t?"123456":"rolesId"===t?[]:"";this.form.orgid=this.orgid}}},methods:{highLight:function(e,t){return""!==this.query?this.setHightLight(e[t],this.query):e[t]},setHightLight:function(e,t){return e.replace(new RegExp(t,"igm"),'<i class="highlight">'+t+"</i>")},makefilter:function(e){this.query=e;var t=new RegExp(e,"i");this.roleslist=this.roles.filter(function(e){return t.test(e.roleName)})},initInfo:function(){var t=this;return this.loading=!0,s.a.all([Object(m.d)(this.otherinfo.companyId),Object(m.e)(this.otherinfo.companyId)]).then(function(e){t.loading=!1,t.roles=e[0].list,t.roleslist=t.roles,t.departments=e[1]}).catch(function(e){t.$message.error("错误1："+(e.text||e.errInfo||e.data||n()(e))),t.loading=!1,t.inited=!1})},getOrgid:function(e){this.form.orgid=e},reset:function(){var e=this.form.orgid;this.$refs.ruleForm.resetFields(),console.log("id",e,this.form.orgid),this.form.orgid=e},submitForm:function(e,i){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.loading=!0;var t=l()({},r.form),o=void 0;t.rolesId=t.rolesId.join(","),r.isModify?(t.id=r.userInfo.id,o=Object(m.h)(t)):(t.password=r.$md5(t.password),o=Object(m.g)(t)),o.then(function(e){r.loading=!1,r.$message({type:"success",message:"保存成功!"}),r.reset(),i||r.closeMe(),r.$emit("success")}).catch(function(e){r.$message.error("错误2："+(e.text||e.errInfo||e.data||n()(e))),r.loading=!1})})},closeMe:function(e){this.$refs.ruleForm.resetFields(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()}}}},nofg:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("i1bd"),r=o("28Un");var n=function(e){o("/18W")},s=o("VU/8")(i.a,r.a,n,null,null);t.default=s.exports},o9X6:function(e,t,o){"use strict";var i=o("BTi/"),r=o("XvyP");var n=function(e){o("G/H5")},s=o("VU/8")(i.a,r.a,n,null,null);t.a=s.exports},u8ra:function(e,t,o){"use strict";t.b=function(o,e){return a.a.get("/"+l+"/system/org/v1/tree/"+o).then(function(e){var t=e.data||[];return n[o]=t})},t.f=function(o,e){return a.a.post("/"+l+"/system/org/v1/tree/"+o).then(function(e){var t=e.data||[];return n[o]=t})},t.e=u,t.d=d,t.c=function(e,t,o,i,r){var n=e;"object"!==(void 0===e?"undefined":s()(e))&&(n={pageSize:i,currentPage:r,vo:{name:t,orgid:e,mobilephone:o}});return a.a.post("/"+l+"/system/user/v1/findAllInfo",n).then(function(e){return e.data||{total:0,list:[]}})},t.g=function(e){return a.a.post("/"+l+"/system/user/v1/",e)},t.h=function(e){return a.a.put("/"+l+"/system/user/v1/",e)},t.a=function(e){return a.a.delete("/"+l+"/system/user/v1/"+e)},t.i=function(e){return a.a.put("/"+l+"/system/user/v1/usersAuth",e)},t.j=function(e){return a.a.put("/aflc-common/common/aflcCommonUser/v1/resetPlatformAdminPassword",e)},t.k=function(e){return a.a.delete("/"+l+"/system/user/v1/"+e+"/userDimission")};var i=o("//Fk"),r=(o.n(i),o("pFYg")),s=o.n(r),a=o("Vo7i"),l="aflc-common";var n={};function u(e){return a.a.get("/"+l+"/system/dict/v1/selectDictInfo",{params:{dictType:"department_type",orgId:e}}).then(function(e){return e.data||[]})}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return a.a.post("/"+l+"/system/role/v1/findAllInfo",{currentPage:o,pageSize:t,vo:{orgid:e,rolesName:""}}).then(function(e){return e.data||{total:0,list:[]}})}}});