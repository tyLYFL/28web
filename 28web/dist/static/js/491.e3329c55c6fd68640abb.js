webpackJsonp([491],{"4zgh":function(t,e){},BeJv:function(t,e,n){"use strict";var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popRight",class:{showPopRight:t.isShow},style:{zIndex:t.zIndex}},[n("div",{staticClass:"popRight-header"},[t._t("title",[t._v(t._s(t.title))]),t._v(" "),n("i",{staticClass:"el-icon-close",attrs:{title:"关闭"},on:{click:t.close}})],2),t._v(" "),n("div",{staticClass:"popRight-content arteryDelivery_lrl"},[t._t("content",[t._v("内容")])],2),t._v(" "),n("div",{staticClass:"popRight-footer"},[t._t("footer",[t._v("底部")])],2)])},staticRenderFns:[]};e.a=s},P5Di:function(t,e,n){"use strict";var s=n("R5Qd"),i=n("BeJv");var o=function(t){n("4zgh")},r=n("VU/8")(s.a,i.a,o,null,null);e.a=r.exports},R5Qd:function(t,e,n){"use strict";e.a={props:{width:{type:String,default:"546"},title:{type:String,default:"标题"},isShow:{type:Boolean,default:!1}},data:function(){return{zIndex:(window.tmsPopZindex?window.tmsPopZindex+=1:window.tmsPopZindex=1e3,window.tmsPopZindex)}},methods:{close:function(){this.$emit("close")}}}},hYvk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("qvnQ"),i=n("thyS");var o=function(t){n("kluF")},r=n("VU/8")(s.a,i.a,o,null,null);e.default=r.exports},kluF:function(t,e){},qvnQ:function(t,e,n){"use strict";var s=n("Dd8w"),i=n.n(s),o=n("u8ra"),r=n("P5Di"),a=n("NYxO");e.a={components:{popRight:r.a},props:{popVisible:{type:Boolean,default:!1},users:{type:Array,default:[]}},computed:i()({},Object(a.b)(["otherinfo"]),{myusers:function(){var e=this;return this.form.users={},this.users.map(function(t){e.$set(e.form.users,t.id,t.rolesIdList)}),this.users}}),data:function(){return{form:{rolesId:[],users:{}},loading:!1,roles:[],inited:!1}},watch:{popVisible:function(t){this.inited||(this.inited=!0,this.initInfo())}},mounted:function(){this.inited||(this.inited=!0,this.initInfo())},methods:{initInfo:function(){var e=this;return this.loading=!0,Object(o.d)(this.otherinfo.orgid).then(function(t){e.roles=t.list,e.loading=!1}).catch(function(t){e.loading=!1,e.inited=!1,e.$message.error(t.errorInfo||t.text||"未知错误，请重试~")})},submitForm:function(){var e=this;this.loading=!0;var t=[];for(var n in this.form.users)t.push({id:n,rolesId:this.form.users[n].join(",")});Object(o.i)(t).then(function(t){e.loading=!1,e.$message.success("保存成功"),e.closeMe(),e.$emit("success")}).catch(function(t){e.loading=!1,e.$message.error(t.errorInfo||t.text||"未知错误，请重试~")})},closeMe:function(){this.form.users={},this.$emit("update:popVisible",!1)},getId:function(t,e){console.log("change:: ",t,e)}}}},thyS:function(t,e,n){"use strict";var s={render:function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("pop-right",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"setUserAuthPop",attrs:{title:"员工授权",isShow:n.popVisible},on:{close:n.closeMe}},[s("template",{staticClass:"setUserAuthPop-content",slot:"content"},[s("table",[s("thead",[s("tr",[s("th",[n._v("员工")]),n._v(" "),s("th",[n._v("权限角色")])])]),n._v(" "),s("tbody",n._l(n.myusers,function(e){return s("tr",{key:e.username},[s("td",[n._v("\n            "+n._s(e.name)+"\n          ")]),n._v(" "),s("td",[s("el-select",{attrs:{size:"mini",multiple:"",placeholder:"请选择权限"},on:{change:function(t){n.getId(e.id)}},model:{value:n.form.users[e.id],callback:function(t){n.$set(n.form.users,e.id,t)},expression:"form.users[user.id]"}},n._l(n.roles,function(t){return s("el-option",{key:t.id,attrs:{label:t.roleName,value:t.id}})}))],1)])}))])]),n._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){n.submitForm()}}},[n._v("保存")]),n._v(" "),s("el-button",{on:{click:n.closeMe}},[n._v("取 消")])],1)],2)},staticRenderFns:[]};e.a=s},u8ra:function(t,e,n){"use strict";e.b=function(n,t){return a.a.get("/"+u+"/system/org/v1/tree/"+n).then(function(t){var e=t.data||[];return o[n]=e})},e.f=function(n,t){return a.a.post("/"+u+"/system/org/v1/tree/"+n).then(function(t){var e=t.data||[];return o[n]=e})},e.e=c,e.d=l,e.c=function(t,e,n,s,i){var o=t;"object"!==(void 0===t?"undefined":r()(t))&&(o={pageSize:s,currentPage:i,vo:{name:e,orgid:t,mobilephone:n}});return a.a.post("/"+u+"/system/user/v1/findAllInfo",o).then(function(t){return t.data||{total:0,list:[]}})},e.g=function(t){return a.a.post("/"+u+"/system/user/v1/",t)},e.h=function(t){return a.a.put("/"+u+"/system/user/v1/",t)},e.a=function(t){return a.a.delete("/"+u+"/system/user/v1/"+t)},e.i=function(t){return a.a.put("/"+u+"/system/user/v1/usersAuth",t)},e.j=function(t){return a.a.put("/aflc-common/common/aflcCommonUser/v1/resetPlatformAdminPassword",t)},e.k=function(t){return a.a.delete("/"+u+"/system/user/v1/"+t+"/userDimission")};var s=n("//Fk"),i=(n.n(s),n("pFYg")),r=n.n(i),a=n("Vo7i"),u="aflc-common";var o={};function c(t){return a.a.get("/"+u+"/system/dict/v1/selectDictInfo",{params:{dictType:"department_type",orgId:t}}).then(function(t){return t.data||[]})}function l(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return a.a.post("/"+u+"/system/role/v1/findAllInfo",{currentPage:n,pageSize:e,vo:{orgid:t,rolesName:""}}).then(function(t){return t.data||{total:0,list:[]}})}}});