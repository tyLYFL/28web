webpackJsonp([178,226],{"1onU":function(e,t,i){"use strict";var a=i("VT+v"),s=i("juIs");var n=function(e){i("ZdV2"),i("co/t")},o=i("VU/8")(a.a,s.a,n,"data-v-695be8cd",null);t.a=o.exports},"7cCT":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("ppyg"),s=i("m7l+");var n=function(e){i("s5Vc")},o=i("VU/8")(a.a,s.a,n,null,null);t.default=o.exports},"8GCK":function(e,t,i){"use strict";var a=i("aDTI"),s=i("t5DY"),n=i("1onU"),o=i("0xDb"),r=i("7cCT");t.a={data:function(){return{loading:!1,pickerOptions2:{shortcuts:o.l},btnsize:"mini",selectRowData:[],type:"",typetitle:"",selectId:[],sizes:[20,50,100,400],pagesize:20,page:1,totalCount:null,dataTotal:0,tableDataAll:[],formAllData:{businessType:null,userType:null,name:null,startTime:null,endTime:null},created:[],paramsId:null,businessTypeList:[],userTypeList:[{name:"货主",code:"AF00101"},{name:"车主",code:"AF00102"}],dialogFormVisible_add:!1}},props:{isvisible:{type:Boolean,default:!1}},components:{Pager:n.a,addActivety:r.default},watch:{isvisible:{handler:function(e,t){e&&(this.getMoreInformation(),this.firstblood())},immediate:!0}},methods:{getMoreInformation:function(){var t=this;Object(s._12)("AF017").then(function(e){t.businessTypeList=e.data})},cTime:function(e){e?(this.formAllData.startTime=e[0],this.formAllData.endTime=e[1]):(this.formAllData.startTime="",this.formAllData.endTime="")},firstblood:function(){var t=this;this.loading=!1,Object(a.f)(this.page,this.pagesize,this.formAllData).then(function(e){t.dataTotal=e.data.totalCount,t.tableDataAll=e.data.list,t.tableDataAll.forEach(function(e){e.createTime=Object(o.k)(e.createTime,"{y}-{m}-{d} {h}:{i}:{s}")}),t.loading=!1})},getData_query:function(){this.page=1,this.$refs.pager.inputval=this.page,this.$refs.pager.pageNum=this.page,this.firstblood()},clearSearch:function(){this.formAllData={businessType:null,userType:null,name:null,startTime:null,endTime:null},1!=this.page&&(this.page=1,this.$refs.pager.inputval=this.page,this.$refs.pager.pageNum=this.page),this.created=[],this.firstblood()},handleClick:function(e){var t=this;if(0==this.selectRowData.length&&"add"!=e)return this.$message.warning("请选择您要操作的数据");if(1<this.selectRowData.length&&"add"!=e)this.$message({message:"每次只能操作单条数据~",type:"warning"}),this.$refs.multipleTable.clearSelection();else switch(e){case"add":this.type="add",this.typetitle="新增",this.dialogFormVisible_add=!0;break;case"edit":this.type="edit",this.typetitle="修改",this.dialogFormVisible_add=!0,this.selectRowData=this.selectRowData;break;case"data":this.$router.push({name:"营销活动数据",query:{name:this.selectRowData[0].name}});break;case"Effect":this.$router.push({name:"货主订单分析"}),this.$store.state.dataCenter.mobileList=this.selectRowData[0].pushUsers.split(",");break;case"UseStates":var i=void 0;i=1==this.selectRowData[0].status?0:1,this.$message.info("正在操作中..."),Object(a.b)({id:this.selectRowData[0].id,status:i}).then(function(e){0==i?t.$message.warning("已禁用"):t.$message.success("已启用"),t.firstblood()}).catch(function(e){t.$message.error(e.errorInfo)})}},JoinDetail:function(e){this.type="view",this.typetitle="详情",this.dialogFormVisible_add=!0,this.paramsId=e.id},getSelection:function(e){console.log("选中内容",e),this.selectRowData=e},clickDetails:function(e,t,i){this.$refs.multipleTable.toggleRowSelection(e)},JoinActivety:function(e){this.$router.push({name:"营销活动数据",query:{name:e.name}})},handlePageChange:function(e){this.page=e.pageNum,this.pagesize=e.pageSize,this.firstblood()},getDataList:function(){this.firstblood(),this.paramsId=null,this.$refs.multipleTable.clearSelection()}},destroyed:function(){this.$store.state.marketing.mobilePhone&&(this.$store.state.marketing.mobilePhone=null)},mounted:function(){var e=this;this.$nextTick(function(){e.$store.state.marketing.mobilePhone&&0<e.$store.state.marketing.mobilePhone.length&&e.handleClick("add")})}}},A3bd:function(e,t,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chooseCityList"},[i("el-cascader",{ref:"cityTree",attrs:{options:t.cityTree,disabled:t.disabled,props:t.props},on:{change:t.handleItemMore},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}})],1)},staticRenderFns:[]};t.a=a},Br8R:function(e,t){},F6AQ:function(e,t,i){"use strict";var a=i("dMM8"),s=i("A3bd");var n=function(e){i("TpPc")},o=i("VU/8")(a.a,s.a,n,null,null);t.a=o.exports},LwIq:function(e,t,i){"use strict";var a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-container",class:{uploadlist:e.showFileList}},[e.uploadUrl?i("el-upload",{staticClass:"image-uploader",attrs:{data:e.upload,action:e.uploadUrl,multiple:!1,drag:!e.showFileList,"show-file-list":e.showFileList,"file-list":e.filelist,limit:e.limit,"before-upload":e.beforeUpload,"list-type":e.listtype,"on-exceed":e.onexceed,disabled:e.disabled,"on-remove":e.handleRemove,"on-error":e.handleError,"on-success":e.handleImageScucess}},[e._t("content",[e.title&&!e.showFileList?i("div",{staticClass:"upload__title"},[e._v(e._s(e.title))]):e._e(),e._v(" "),i("el-button",{attrs:{size:e.size,type:"primary"}},[e._v("点击上传")]),e._v(" "),e.showFileList?e._e():i("div",{staticClass:"el-upload__text"},[e._v("将文件拖拽到此区域")]),e._v(" "),e.tip?i("div",{staticClass:"upload__tip"},[e._v(e._s(e.tip))]):e._e()])],2):e._e(),e._v(" "),e.imageUrl&&!e.showFileList?i("div",{staticClass:"image-preview"},[i("div",{staticClass:"image-preview-wrapper"},[i("img",{attrs:{src:e.imageUrl}}),e._v(" "),i("div",{staticClass:"image-preview-action"},[i("i",{staticClass:"el-icon-delete",on:{click:e.rmImage}})])])]):e._e()],1)},staticRenderFns:[]};t.a=a},TpPc:function(e,t){},"VT+v":function(e,t,i){"use strict";t.a={props:{sizes:{type:Array,default:function(){return[20,50,100,400]}},total:{type:Number,default:0},pageLog:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.total/this.size)}},watch:{pageNum:function(){this.inputval=this.pageNum},size:function(){1==this.pageLog&&(this.pageNum=1)}},mounted:function(){this.size=this.sizes[0],this.pageNum=this.pageLog},data:function(){return{pageNum:1,oldValue:0,inputval:1,oldNum:1,size:100}},methods:{handleFocus:function(e){this.oldValue=e.target.value},sizesChange:function(){this.pageNum=1,this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size})},changeEvent:function(){this.oldNum!==this.pageNum&&(this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size}))},handleCurrentChange:function(e){this.pageNum=e,this.changeEvent()},handleSizeChange:function(e){this.size=e,this.changeEvent()},handleChange:function(e){var t=parseInt(e,10);isNaN(t)?this.inputval=1:t<1?this.inputval=1:t>this.pages?this.inputval=this.pages:this.inputval=t},handleBlur:function(e){var t=e.target;this.handleChange(t.value),this.jumpTo(this.inputval)},handleKeyup:function(e){var t=e.keyCode,i=e.target;console.log("page keydown:",t,i),13===t&&this.oldValue&&i.value!==this.oldValue&&(this.handleChange(i.value),this.oldValue="")},jumpTo:function(e){console.log("d",this.inputval),e<1?this.pageNum=1:e>this.pages?this.pageNum=this.pages:this.pageNum=e,this.changeEvent()}}}},Xi4N:function(e,t,i){"use strict";t.h=function(e){return a.a.post("/"+s+"/usercenter/aflcDriver/v1/addNew",e)},t.e=function(e){return a.a.get("/"+s+"/usercenter/aflcDriver/v1/detailByMainDriver/"+e)},t.c=function(e){return a.a.post("/"+s+"/usercenter/aflcUserIdcard/v1/identificationUserId?pathFile="+escape(e))},t.a=function(e){return a.a.post("/"+s+"/usercenter/aflcDriverLicence/v1/identificationDriverPermit?filePath="+escape(e))},t.b=function(e){return a.a.post("/"+s+"/usercenter/aflcDriverPermit/v1/identificationDriverPermit?filePath="+escape(e))},t.k=function(e){return a.a.put("/"+n+"/common/aflcCommonUser/v1/updateUserMobile",e)},t.f=function(e){return a.a.put("/"+s+"/usercenter/aflcDriver/v1/updateDriverComprehensive",e)},t.g=function(e){return a.a.post("/"+s+"/usercenter/aflcDriver/v1/checkDriverCarNum",e)},t.i=function(e){return a.a.get("/"+s+"/usercenter/aflcDriver/v1/checkDriverMobile/"+e,e)},t.j=function(e){return a.a.get("/"+o+"/im/driver/v1/pullTrack/"+e)},t.d=function(e){return a.a.post("/"+s+"/usercenter/aflcDriver/v1/batchUpdateBusiness",e)};var a=i("Vo7i"),s="aflc-uc",n="aflc-common",o="aflcsocketioservice"},ZdV2:function(e,t){},aDTI:function(e,t,i){"use strict";t.f=function(e,t,i){return Object(a.a)({url:"/"+s+"/usercenter/aflcMarketingActivityManagement/v1/list",method:"post",data:{currentPage:e,pageSize:t,vo:i}})},t.a=function(e){return a.a.post("/"+s+"/usercenter/aflcMarketingActivityManagement/v1/add",e)},t.b=function(e){return a.a.put("/"+s+"/usercenter/aflcMarketingActivityManagement/v1/update",e)},t.e=function(e){return Object(a.a)({url:"/"+s+"/usercenter/aflcMarketingActivityManagement/v1/"+e,method:"get"})},t.g=function(e,t,i){return Object(a.a)({url:"/"+s+"/usercenter/aflcSmsTemplate/v1/list",method:"post",data:{currentPage:e,pageSize:t,vo:i}})},t.h=function(e){return a.a.put("/"+s+"/usercenter/aflcSmsTemplate/v1/update",e)},t.d=function(e,t,i){return Object(a.a)({url:"/"+s+"/usercenter/aflcMarketingActivityData/v1/list",method:"post",data:{currentPage:e,pageSize:t,vo:i}})},t.c=function(e,t,i){return Object(a.a)({url:"/"+s+"/usercenter/aflcMarketingActivityData/v1/exportExcel",responseType:"blob",method:"post",data:{currentPage:e,pageSize:t,vo:i}})};var a=i("Vo7i"),s="aflc-uc"},bx6o:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("8GCK"),s=i("mHsT");var n=function(e){i("gTz6")},o=i("VU/8")(a.a,s.a,n,null,null);t.default=o.exports},c1tP:function(e,t,i){"use strict";t.o=function(e,t,i){return Object(a.a)({url:"/"+s+"/sm/aflcCouponActivity/v1/list",method:"post",data:{currentPage:e,pageSize:t,vo:i}})},t.n=function(e,t,i){return Object(a.a)({url:"/"+s+"/sm/aflcCouponActivity/v1/listAuto",method:"post",data:{currentPage:e,pageSize:t,vo:i}})},t.l=function(e){return a.a.post("/"+s+"/sm/aflcCouponActivity/v1/add",e)},t.b=function(e){return Object(a.a)({url:"/"+s+"/sm/aflcCouponActivity/v1/delete/"+e,method:"delete"})},t.a=function(e){return Object(a.a)({url:"/"+s+"/sm/aflcCouponActivity/v1/enableOrDisable",method:"post",data:e})},t.c=function(){return Object(a.a)({url:"/"+n+"/sysDict/getSysDictByCodeGet/AF0461",method:"get"})},t.d=function(){return Object(a.a)({url:"/"+n+"/sysDict/getSysDictByCodeGet/AF0462",method:"get"})},t.e=function(){return Object(a.a)({url:"/"+n+"/sysDict/getSysDictByCodeGet/AF0463",method:"get"})},t.f=function(){return Object(a.a)({url:"/"+n+"/sysDict/getSysDictByCodeGet/AF0464",method:"get"})},t.i=function(e){return Object(a.a)({url:"/"+s+"/sm/aflcCoupon/v1/query/"+e,method:"get"})},t.j=function(e){return Object(a.a)({url:"/"+s+"/sm/aflcCoupon/v1/queryTrans/"+e,method:"get"})},t.k=function(e){return Object(a.a)({url:"/"+s+"/sm/aflcCouponActivity/v1/"+e,method:"get"})},t.h=function(e,t,i){return Object(a.a)({url:"/"+s+"/sm/aflcCouponUse/v1/listDetail",method:"post",data:{currentPage:e,pageSize:t,vo:i}})},t.q=function(e,t,i){return Object(a.a)({url:"/"+s+"/sm/aflcCouponUse/v1/listDetailExcel",method:"post",responseType:"blob",data:{currentPage:e,pageSize:t,vo:i}})},t.m=function(e){return a.a.put("/"+s+"/sm/aflcCouponActivity/v1/update",e)},t.p=function(e){return Object(a.a)({url:"/"+s+"/sm/aflcCouponUse/v1/salesmanGrantCoupon",method:"post",data:e})},t.g=function(e){return Object(a.a)({url:"/"+s+"/sm/aflcCouponUse/v1/BatchDistribution",method:"post",data:e})},t.r=function(e){return Object(a.a)({url:"/"+s+"/sm/aflcCouponUse/v1/salesmanProduceCouponExcel",method:"post",data:e,responseType:"blob"})};var a=i("Vo7i"),s="aflc-sm",n="aflc-common"},"co/t":function(e,t){},dMM8:function(e,t,i){"use strict";var a=i("t5DY");t.a={name:"getAreaList",props:{disabled:{type:Boolean},value:[String,Array]},data:function(){return{selectedOptions:[],cityTree:[],props:{label:"name",value:"code",children:"children"},nowData:{province:null,city:null,area:null}}},methods:{handleItemMore:function(e){this.nowData={province:null,city:null,area:null},e[0]&&(this.nowData.province={code:e[0],key:e[0],name:this.$refs.cityTree.currentLabels[0],value:this.$refs.cityTree.currentLabels[0],parentCode:null}),e[1]&&(this.nowData.city={code:e[1],key:e[1],name:this.$refs.cityTree.currentLabels[1],value:this.$refs.cityTree.currentLabels[1],parentCode:e[0]}),e[2]&&(this.nowData.area={code:e[2],key:e[2],name:this.$refs.cityTree.currentLabels[2],value:this.$refs.cityTree.currentLabels[2],parentCode:e[1]}),this.returnArr(this.nowData)},init:function(){var t=this;Object(a.Z)().then(function(e){t.cityTree=e.data})},returnArr:function(e){this.$emit("returnStr",e)},clearData:function(){this.selectedOptions=[]}},mounted:function(){this.init()},beforeDestroy:function(){this.selectedOptions=[]}}},"eJ/K":function(e,t,i){"use strict";var a=i("sLaE"),s=i("LwIq");var n=function(e){i("Br8R"),i("uus1")},o=i("VU/8")(a.a,s.a,n,"data-v-58cb1e30",null);t.a=o.exports},gTz6:function(e,t){},juIs:function(e,t,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tms-pagenation"},[i("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(1)}}},[i("span",{staticClass:"first-page"})]),i("span",{staticClass:"page-num",class:{disabled:t.pageNum<=1},on:{click:function(e){t.jumpTo(t.pageNum-1)}}},[i("span",{staticClass:"prev-page"})]),t._v(" "),i("span",{staticClass:"page-jumper"},[t._v("\n    第\n    "),i("el-input",{ref:"input",staticClass:"el-pagination__editor is-in-pagination",attrs:{min:1,max:t.pages,type:"number",disabled:t.pages<=1},on:{change:t.handleChange,focus:t.handleFocus,blur:t.handleBlur},nativeOn:{keydown:function(e){return t.handleKeyup(e)}},model:{value:t.inputval,callback:function(e){t.inputval="string"==typeof e?e.trim():e},expression:"inputval"}}),t._v(" 页\n  ")],1),t._v("\n  /共 "+t._s(t.pages)+" 页\n  "),i("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pageNum+1)}}},[i("span",{staticClass:"next-page"})]),t._v(" "),i("span",{staticClass:"page-num",class:{disabled:t.pageNum===t.pages},on:{click:function(e){t.jumpTo(t.pages)}}},[i("span",{staticClass:"last-page"})]),t._v(" "),i("span",{staticClass:"tms-pagination__sizes"},[i("el-select",{staticClass:"page-select",attrs:{placeholder:"请选择"},on:{change:t.sizesChange},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}},t._l(t.sizes,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})}))],1)])},staticRenderFns:[]};t.a=a},"m7l+":function(e,t,i){"use strict";var a={render:function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("div",{staticClass:"userRevitalize commoncss"},[a("el-dialog",{ref:"dialog",attrs:{title:i.typetitle,visible:i.dialogFormVisible_add,"modal-append-to-body":!1,"before-close":i.close,top:"5vh","close-on-click-modal":!1}},[a("el-form",{ref:"formAll",attrs:{model:i.formAll,rules:i.rulesForm}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"业务类型：",prop:"businessType","label-width":i.formLabelWidth}},i._l(i.businessTypeList,function(e){return a("el-radio-group",{key:e.code,attrs:{size:"medium",disabled:"view"==i.editType},model:{value:i.formAll.businessType,callback:function(e){i.$set(i.formAll,"businessType",e)},expression:"formAll.businessType"}},[a("el-radio-button",{attrs:{label:e.code}},[i._v(i._s(e.name))])],1)}))],1)],1),i._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"推送用户：",prop:"userType","label-width":i.formLabelWidth}},i._l(i.userTypeList,function(e){return a("el-radio-group",{key:e.code,attrs:{size:"medium",disabled:"view"==i.editType},model:{value:i.formAll.userType,callback:function(e){i.$set(i.formAll,"userType",e)},expression:"formAll.userType"}},[a("el-radio-button",{attrs:{label:e.code}},[i._v(i._s(e.name))])],1)}))],1)],1),i._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"活动名称：",prop:"name","label-width":i.formLabelWidth}},[a("el-input",{attrs:{clearable:"",disabled:"view"==i.editType,maxlength:"30"},model:{value:i.formAll.name,callback:function(e){i.$set(i.formAll,"name",e)},expression:"formAll.name"}})],1)],1)],1),i._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"推送方式：",prop:"pushType","label-width":i.formLabelWidth}},[a("el-checkbox-group",{attrs:{disabled:"view"==i.editType},model:{value:i.formAll.pushType,callback:function(e){i.$set(i.formAll,"pushType",e)},expression:"formAll.pushType"}},i._l(i.pushTypeList,function(e){return a("el-checkbox",{key:e.code,attrs:{label:e.code,border:"",size:"medium"}},[i._v(i._s(e.name))])}))],1)],1)],1),i._v(" "),a("el-row",[i.formAll.pushType.includes(0)?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"通知标题：",prop:"title","label-width":i.formLabelWidth}},[a("el-input",{attrs:{clearable:"",maxlength:"30",disabled:"view"==i.editType},model:{value:i.formAll.title,callback:function(e){i.$set(i.formAll,"title",e)},expression:"formAll.title"}})],1)],1):i._e()],1),i._v(" "),a("el-row",[i.formAll.pushType.includes(0)?a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"textArea",attrs:{label:"通知内容：",prop:"content","label-width":i.formLabelWidth}},[a("el-input",{ref:"infofocus",attrs:{type:"textarea",rows:2,placeholder:"1-50间的字符",maxlength:"50",clearable:"",disabled:"view"==i.editType},model:{value:i.formAll.content,callback:function(e){i.$set(i.formAll,"content",e)},expression:"formAll.content"}}),i._v(" "),a("p",{staticClass:"countNum"},[a("span",{},[i._v(i._s(i.formAll.content.length))]),i._v(" "),a("span",[i._v("/ 50")])])],1)],1):i._e()],1),i._v(" "),a("el-row",[i.formAll.pushType.includes(1)?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"短信内容：",prop:"smsContent","label-width":i.formLabelWidth}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:i.OpenSMSdialog}},[i._v("从短信模板库选择")]),i._v(" "),a("el-input",{attrs:{clearable:"",disabled:""},model:{value:i.formAll.smsContent,callback:function(e){i.$set(i.formAll,"smsContent",e)},expression:"formAll.smsContent"}})],1)],1):i._e()],1),i._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"推送权益：","label-width":i.formLabelWidth}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",disabled:"view"==i.editType,filterable:""},model:{value:i.formAll.pushCoupon,callback:function(e){i.$set(i.formAll,"pushCoupon",e)},expression:"formAll.pushCoupon"}},i._l(i.coupontableDataAll,function(e){return a("el-option",{key:e.id,attrs:{label:e.activityName,value:e.id}})}))],1)],1)],1),i._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"推送时间：",prop:"pushTimeType","label-width":i.formLabelWidth}},[i._l(i.pushTimeTypeList,function(e){return a("el-radio-group",{key:e.code,attrs:{size:"medium",disabled:"view"==i.editType},model:{value:i.formAll.pushTimeType,callback:function(e){i.$set(i.formAll,"pushTimeType",e)},expression:"formAll.pushTimeType"}},[a("el-radio-button",{attrs:{label:e.code}},[i._v(i._s(e.name))])],1)}),i._v(" "),"1"==i.formAll.pushTimeType?a("div",i._l(i.FlxedTimeList,function(e,t){return a("div",{key:t,staticClass:"getTypeList"},[a("el-date-picker",{attrs:{disabled:"view"==i.editType,type:"datetime","default-time":"00:00:00","value-format":"timestamp",placeholder:"选择日期"},on:{change:function(e){i.Ctime(t,e)}},model:{value:i.FlxedTimeList[t].time,callback:function(e){i.$set(i.FlxedTimeList[t],"time",e)},expression:"FlxedTimeList[keys].time"}}),i._v(" "),a("span",0==t?{staticClass:"addItem PositionCancle",on:{click:i.addItem}}:{staticClass:"reduceItem PositionCancle",on:{click:function(e){i.reduceItem(t)}}})],1)})):i._e()],2)],1)],1),i._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"推送用户：",prop:"pushUsers","label-width":i.formLabelWidth}},[a("div",{staticClass:"tabsWrap"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":i.handleClick},model:{value:i.activeName,callback:function(e){i.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"填写手机号",name:"first"}},[a("p",{},[i._v("请填写用户手机号，一行一个手机号")]),i._v(" "),a("el-input",{attrs:{type:"textarea",rows:5,clearable:"",disabled:"view"==i.editType},model:{value:i.mobile,callback:function(e){i.mobile=e},expression:"mobile"}})],1),i._v(" "),a("el-tab-pane",{attrs:{label:"模板批量推送",name:"second"}},[a("p",[i._v("请上传模板批量推送")]),i._v(" "),a("p",[i._v("格式：txt文档，一行一个手机号")]),i._v(" "),a("div",{staticClass:"upload-container"},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:!i.fileName,expression:"!fileName"}],ref:"upload",staticClass:"image-uploader",attrs:{data:i.upload,"before-upload":i.beforeUpload,"on-success":i.handleImageScucess,action:i.uploadUrl,multiple:"","show-file-list":!1,limit:3}},[i._t("content",[a("el-button",{attrs:{size:"mini",type:"primary"}},[i._v("点击上传")])])],2),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:i.fileName,expression:"fileName"}],staticClass:"image-preview"},[a("div",{staticClass:"image-preview-wrapper"},[a("a",{staticClass:"fileName",attrs:{target:"_blank",href:i.fileName}},[i._v(i._s(i.fileName))]),i._v(" "),"view"!==i.editType?a("i",{staticClass:"el-icon-delete",on:{click:i.rmImage}}):i._e()])])],1)])],1)],1)])],1)],1)],1),i._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["add"==i.editType&&"view"!==i.editType?a("el-button",{attrs:{type:"primary"},on:{click:i.add_data}},[i._v("确 定")]):i._e(),i._v(" "),"edit"==i.editType&&"view"!==i.editType?a("el-button",{attrs:{type:"primary"},on:{click:i.updata_data}},[i._v("确 定")]):i._e(),i._v(" "),a("el-button",{on:{click:function(e){i.close()}}},[i._v("取 消")])],1)],1),i._v(" "),a("el-dialog",{attrs:{title:"短信模板",visible:i.SMSdialog,"modal-append-to-body":!1,"before-close":i.SMSdialogClose,top:"5vh","close-on-click-modal":!1}},[a("el-form",{staticClass:"demo-ruleForm classify_searchinfo",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"短信内容"}},[a("el-input",{attrs:{clearable:""},model:{value:i.SmsForm.smsContent,callback:function(e){i.$set(i.SmsForm,"smsContent",e)},expression:"SmsForm.smsContent"}})],1),i._v(" "),a("el-form-item",{staticClass:"fr"},[a("el-button",{attrs:{type:"primary",plain:"",size:i.btnsize,icon:"el-icon-search"},on:{click:i.getData_query}},[i._v("搜索")]),i._v(" "),a("el-button",{attrs:{type:"info",plain:"",size:i.btnsize,icon:"fontFamily aflc-icon-qingkong"},on:{click:i.clearSearch}},[i._v("清空")])],1)],1),i._v(" "),a("div",{staticClass:"classify_info"},[a("div",{staticClass:"info_news"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",border:"",height:"100%","highlight-current-row":"",data:i.tableDataAll,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"序号",width:"60"},scopedSlots:i._u([{key:"default",fn:function(e){return[i._v("\n              "+i._s((i.page-1)*i.pagesize+e.$index+1)+"\n            ")]}}])}),i._v(" "),a("el-table-column",{attrs:{label:"业务类型",prop:"businessType","show-overflow-tooltip":"",width:"100"}}),i._v(" "),a("el-table-column",{attrs:{label:"推送用户",prop:"userType","show-overflow-tooltip":"",width:"100"}}),i._v(" "),a("el-table-column",{attrs:{label:"短信内容",prop:"smsContent","show-overflow-tooltip":""}}),i._v(" "),a("el-table-column",{attrs:{label:"操作",prop:"","show-overflow-tooltip":"",width:"100"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("h4",{staticClass:"needMoreInfo",on:{click:function(e){i.JoinDetail(t.row)}}},[i._v("选择")])]}}])})],1),i._v(" "),a("div",{staticClass:"info_tab_footer"},[i._v("共计:"+i._s(i.dataTotal)+" "),a("div",{staticClass:"show_pager"},[a("Pager",{ref:"pager",attrs:{total:i.dataTotal,sizes:i.sizes},on:{change:i.handlePageChange}})],1)]),i._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){i.SMSdialogClose()}}},[i._v("取 消")])],1)],1)])],1)],1)},staticRenderFns:[]};t.a=a},mHsT:function(e,t,i){"use strict";var a={render:function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],staticClass:"identicalStyle",staticStyle:{height:"100%"}},[a("el-form",{staticClass:"demo-ruleForm classify_searchinfo",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"业务类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:i.formAllData.businessType,callback:function(e){i.$set(i.formAllData,"businessType",e)},expression:"formAllData.businessType"}},i._l(i.businessTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),i._v(" "),a("el-form-item",{attrs:{label:"推送用户"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:i.formAllData.userType,callback:function(e){i.$set(i.formAllData,"userType",e)},expression:"formAllData.userType"}},i._l(i.userTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),i._v(" "),a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{clearable:""},model:{value:i.formAllData.name,callback:function(e){i.$set(i.formAllData,"name",e)},expression:"formAllData.name"}})],1),i._v(" "),a("el-form-item",{attrs:{label:"推送时间"}},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","picker-options":i.pickerOptions2,"range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},on:{change:i.cTime},model:{value:i.created,callback:function(e){i.created=e},expression:"created"}})],1),i._v(" "),a("el-form-item",{staticClass:"fr"},[a("el-button",{attrs:{type:"primary",plain:"",size:i.btnsize,icon:"el-icon-search"},on:{click:i.getData_query}},[i._v("搜索")]),i._v(" "),a("el-button",{attrs:{type:"info",plain:"",size:i.btnsize,icon:"fontFamily aflc-icon-qingkong"},on:{click:i.clearSearch}},[i._v("清空")])],1)],1),i._v(" "),a("div",{staticClass:"classify_info"},[a("div",{staticClass:"btns_box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus",plain:"",size:i.btnsize},on:{click:function(e){i.handleClick("add")}}},[i._v("新增")]),i._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:i.btnsize},on:{click:function(e){i.handleClick("edit")}}},[i._v("修改")]),i._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-folder",plain:"",size:i.btnsize},on:{click:function(e){i.handleClick("data")}}},[i._v("数据")]),i._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-coin",plain:"",size:i.btnsize},on:{click:function(e){i.handleClick("Effect")}}},[i._v("效果分析")]),i._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-bell",plain:"",size:i.btnsize},on:{click:function(e){i.handleClick("UseStates")}}},[i._v("启用/禁用")])],1),i._v(" "),a("div",{staticClass:"info_news"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",border:"",height:"100%","highlight-current-row":"",data:i.tableDataAll,"tooltip-effect":"dark"},on:{"selection-change":i.getSelection,"row-click":i.clickDetails}},[a("el-table-column",{attrs:{label:"选择",type:"selection",width:"50"}}),i._v(" "),a("el-table-column",{attrs:{label:"序号",width:"60"},scopedSlots:i._u([{key:"default",fn:function(e){return[i._v("\n              "+i._s((i.page-1)*i.pagesize+e.$index+1)+"\n            ")]}}])}),i._v(" "),a("el-table-column",{attrs:{label:"活动名称",prop:"",sortable:"","show-overflow-tooltip":"",width:"100"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("h4",{staticClass:"needMoreInfo",on:{click:function(e){i.JoinDetail(t.row)}}},[i._v(i._s(t.row.name))])]}}])}),i._v(" "),a("el-table-column",{attrs:{label:"业务类型",prop:"businessTypeName",sortable:"","show-overflow-tooltip":"",width:"120"}}),i._v(" "),a("el-table-column",{attrs:{label:"推送用户",prop:"userTypeName",sortable:"","show-overflow-tooltip":"",width:"120"}}),i._v(" "),a("el-table-column",{attrs:{label:"推送时间",prop:"pushTime",sortable:"","show-overflow-tooltip":"",width:"220"}}),i._v(" "),a("el-table-column",{attrs:{label:"启用状态",prop:"status",sortable:"","show-overflow-tooltip":"",width:"120"},scopedSlots:i._u([{key:"default",fn:function(e){return[a("span",{class:"1"==e.row.status?"normalName":"blackName"},[i._v(i._s("1"==e.row.status?"启用":"禁用"))])]}}])}),i._v(" "),a("el-table-column",{attrs:{label:"活动人数",prop:"pushUsersNum",sortable:"","show-overflow-tooltip":"",width:"120"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("h4",{staticClass:"needMoreInfo",on:{click:function(e){i.JoinActivety(t.row)}}},[i._v(i._s(t.row.pushUsersNum))])]}}])}),i._v(" "),a("el-table-column",{attrs:{label:"推送权益",prop:"pushCouponName",sortable:"","show-overflow-tooltip":""}}),i._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",sortable:"","show-overflow-tooltip":"",width:"220"}})],1)],1),i._v(" "),a("div",{staticClass:"info_tab_footer"},[i._v("共计:"+i._s(i.dataTotal)+" "),a("div",{staticClass:"show_pager"},[a("Pager",{ref:"pager",attrs:{total:i.dataTotal,sizes:i.sizes},on:{change:i.handlePageChange}})],1)])]),i._v(" "),a("addActivety",{attrs:{params:i.selectRowData,editType:i.type,typetitle:i.typetitle,dialogFormVisible_add:i.dialogFormVisible_add,paramsId:i.paramsId},on:{"update:dialogFormVisible_add":function(e){i.dialogFormVisible_add=e},getData:i.getDataList}})],1)},staticRenderFns:[]};t.a=a},nco7:function(e,t,i){"use strict";t.m=function(e){return Object(a.a)({url:"/"+s+"/usercenter/aflcShipper/v1/enableOrDisable",method:"post",data:e})},t.j=function(){return Object(a.a)({url:"/"+n+"/sysDict/getSysDictByCodeGet/AF00104",method:"get"})},t.i=function(e){return a.a.post("/"+s+"/usercenter/aflcShipper/v1/add",e)},t.k=function(){return Object(a.a)({url:"/"+n+"/sysDict/getSysDictByCodeGet/AF00101",method:"get"})},t.l=function(e){return a.a.get("/"+s+"/usercenter/aflcShipper/v1/ifFindByMobile/"+e)},t.h=function(e){return a.a.put("/"+s+"/usercenter/aflcShipper/v1/update",e)},t.g=function(){return a.a.get("/"+n+"/sysDict/getSysDictByCodeGet/AF00105")},t.q=function(e){return a.a.post("/"+o+"/sm/aflcCouponUse/v1/reissueCoupon",e)},t.s=function(e,t,i){return Object(a.a)({url:"/"+s+"/usercenter/aflcShipper/v1/listNew",method:"post",data:{currentPage:e,pageSize:t,vo:i}})},t.p=function(e){return a.a.post("/"+s+"/usercenter/aflcShipper/v1/addShipperNew",e)},t.c=function(e){return a.a.get("/"+s+"/usercenter/aflcShipper/v1/findAflcShipperManageByShipperId/"+e)},t.r=function(e){return a.a.put("/"+s+"/usercenter/aflcShipper/v1/updateShipperNew",e)},t.n=function(e){return a.a.put("/"+s+"/usercenter/aflcShipper/v1/substituteAuthUpdateShipper",e)},t.e=function(e){return Object(a.a)({url:"/"+s+"/usercenter/aflcShipper/v1/auditShipperPassNew",method:"post",data:e})},t.d=function(e){return Object(a.a)({url:"/"+s+"/usercenter/aflcShipper/v1/auditShipperNoPassNew",method:"post",data:e})},t.b=function(e){return a.a.post("/"+s+"/usercenter/aflcShipper/v1/aflcShipperFreeze",e)},t.a=function(e){return a.a.put("/"+s+"/usercenter/aflcShipper/v1/aflcShipperBlack",e)},t.o=function(e){return Object(a.a)({url:"/"+s+"/usercenter/aflcShipperBusinessLicence/v1/identificationShipperBusiness?pathFile="+escape(e),method:"post"})},t.f=function(e){return a.a.post("/"+s+"/usercenter/aflcShipper/v1/batchUpdateBusinessShipper",e)},t.t=function(){return Object(a.a)({url:"/"+s+"/usercenter/aflcTradeArea/v1/treeAllList?flag=1",method:"get"})};var a=i("Vo7i"),s="aflc-uc",n="aflc-common",o="aflc-sm"},ppyg:function(e,t,i){"use strict";var a=i("mvHQ"),n=i.n(a),s=i("//Fk"),o=i.n(s),r=i("eJ/K"),l=(i("O6e2"),i("F6AQ")),c=i("t5DY"),u=i("0xDb"),p=i("1onU"),d=i("aDTI"),m=i("c1tP");t.a={components:{Upload:r.a,GetCityList:l.a,Pager:p.a},props:{params:{type:[Object,Array]},paramsId:{type:String,default:""},typetitle:{type:String,default:""},editType:{type:String},dialogFormVisible_add:{type:Boolean,default:!1}},data:function(){var a=this;return{defaultImg:"/static/test.jpg",formLabelWidth:"150px",activeName:"first",coupontableDataAll:[],pickerOptions2:{shortcuts:u.l},btnStatus:!0,btnsize:"mini",formAll:{businessType:null,userType:null,name:null,pushType:[],title:null,content:"",smsTemp:null,smsContent:null,pushCoupon:null,pushTimeType:null,pushTime:null,pushUsers:null},rulesForm:{businessType:{required:!0,message:"请选择业务类型",trigger:"change"},userType:{required:!0,message:"请选择推送用户",trigger:"change"},name:{required:!0,message:"请输入活动名称",trigger:"change"},pushType:{required:!0,message:"请选择至少一种推送方式",trigger:"change"},title:{required:!0,message:"请输入活动标题",trigger:"change"},content:{required:!0,message:"请输入通知内容",trigger:"change"},smsContent:{required:!0,message:"请从短信模板库选择短信内容",trigger:"change"},pushTimeType:{required:!0,message:"请选择推送时间类型",trigger:"change"},pushUsers:{validator:function(e,t,i){"first"==a.activeName?a.mobile?i():i(new Error("请填写推送用户")):a.fileName?i():i(new Error("请填写推送用户"))},trigger:"change",required:!0}},sizes:[20,50,100,400],pagesize:20,page:1,dataTotal:0,tableDataAll:[],SMSdialog:!1,businessTypeList:[],userTypeList:[{name:"货主",code:"AF00101"},{name:"车主",code:"AF00102"}],pushTypeList:[{name:"通知栏",code:0},{name:"短信",code:1}],pushTimeTypeList:[{name:"立即推送",code:0},{name:"定时推送",code:1}],created:[],mobile:this.$store.state.marketing.mobilePhone,template:null,SmsForm:{smsContent:null},FlxedTimeList:[{time:""}],upload:{key:"",policy:"",OSSAccessKeyId:"",success_action_status:"201",signature:""},uploadUrl:"",fileName:""}},watch:{dialogFormVisible_add:{handler:function(e,t){if(e)"add"!=this.editType&&this.openDialog(),this.getMoreInformation(),this.getPolicy(),this.Smsfirstblood(),this.btnStatus=!0;else{for(var i in this.$refs.formAll.resetFields(),this.$emit("getData"),this.formAll)this.formAll[i]="";this.formAll.pushType=[],this.$refs.upload.clearFiles(),this.activeName="first",this.fileName="",this.uploadUrl="",this.mobile="",this.FlxedTimeList=[{time:""}]}}},SMSdialog:{handler:function(e,t){e||this.clearSearch()}}},methods:{getPolicy:function(){var t=this;return Object(c._15)("aflc").then(function(e){t.upload.OSSAccessKeyId=e.accessid,t.upload.policy=e.policy,t.upload.signature=e.signature,t.uploadUrl=e.host}).catch(function(e){console.log("get Policy ERror:",e)})},openDialog:function(){"view"==this.editType?this.getMethods(this.paramsId):this.getMethods(this.params[0].id)},getMethods:function(e){var i=this;Object(d.e)(e).then(function(e){i.formAll=e.data,"-1"==i.formAll.pushUsers.indexOf(".txt")?(i.activeName="first",i.mobile=i.formAll.pushUsers.replace(new RegExp("[,]","g"),"\n")):(i.activeName="second",i.fileName=i.formAll.pushUsers),i.formAll.pushType=JSON.parse(i.formAll.pushType),i.formAll.pushTime.split(",").forEach(function(e,t){0==t?i.FlxedTimeList[t].time=new Date(e).getTime():i.FlxedTimeList.push({time:new Date(e).getTime()})})})},close:function(){this.$emit("update:dialogFormVisible_add",!1)},handleClick:function(e,t){this.activeName=e.name},getMoreInformation:function(){var t=this;Object(m.o)(1,1e6,{usingStatus:"1"}).then(function(e){t.coupontableDataAll=e.data.list}),Object(c._12)("AF017").then(function(e){t.businessTypeList=e.data})},Smsfirstblood:function(){var t=this;Object(d.g)(this.page,this.pagesize,this.SmsForm).then(function(e){t.dataTotal=e.data.totalCount,t.tableDataAll=e.data.list})},addItem:function(){"view"!==this.editType&&this.FlxedTimeList.push({time:null})},reduceItem:function(e){if("view"!==this.editType){if(!(1<this.FlxedTimeList.length))return;this.FlxedTimeList.splice(e,1)}},Ctime:function(e,t){t<(new Date).getTime()&&(this.$message.info("定时推送时间不能小于当前时间"),this.FlxedTimeList[e].time=null)},OpenSMSdialog:function(){this.SMSdialog=!0},SMSdialogClose:function(){this.SMSdialog=!1},getData_query:function(){this.Smsfirstblood()},clearSearch:function(){this.SmsForm.smsContent=null,1!=this.page&&(this.page=1,this.$refs.pager.inputval=this.page,this.$refs.pager.pageNum=this.page),this.Smsfirstblood()},handlePageChange:function(e){this.page=e.pageNum,this.pagesize=e.pageSize,this.firstblood()},JoinDetail:function(e){1==e.status?(this.formAll.smsContent=e.smsContent,this.formAll.smsTemp=e.smsTempCode,this.SMSdialogClose()):this.$message.error("该条短信模板已被禁用！")},beforeUpload:function(i){var a=this,s=i.type.indexOf("text");return new o.a(function(t,e){-1==s?(a.$message.error("上传图片只能是txt格式!"),e(!1)):a.getPolicy().then(function(e){a.upload.key="aflc_dev/temp/"+Object(u.k)(new Date,"{y}{m}{d}")+"/"+parseInt(1e5*Math.random())+"_"+i.name,t(!0)}).catch(function(e){a.$message.error("未知错误："+n()(e)),t(!1)})})},handleImageScucess:function(e){var t="";-1!==e.indexOf("Location")&&(t=(t=e.match(/<Location>([^<]+)<\/Location>/m))?t[1]:""),this.fileName=t},rmImage:function(){this.fileName=""},judgeData:function(){var e=(new Date).getTime();if("1"==this.formAll.pushTimeType)for(var t=0;this.FlxedTimeList.length>t;t++){if(!this.FlxedTimeList[t].time)return this.$message.warning("定时推送时间第"+(t+1)+"条不能为空"),!1;if(e>this.FlxedTimeList[t].time)return this.$message.warning("定时推送时间第"+(t+1)+"条不能小于当前时间"),!1}},completeData:function(){var i=this;"first"==this.activeName?this.mobile&&(this.formAll.pushUsers=this.mobile,this.formAll.pushUsers=this.formAll.pushUsers.replace(new RegExp("\n","g"),",")):this.formAll.pushUsers=this.fileName,this.formAll.pushType.includes(0)&&!this.formAll.pushType.includes(1)&&(this.formAll.smsContent="",this.formAll.smsTemp=""),this.formAll.pushType.includes(1)&&!this.formAll.pushType.includes(0)&&(this.formAll.title="",this.formAll.content=""),this.FlxedTimeList.forEach(function(e,t){0==t?i.formAll.pushTime=e.time:i.formAll.pushTime+=","+e.time})},add_data:function(){var t=this;console.log(this.formAll),this.completeData(),this.$refs.formAll.validate(function(e){if(e){if(t.judgeData(),0==t.judgeData())return;t.btnStatus&&(t.btnStatus=!1,t.formAll.pushType=n()(t.formAll.pushType),Object(d.a)(t.formAll).then(function(e){t.$emit("update:dialogFormVisible_add",!1),t.$message.success("新增成功")}).catch(function(e){t.$message.error(e.errorInfo),t.$emit("update:dialogFormVisible_add",!1)}))}})},updata_data:function(){var t=this;this.completeData(),this.$refs.formAll.validate(function(e){if(e){if(t.judgeData(),0==t.judgeData())return;t.btnStatus&&(t.btnStatus=!1,t.formAll.pushType=n()(t.formAll.pushType),Object(d.b)(t.formAll).then(function(e){t.$emit("update:dialogFormVisible_add",!1),t.$message.success("修改成功")}).catch(function(e){t.$message.error(e.errorInfo),t.$emit("update:dialogFormVisible_add",!1)}))}})}}}},s5Vc:function(e,t){},sLaE:function(e,t,i){"use strict";var a=i("mvHQ"),o=i.n(a),s=i("//Fk"),r=i.n(s),n=i("t5DY"),l=i("0xDb"),c=i("Xi4N"),u=i("nco7");t.a={name:"singleImageUpload",props:{value:[String,Array],title:{type:String,default:""},tip:{type:String,default:"（jpg/png。小于5M）"},size:{type:String,default:"mini"},showFileList:{type:Boolean,default:!1},limit:{type:Number,default:10},listtype:{type:String,default:"picture",enum:["text","picture","picture-card"]},disabled:{type:Boolean,default:!1},uploadType:{type:String,default:""},pictureStatus:{type:[String,Boolean],default:!1}},computed:{imageUrl:function(){return this.value}},data:function(){return{tempUrl:"",dataObj:{token:"",key:""},upload:{key:"",policy:"",OSSAccessKeyId:"",success_action_status:"201",signature:""},uploadUrl:"",dir:"",filelist:[],bucket:null}},watch:{value:{handler:function(e){if(this.showFileList){var t=Array.isArray(e)?e:e?e.split(","):[];t=t.filter(function(e){return e}),this.filelist=t.map(function(e){var t={};return t.url=e,t})}else this.filelist=[{url:e}]},immediate:!0}},mounted:function(){this.init()},methods:{init:function(){var t=this;return this.pictureStatus?(this.bucket="aflc",this.uploadUrl="http://aflc.oss-cn-shenzhen.aliyuncs.com"):(this.bucket="aflcprivate",this.uploadUrl="http://aflcprivate.oss-cn-shenzhen.aliyuncs.com"),Object(n._15)(this.bucket).then(function(e){t.upload.OSSAccessKeyId=e.accessid,t.upload.policy=e.policy,t.upload.signature=e.signature,t.dir=e.dir}).catch(function(e){console.log("get Policy ERror:",e)})},rmImage:function(){this.emitInput(""),this.$message.success("图片删除成功")},onexceed:function(e,t){this.$message.error("最多上传 "+this.limit+" 张!")},handleRemove:function(e,t){console.log("handleRemove:",e,t),this.filelist=t,this.emitInput()},getNowFormatDate:function(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),s=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return t+"_"+i+"_"+a+"_"+(s=s<10?"0"+s:s)+(n=n<10?"0"+n:n)+(o=o<10?"0"+o:o)},random_string:function(e){var t="IMG_WEB_",i=this.getNowFormatDate();return console.log("timestamp",i),t+=i+"_"+Math.floor((Math.random()+Math.floor(9*Math.random()+1))*Math.pow(10,4))},emitInput:function(e){e&&(this.filelist=[],this.filelist.push({url:e})),0<this.filelist.length&&e&&this.pictureTransfer(this.filelist[0].url),this.$emit("input",this.showFileList?this.filelist.map(function(e){return e.url}).join(","):e)},handleImageScucess:function(e){var t=this,i="";this.pictureStatus?-1!==e.indexOf("Location")&&(i=(i=e.match(/<Location>([^<]+)<\/Location>/m))?i[1].replace("//"+this.dir,"/"+this.dir):"",this.emitInput(i)):Object(n._9)(e.match(/<Key>([^<]+)<\/Key>/m)[1]).then(function(e){i=e.data,t.emitInput(i)})},handleError:function(e){console.log("upload err:",e),this.$emit("error",e)},beforeUpload:function(e){var i=this,a=/image\/\w+/.test(e.type)&&/(jpe?g|png)/i.test(e.type),s=e.size/1024/1024<5,n=e.name.match(/([^\.]+)$/);return n=n?"."+n[1]:"",new r.a(function(t,e){a?s?i.init().then(function(e){i.upload.key=i.dir+Object(l.k)(new Date,"{y}{m}{d}")+"/"+i.random_string()+n,t(!0)}).catch(function(e){i.$message.error("未知错误："+o()(e)),t(!1)}):(i.$message.error("上传图片大小不能超过 5MB!"),e(!1)):(i.$message.error("上传图片只能是 JPG/PNG 格式!"),e(!1))})},pictureTransfer:function(e){var t=this;switch(this.uploadType){case"idCardFile":Object(c.c)(e).then(function(e){t.$emit("getInformation",e.data),t.$message.success("身份证识别成功")}).catch(function(e){t.$message.error(e.text)});break;case"drivingLicenceFile":Object(c.a)(e).then(function(e){t.$emit("getInformation",e.data),t.$message.success("驾驶证识别成功")}).catch(function(e){t.$message.error(e.text)});break;case"drivingPermitFile":Object(c.b)(e).then(function(e){t.$emit("getInformation",e.data),t.$message.success("行驶证识别成功")}).catch(function(e){t.$message.error(e.text)});break;case"businessLicenceFile":Object(u.o)(e).then(function(e){t.$emit("getInformation",e.data),t.$message.success("营业执照识别成功")}).catch(function(e){t.$message({type:"error",message:"操作失败，原因："+(e.errorInfo?e.errorInfo:e.text)})})}}}}},t5DY:function(e,t,i){"use strict";t._10=function(t){return t=t||"",n.a.get("/"+o+"/common/aflcCommonPCA/v1/findAflcCommonPCAByCode?code="+t).then(function(e){return e.code=t,e})},t._14=function(e){return n.a.get("/"+o+"/common/aflcCommonPCA/v1/findAllStreetby/"+e)},t._12=function(e){return Object(n.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/"+e,method:"get"})},t._13=function(e){return Object(n.a)({url:"/"+o+"/aflcCommonSysDistApi/findAflcCommonSysDictByCodes/"+e,method:"get"})},t._11=function(e){return Object(n.a)({url:"/"+o+"/sysDict/findAflcCommonSysDictBycode/"+e,method:"get"})},t.s=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00424")},t.r=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF021")},t.u=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF040")},t.f=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF048")},t.j=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF02004")},t.T=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF02003")},t.M=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF017")},t.p=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF018")},t.q=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF009")},t.n=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF05602")},t.m=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF05603")},t.V=function(e,t){return Object(n.a)({url:"/"+r+"/sm/aflcStandardPrice/v1/getPriceByServiceAndCarType/"+e+"/"+t,method:"get"})},t.O=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00101")},t.o=function(){return Object(n.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF009",method:"get"})},t.N=function(){return Object(n.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF00208",method:"get"})},t.G=function(){return Object(n.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF054",method:"get"})},t.R=function(){return Object(n.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF053",method:"get"})},t.z=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00503")},t.K=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00207")},t.k=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00206")},t.Q=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00209")},t.S=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF062")},t.I=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF063")},t.L=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF064")},t.i=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF057")},t.l=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00210")},t.J=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF066")},t.y=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF074")},t.x=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF075")},t.t=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF076")},t.P=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF077")},t.H=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF078")},t.v=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00211")},t.w=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF06803")},t.F=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08501")},t.A=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08506")},t.h=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08502")},t.E=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08507")},t.B=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00513")},t.C=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0880301")},t.D=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0880302")},t.X=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08403")},t.U=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08404")},t.a=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0880303")},t.e=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08805")},t.d=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08804")},t.c=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08808")},t.g=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0880304")},t.W=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08810")},t._20=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF00418")},t.b=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF08802")},t._17=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0710801")},t._18=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF05006")},t._16=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF04913")},t.Y=function(){return n.a.get("/"+o+"/sysDict/getSysDictByCodeGet/AF0710803")},t._15=function(e){return window.UPLOADPOLICYDATA?new s.a(function(e){e(window.UPLOADPOLICYDATA)}):n.a.get("/aflc-common/common/oss/v1/policy?bucket="+e).then(function(e){return window.UPLOADPOLICYDATA=e.data||"",window.UPLOADPOLICYDATA_timer=setTimeout(function(){window.UPLOADPOLICYDATA=""},6e4),window.UPLOADPOLICYDATA})},t._9=function(e){return n.a.get("/aflc-common/common/oss/v1/generatePreSignedUrl?bucket=aflcprivate&key="+e)},t._8=function(){return n.a.get("/"+r+"/sm/aflcDistrict/v1/getProvinceList")},t._5=function(e){return Object(n.a)({url:"/"+r+"/sm/aflcDistrict/v1/lists",method:"post",data:{code:e}})},t._4=function(){return n.a.get("/"+r+"/sm/aflcSysDict/v1/getCarTypeList")},t._7=function(){return n.a.get("/"+r+"/sm/aflcSysDict/v1/getServiceClassList")},t._6=function(){return Object(n.a)({url:"/"+o+"/sysDict/getSysDictByCodeGet/AF025",method:"get"})},t.Z=function(){return n.a.get("/"+o+"/common/aflcCityTree/v1/treaCode")},t._2=function(){return n.a.get("/"+o+"/common/aflcCityTree/v1/provinceCode")},t._0=function(e){return n.a.get("/aflc-sm/sm/aflcAreaPrice/v1/open/"+e)},t._1=function(e){return n.a.get("/aflc-uc/usercenter/aflcLogisticsCompany/v1/companyName?id="+e)},t._3=function(e){return Object(n.a)({url:"/"+l+"/usercenter/aflcBusinessGroup/v1/findAflcSystemUserList",method:"post",data:e})},t._19=function(e){return Object(n.a)({url:"/"+o+"/system/user/v1/operate/staff",method:"post",data:e})};var a=i("//Fk"),s=i.n(a),n=i("Vo7i"),o="aflc-common",r="aflc-sm",l="aflc-uc";window.UPLOADPOLICYDATA="",window.UPLOADPOLICYDATA_timer=""},uus1:function(e,t){}});