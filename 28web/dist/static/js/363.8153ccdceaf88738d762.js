webpackJsonp([363],{"1onU":function(t,e,a){"use strict";var n=a("VT+v"),i=a("juIs");var r=function(t){a("ZdV2"),a("co/t")},o=a("VU/8")(n.a,i.a,r,"data-v-695be8cd",null);e.a=o.exports},Fpi4:function(t,e,a){"use strict";var n=a("HMhe"),i=a("oVhU");var r=function(t){a("lCC/")},o=a("VU/8")(n.a,i.a,r,null,null);e.a=o.exports},HMhe:function(t,e,a){"use strict";var n=a("//Fk"),i=a.n(n),r=a("0xDb");e.a={name:"driverTrack",props:{orderid:[String,Number],trackInfo:{type:Array,default:[]}},data:function(){return{loading:!1,marker:[],lineArr:[]}},watch:{trackInfo:{handler:function(t,e){t?this.init():this.exit()}}},mounted:function(){this.init()},destoryed:function(){this.exit()},methods:{exit:function(){this.map&&this.map.destroy&&this.map.destroy()},initMap:function(){var e=this;this.lineArr=[],this.marker=[];var a=window.AMap;a?this.map=new a.Map("track",{resizeEnable:!0,zoom:15}):console.error("=========加载地图失败=======");var t=this.map,n=new a.Icon({size:new a.Size(25,34),image:"//a.amap.com/jsapi_demos/static/demo-center/icons/dir-marker.png",imageSize:new a.Size(135,40),imageOffset:new a.Pixel(-9,-3)}),i=new a.Marker({position:new a.LngLat(this.trackInfo[0].longitude,this.trackInfo[0].latitude),icon:n,offset:new a.Pixel(-13,-30)}),r=new a.Icon({size:new a.Size(25,34),image:"//a.amap.com/jsapi_demos/static/demo-center/icons/dir-marker.png",imageSize:new a.Size(135,40),imageOffset:new a.Pixel(-95,-3)}),o=new a.Marker({position:new a.LngLat(this.trackInfo[this.trackInfo.length-1].longitude,this.trackInfo[this.trackInfo.length-1].latitude),icon:r,offset:new a.Pixel(-13,-30)});t.add([i,o]),this.marker=new a.Marker({map:this.map,position:[this.trackInfo[0].longitude,this.trackInfo[0].latitude],icon:"https://webapi.amap.com/images/car.png",offset:new a.Pixel(-26,-13),autoRotation:!0}),this.trackInfo.forEach(function(t){e.lineArr.push(new a.LngLat(t.longitude,t.latitude,!0))});new a.Polyline({map:t,path:this.lineArr,strokeColor:"#28F",strokeWeight:3});var s=new a.Polyline({map:t,strokeColor:"#AF5",strokeWeight:3});this.marker.on("moving",function(t){s.setPath(t.passedPath)}),t.setFitView()},startAnimation:function(){this.marker.moveAlong(this.lineArr,2e3)},pauseAnimation:function(){this.marker.pauseMove()},resumeAnimation:function(){this.marker.resumeMove()},stopAnimation:function(){this.marker.stopMove()},loadMap:function(){var a=this;return window.AMap?i.a.resolve(""):new i.a(function(t,e){Object(r.h)("https://webapi.amap.com/maps?v=1.4.10&key=f167f450303ea43b1c9ccc459156f867").then(function(){a.initMap()}).catch(function(){e()})})},init:function(){var t=this;return i.a.all([this.loadMap()]).then(function(){t.initMap()})}}}},"VT+v":function(t,e,a){"use strict";e.a={props:{sizes:{type:Array,default:function(){return[20,50,100,400]}},total:{type:Number,default:0},pageLog:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.total/this.size)}},watch:{pageNum:function(){this.inputval=this.pageNum},size:function(){1==this.pageLog&&(this.pageNum=1)}},mounted:function(){this.size=this.sizes[0],this.pageNum=this.pageLog},data:function(){return{pageNum:1,oldValue:0,inputval:1,oldNum:1,size:100}},methods:{handleFocus:function(t){this.oldValue=t.target.value},sizesChange:function(){this.pageNum=1,this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size})},changeEvent:function(){this.oldNum!==this.pageNum&&(this.oldNum=this.pageNum,this.$emit("change",{pageNum:this.pageNum,pageSize:this.size}))},handleCurrentChange:function(t){this.pageNum=t,this.changeEvent()},handleSizeChange:function(t){this.size=t,this.changeEvent()},handleChange:function(t){var e=parseInt(t,10);isNaN(e)?this.inputval=1:e<1?this.inputval=1:e>this.pages?this.inputval=this.pages:this.inputval=e},handleBlur:function(t){var e=t.target;this.handleChange(e.value),this.jumpTo(this.inputval)},handleKeyup:function(t){var e=t.keyCode,a=t.target;console.log("page keydown:",e,a),13===e&&this.oldValue&&a.value!==this.oldValue&&(this.handleChange(a.value),this.oldValue="")},jumpTo:function(t){console.log("d",this.inputval),t<1?this.pageNum=1:t>this.pages?this.pageNum=this.pages:this.pageNum=t,this.changeEvent()}}}},ZdV2:function(t,e){},"co/t":function(t,e){},eZGv:function(t,e){},hD7Q:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("svym"),i=a("m+y2");var r=function(t){a("eZGv")},o=a("VU/8")(n.a,i.a,r,"data-v-a0848716",null);e.default=o.exports},juIs:function(t,e,a){"use strict";var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tms-pagenation"},[a("span",{staticClass:"page-num",class:{disabled:e.pageNum<=1},on:{click:function(t){e.jumpTo(1)}}},[a("span",{staticClass:"first-page"})]),a("span",{staticClass:"page-num",class:{disabled:e.pageNum<=1},on:{click:function(t){e.jumpTo(e.pageNum-1)}}},[a("span",{staticClass:"prev-page"})]),e._v(" "),a("span",{staticClass:"page-jumper"},[e._v("\n    第\n    "),a("el-input",{ref:"input",staticClass:"el-pagination__editor is-in-pagination",attrs:{min:1,max:e.pages,type:"number",disabled:e.pages<=1},on:{change:e.handleChange,focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keydown:function(t){return e.handleKeyup(t)}},model:{value:e.inputval,callback:function(t){e.inputval="string"==typeof t?t.trim():t},expression:"inputval"}}),e._v(" 页\n  ")],1),e._v("\n  /共 "+e._s(e.pages)+" 页\n  "),a("span",{staticClass:"page-num",class:{disabled:e.pageNum===e.pages},on:{click:function(t){e.jumpTo(e.pageNum+1)}}},[a("span",{staticClass:"next-page"})]),e._v(" "),a("span",{staticClass:"page-num",class:{disabled:e.pageNum===e.pages},on:{click:function(t){e.jumpTo(e.pages)}}},[a("span",{staticClass:"last-page"})]),e._v(" "),a("span",{staticClass:"tms-pagination__sizes"},[a("el-select",{staticClass:"page-select",attrs:{placeholder:"请选择"},on:{change:e.sizesChange},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}},e._l(e.sizes,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1)])},staticRenderFns:[]};e.a=n},"lCC/":function(t,e){},"m+y2":function(t,e,a){"use strict";var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"trail clearfix"},[a("div",{staticClass:"trailData fl"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"100%"}},[a("el-table-column",{attrs:{label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s((e.Page-1)*e.Pagesize+t.$index+1)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"address",label:"定位地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coordinateTime",label:"定位时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("parseTime")(t.row.coordinateTime))+"\n                ")]}}])})],1),e._v(" "),a("div",{staticClass:"info_tab_footer"},[e._v("共计:"+e._s(e.totalCount)+" "),a("div",{staticClass:"show_pager"},[a("Pager",{attrs:{sizes:e.sizes,total:e.totalCount},on:{change:e.handlePageChange}})],1)])],1),e._v(" "),a("div",{staticClass:"tarilMap fr"},[0!=e.trackInfo.length?a("DriverTrack",{attrs:{trackInfo:e.trackInfo}}):e._e()],1)])},staticRenderFns:[]};e.a=n},oVhU:function(t,e,a){"use strict";var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"driverTrack"},[a("div",{attrs:{id:"track"}}),e._v(" "),a("div",{staticClass:"input-card"},[a("h4",[e._v("轨迹回放控制")]),e._v(" "),a("div",{staticClass:"input-item"},[a("input",{staticClass:"btn",attrs:{type:"button",value:"开始动画",id:"start"},on:{click:function(t){e.startAnimation()}}}),e._v(" "),a("input",{staticClass:"btn",attrs:{type:"button",value:"暂停动画",id:"pause"},on:{click:function(t){e.pauseAnimation()}}})]),e._v(" "),a("div",{staticClass:"input-item"},[a("input",{staticClass:"btn",attrs:{type:"button",value:"继续动画",id:"resume"},on:{click:function(t){e.resumeAnimation()}}}),e._v(" "),a("input",{staticClass:"btn",attrs:{type:"button",value:"停止动画",id:"stop"},on:{click:function(t){e.stopAnimation()}}})])])])},staticRenderFns:[]};e.a=n},pikG:function(t,e,a){"use strict";e.z=function(t,e,a){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/orderManager",method:"post",data:{currentPage:t,pageSize:e,vo:a}})},e.r=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/orderDetail/"+t,method:"get"})},e.l=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/getOrderPushList",method:"post",data:t})},e.k=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/getOrderGrabList",method:"post",data:t})},e.j=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/getOrderFollowingFiles",method:"post",data:t})},e.m=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/getReturnListAndEvaluation/"+t,method:"post"})},e.d=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/cancelOrder",method:"post",data:t})},e.e=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/cancelOrderListExcel",method:"post",responseType:"blob",data:t})},e.c=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/appointDriver",method:"post",data:t})},e.p=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/nearDriverList",method:"post",data:t})},e.i=function(t,e,a){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/getOrderCarTrailList",method:"post",data:{currentPage:t,pageSize:e,vo:a}})},e.a=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/customServiceRemark",method:"post",data:t})},e.E=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/sendDeductBonusSms",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t})},e.h=function(){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/getCountByStatus",method:"post"})},e.F=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/webConfirmGoods",method:"post",data:t})},e.n=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrderUnusual/v1/listMasterOrderUnusual",method:"post",data:t})},e.f=function(t){return Object(n.a)({url:"/aflc-uc/usercenter/aflcBehaviorScoreDetail/v1/deductionBehavior/"+t,method:"post"})},e.A=function(t){return Object(n.a)({url:"/aflc-uc/usercenter/aflcBehaviorScoreDetail/v1/returnBehavior/"+t,method:"post"})},e.C=function(t){return Object(n.a)({url:"/aflc-uc/usercenter/aflcBehaviorScoreDetail/v1/returnReward/"+t,method:"post"})},e.o=function(t){return Object(n.a)({url:"/aflc-order/order/aflcOrderBackReward/v1/listReward/"+t,method:"post"})},e.B=function(t,e){return Object(n.a)({url:"/aflc-uc/usercenter/aflcBehaviorScoreDetail/v1/listReturnBehaviorDetial/"+t+"?riskControlCode="+e,method:"post"})},e.y=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrderAudit/v1/orderReview",method:"post",data:t})},e.D=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrderAuditRecord/v1/orderRecordReviewModify/"+t.orderSerial+"?reviewStatus="+t.reviewStatus,method:"put"})},e.g=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrderExpenses/v1/findByOrderSerial/"+t,method:"get"})},e.s=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrderAudit/v1/list",method:"post",data:t})},e.q=function(t){return Object(n.a)({url:"/"+o+"/im/driver/v1/nearbyDriver?longitude="+t.longitude+"&latitude="+t.latitude+"&carTypeCode="+t.carTypeCode+"&distance="+t.distance+"&keyword="+t.keyword+"&isVipCar="+t.isVipCar+"&currentPage="+t.currentPage+"&pageSize="+t.pageSize,method:"get"})},e.v=function(t,e,a){return Object(n.a)({url:"/"+r+"/usercenter/driverSurvey/v1/orderNumAndRank",method:"post",data:{currentPage:t,pageSize:e,vo:a}})},e.b=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/appointDriver",method:"post",data:t})},e.t=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrder/v1/orderManagerAudit",method:"post",data:t})},e.u=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrderAuditRecord/v1/orderRecordAuditModify/"+t,method:"put"})},e.x=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrderAuditRecord/v1/orderRecordAuditFinish",method:"post",data:t})},e.w=function(t){return Object(n.a)({url:"/"+i+"/order/aflcOrderAuditRecord/v1/orderRecordAuditExpenses/"+t,method:"get"})};var n=a("Vo7i"),i="aflc-order",r="aflc-uc",o="aflc-socket"},svym:function(t,e,a){"use strict";var n=a("woOf"),i=a.n(n),r=a("1onU"),o=a("0xDb"),s=a("pikG"),u=a("Fpi4");e.a={name:"trail",components:{Pager:r.a,DriverTrack:u.a},props:{isvisible:{type:Boolean,default:!1}},data:function(){return{page:1,pagesize:1e9,Page:1,Pagesize:200,loading:!0,totalCount:0,sizes:[200,500,1e3],listInformation:[],tableData:[],trackInfo:[]}},watch:{isvisible:{handler:function(t,e){t&&this.init()},immediate:!0}},mounted:function(){},methods:{init:function(){var n=this;this.loading=!0;var t=i()({},{orderSerial:this.$route.query.orderSerial});Object(s.i)(this.page,this.pagesize,t).then(function(t){n.totalCount=t.data.totalCount;var e=[];e=t.data.list.sort(function(t,e){return t.coordinateTime-e.coordinateTime});var a=Object(o.i)(e);n.listInformation=e.reverse(),n.trackInfo=a,n.loading=!1,n.nowTable()})},nowTable:function(){this.listInformation=this.listInformation;var t=(this.Page-1)*this.Pagesize,e=this.Page*this.Pagesize;this.tableData=this.listInformation.slice(t,e)},handlePageChange:function(t){this.Page=t.pageNum,this.Pagesize=t.pageSize,this.nowTable()}}}}});